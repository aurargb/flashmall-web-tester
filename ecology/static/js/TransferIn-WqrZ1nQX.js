import{d as q,p as G,r as c,c as K,an as m,o as O,b as p,g as t,A as f,i as Q,f as g,t as o,j as s,G as U,w as W,a0 as r,u as X,ac as H,ao as J,a8 as x,a4 as Y,aj as Z,e as i,m as ee}from"./index-D1PoYEED.js";import{_ as te}from"./EmptyTipsPop-N2QSvC9f.js";import{_ as se}from"./BackIcon-BpYI3oOx.js";import{N as ae}from"./NumberKeyBoardInput-Dp5h14sj.js";import{A as oe}from"./ApproveButton-6FFBmPF1.js";import{b as C}from"./beiConstContract-CZLl3IGT.js";import{e as ne}from"./exchangeContract-B32tfNTh.js";import{u as b}from"./index-rs7UlwyB.js";import"./use-placeholder-JujkDclZ.js";/* empty css                                                                 */const le={class:"px-3 bg-[#f2f0ef] text-[#2E2008] font-normal relative"},ie={class:"gap-2 h-[44px] flex items-center sticky top-0 left-0 bg-[#f2f0ef] z-50"},ce={class:"text-sm text-black"},re={class:"bg-white pb-6 px-4 rounded-xl text-[#2E2008]"},ue={class:"flex flex-col gap-1.5 items-center py-7 border-b border-solid border-[#000]/10 mb-4"},de={class:"text-sm text-black opacity-60"},me={key:1,class:"text-3xl font-semibold"},pe={class:"flex items-center justify-between"},fe={class:"text-sm"},ge={class:"flex text-xs opacity-60"},xe={key:1},be={class:"bg-[#FFF8EC] rounded-xl px-0.5 pr-2.5 py-2 mt-4 flex justify-between items-center w-full relative"},ve=["src"],_e={class:"flex items-center mt-5 text-sm mb-5"},he={class:"opacity-60"},ye={class:"text-[#2E2008] text-base"},ke=q({__name:"TransferIn",setup(we){const{credits:$}=C(),{mcoinRate:F}=G(),{lastPrice:M}=ne(),{pledgeMai:z}=C(),[N,u]=b(!1),V=X(),a=c(null),v=c(null),E=async()=>{const e=await M();v.value=m(Number(e)).toString()},_=c(null),I=async()=>{const e=await F();_.value=m(Number(e)).toString()},h=c(null),j=async()=>{const e=await $();h.value=H(e==null?void 0:e.maiTotal).toString()},L=K(()=>a.value?new m(a.value).times(v.value).times(_.value):0),T=()=>{a.value=r(n.value,4)+""},P=e=>{V.push(e)},n=c(0),S=async()=>{const e=await(await J(x.MAI)).balanceOf();n.value=+e},[R,y]=b(!1),D=async()=>{y(!0);try{(await z(a.value)).success&&(a.value=null,u(!0),setTimeout(()=>{u(!1)},2e3)),A()}finally{y(!1)}},[k,w]=b(!1),A=async()=>{w(!0),I(),E(),await Promise.all([S(),j()]),w(!1)};return O(()=>{A()}),(e,l)=>{const B=Y;return i(),p("div",le,[t("div",ie,[g(se),t("div",ce,o(e.$t("zhuan-ru-mai")),1)]),t("div",re,[t("div",ue,[t("div",de,o(e.$t("zai-cun-mai-shu-liang")),1),s(k)?(i(),f(B,{key:0,color:"#000",size:"1.5rem"})):(i(),p("div",me,o(s(r)(h.value)),1))]),t("div",pe,[t("div",fe,o(e.$t("zhuan-ru-jin-e")),1),t("div",ge,[U(o(e.$t("yue"))+" ",1),s(k)?(i(),f(B,{key:0,size:"12"})):(i(),p("span",xe,o(s(r)(n.value))+"MAI",1))])]),t("div",be,[t("img",{class:"rounded-full w-6 h-6 ml-2.5 mr-1",src:s(Z)("images/tokens/MAI.png"),alt:"",srcset:""},null,8,ve),g(ae,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=d=>a.value=d),class:"py-1.5 flex-1 bg-[#FFF8EC] text-lg font-bold text-[#2E2008]",placeholder:"0",reg:/^\d+(\.\d{0,4})?$/,max:n.value&&s(r)(n.value,4)},null,8,["modelValue","max"]),t("div",{class:"px-1.5 py-0.5 border-[1px] border-[#FBA923] border-solid rounded text-xs text-[#FBA923] font-medium absolute right-2.5",onClick:T}," MAX ")]),t("div",_e,[t("div",he,o(`${e.$t("yu-ji-ti-sheng-xin-yong-shouedu")} ${s(r)(+L.value,2)}  Mcoin`),1)]),g(oe,{approveAmount:+a.value,contract:s(x).bei,disabled:a.value<=0||n.value<a.value,token:s(x).MAI,fallBack:D,loading:s(R),class:"btn block font-normal bg-[#FED73A] h-[50px] w-full px-4 rounded-3xl text-base text-center leading-[50px]"},{default:W(()=>[t("span",ye,o(e.$t("que-ren-zhuan-ru")),1)]),_:1},8,["approveAmount","contract","disabled","token","loading"])]),t("div",{class:"absolute bottom-12 left-1/2 -translate-x-1/2 text-base text-[#FEA021] z-20",onClick:l[1]||(l[1]=d=>P("/maiPledge-fundDetails?type=1"))},o(e.$t("zhuan-ru-ji-lu")),1),s(N)?(i(),f(te,{key:0,text:e.$t("zhuan-ru-cheng-gong"),onClose:l[2]||(l[2]=d=>s(u)(!1))},null,8,["text"])):Q("",!0)])}}}),Ie=ee(ke,[["__scopeId","data-v-2f56fcfa"]]);export{Ie as default};
