import{d as Z,r as d,b as o,e as l,g as s,t as n,f as c,y as cs,B as M,w as h,G as ss,X as es,m as ts,a3 as ps,a as fs,o as _s,a2 as vs,i as x,J as hs,j as i,l as ms,a4 as xs,F as W,h as Y,K as C,n as D,a5 as b,C as gs,a6 as ys}from"./index-CUOTbcfj.js";import{_ as bs}from"./BackIcon-BJnAPxX0.js";/* empty css                                                                  */import{_ as ks}from"./CommonPop.vue_vue_type_script_setup_true_lang-Bt2QTDGv.js";import{c as ws,i as $s,d as Ss,e as As}from"./guarantee-Co77L47n.js";import{u as Cs}from"./index-Da-FZxSY.js";/* empty css                                                                 */const zs="/ecology/static/png/avatarRing-CSeD8_ae.png",Fs={class:"px-4 py-5 bg-white rounded-xl"},js={class:"mb-4 text-center"},qs={class:"bg-[#F3F3F3] rounded-xl"},Bs={class:"flex mt-5 mb-1.5 gap-4"},Ds={class:"text-base"},Ms={class:"text-[#2E2008] text-base flex items-center gap-1.5"},Ts=Z({__name:"SearchBox",props:{loading:{type:Boolean},type:{}},emits:["search","reset"],setup(as,{expose:z,emit:F}){const r=d(""),p=F;return z({reset:()=>{r.value=""}}),(u,f)=>{const q=cs,w=M,$=es,k=M;return l(),o("div",Fs,[s("div",js,n(u.type?"請輸入您的新地址，將當前店舖信息遷移到新地址":u.$t("qing-shu-ru-nin-xu-yao-guan-lian-de-di-zhi")),1),s("div",qs,[c(q,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=g=>r.value=g),placeholder:u.type?"請輸入您需要新地址":u.$t("qing-shu-ru-nin-xu-yao-guan-lian-de-di-zhi"),rows:"2",type:"textarea",spellcheck:!1},null,8,["modelValue","placeholder"])]),s("div",Bs,[c(w,{round:"",disabled:u.loading||!r.value,class:"plain-btn w-1/2 h-[48px] text-[#FED73A] font-semibold rounded-3xl",onClick:f[1]||(f[1]=()=>{p("reset")})},{default:h(()=>[s("span",Ds,n(u.$t("zhong-zhi")),1)]),_:1},8,["disabled"]),c(k,{round:"",loading:u.loading,disabled:!(r.value&&r.value.length>0),class:"btn w-1/2 font-semibold bg-[#FED73A] h-[48px] rounded-3xl text-base text-center leading-[48px]",onClick:f[2]||(f[2]=g=>p("search",r.value))},{default:h(()=>[s("div",Ms,[c($,{name:"search",size:"18",class:"font-bold"}),ss(" "+n(u.$t("cha-xun")),1)])]),_:1},8,["loading","disabled"])])])}}}),Ls=ts(Ts,[["__scopeId","data-v-5f46072d"]]),Is={class:"bg-[#F2F0EF] font-normal"},Vs={class:"h-[44px] font-semibold bg-white sticky top-0 w-full z-50 flex items-center gap-0.5 px-3"},Es={class:"p-4"},Ns={key:0,class:"h-[50px] flex gap-2.5"},Ps={class:"h-[50] flex flex-col justify-between py-1"},Rs={class:"text-sm font-semibold leading-1"},Gs={class:"mr-1 text-xs"},Js={key:1},Ks={class:"mt-4"},Us={class:"text-lg my-2.5 font-semibold"},Xs={class:"rounded-xl bg-white px-4"},Hs={key:0,class:"py-6 text-base text-center"},Os={class:"text-base text-default"},Qs={key:1,class:"py-6 text-base text-center"},Ws={key:2},Ys={class:"text-base font-semibold"},Zs=["onClick"],se={key:0,class:"text-sm"},ee={key:1,class:"text-sm"},te={class:"text-lg mt-4 mb-2.5 font-semibold"},ae={class:"rounded-xl bg-white px-4"},ne={key:0,class:"py-4 text-base text-center"},oe={key:1},le={key:0,class:"text-base font-semibold"},ie={key:2,class:"py-4 flex items-center justify-between"},de={class:"text-base font-semibold"},re={class:"flex gap-1 mt-2.5"},ue={class:"py-8 text-base text-center text-black"},ce={class:"text-primary"},pe={class:"text-primary"},fe={class:"flex gap-5"},_e={class:"text-black"},ve=Z({__name:"ShopMigrate",setup(as){ps();const{t:z}=fs(),[F,r]=Cs(!1),p=d(!1),j=d(""),u=d([]),f=d(null),q=async a=>{if(!a)return;j.value=a,p.value=!0;const{success:e,data:v,total:B}=await As({address:a});p.value=!1,e&&(u.value=v,f.value=B)},w=d(),$=()=>{var a;(a=w.value)==null||a.reset(),u.value=[]},k=d(!1),g=d(null),ns=(a,e)=>{e&&e.status<3||(g.value=a,r(!0))},os=async()=>{k.value=!0;const{success:a}=await ws({address:g.value});k.value=!1,$(),r(!1),a&&(gs(z("ti-jiao-cheng-gong-dai-dui-fang-que-ren")),I())},T=d(-1),m=d([]),L=d(null),ls=async()=>{const{success:a,data:e,total:v}=await Ss({type:1,page:1,size:99});a&&(m.value=e||[],L.value=v)},I=async()=>{await is(),T.value===1&&ls()},_=d(null),is=async()=>{const{success:a,data:e}=await ys();a&&(e==null?void 0:e.status)===1&&(_.value=e,T.value=e.status,ds())},S=d(null),ds=async()=>{var v;const{data:a,success:e}=await $s((v=_.value)==null?void 0:v.id);e&&(S.value=a)};return _s(async()=>{I()}),(a,e)=>{var E,N,P,R;const v=bs,B=xs,rs=es,us=vs("i18n-t"),V=M;return l(),o("div",Is,[s("div",Vs,[c(v),ss(" "+n(a.$t("dian-pu-qian-yi")),1)]),s("div",Es,[_.value?(l(),o("div",Ns,[e[4]||(e[4]=s("img",{src:zs,class:"h-full w-auto"},null,-1)),s("div",Ps,[s("div",Rs,n((E=_.value)==null?void 0:E.storeName),1),s("div",{class:"flex items-center text-primary",onClick:e[0]||(e[0]=hs(t=>i(ms)(`/shopInfo?address=${_.value.merchant}`),["stop"]))},[s("div",Gs,n(a.$t("jin-dian-cha-kan")),1),e[3]||(e[3]=s("span",null," > ",-1))])])])):x("",!0),(!((N=_.value)!=null&&N.fmShopTransferApply)||((R=(P=_.value)==null?void 0:P.fmShopTransferApply)==null?void 0:R.status)!==2)&&!S.value?(l(),o("div",Js,[s("div",Ks,[c(Ls,{ref_key:"searchBox",ref:w,loading:p.value,type:1,onSearch:q,onReset:$},null,8,["loading"])]),s("div",null,[s("div",Us,n(a.$t("di-zhi-xin-xi")),1),s("div",Xs,[p.value?(l(),o("div",Hs,[c(B,{size:"18px"},{default:h(()=>[s("span",Os,n(a.$t("jia-zai-zhong-0"))+"...",1)]),_:1})])):x("",!0),!p.value&&!f.value?(l(),o("div",Qs,n(a.$t("zan-wu-shu-ju")),1)):x("",!0),!p.value&&j.value?(l(),o("div",Ws,[(l(!0),o(W,null,Y(u.value,t=>{var A,G,J,K,U,X,H,O,Q;return l(),o("div",{key:t.id,class:"py-4 flex items-center justify-between"},[s("span",Ys,n(i(C)(t.address,"...",5,4)),1),s("div",{class:D(["min-w-[70px] py-1.5 flex justify-center items-center px-3 rounded-full",((A=t.fmShopTransferApply)==null?void 0:A.status)<3||((J=(G=m.value)==null?void 0:G.find(y=>i(b)(y.address)===i(b)(t.address)))==null?void 0:J.status)<3?"bg-[#D8D8D8]":"bg-[#FED73A]"]),onClick:y=>ns(t==null?void 0:t.address,t.fmShopTransferApply)},[t.fmShopTransferApply?(l(),o("span",se,n(((K=t.fmShopTransferApply)==null?void 0:K.status)===2?"已遷移":((U=t.fmShopTransferApply)==null?void 0:U.status)===1?"遷移中":"遷移"),1)):(l(),o("span",ee,n(((H=(X=m.value)==null?void 0:X.find(y=>i(b)(y.address)===i(b)(t.address)))==null?void 0:H.status)===2?"已遷移":((Q=(O=m.value)==null?void 0:O.find(y=>i(b)(y.address)===i(b)(t.address)))==null?void 0:Q.status)===1?"遷移中":"遷移"),1))],10,Zs)])}),128))])):x("",!0)])])])):x("",!0),s("div",null,[s("div",te,n(a.$t("wo-de-qian-yi")),1),s("div",ae,[L.value===0&&!S.value?(l(),o("div",ne,n(a.$t("zan-wu-shu-ju")),1)):(l(),o("div",oe,[(l(!0),o(W,null,Y(m.value,(t,A)=>(l(),o("div",{key:t.id,class:D(["py-4 flex items-center justify-between",{"border-b border-[#D9D9D9]":A!==m.value.length-1}])},[t.status!==2?(l(),o("span",le,n(i(C)(t.address,"...",5,4)),1)):x("",!0),s("div",{class:D(["text-sm text-primary",{"text-primary":t.status===2,"text-default":t.status===1,"text-red-001":t.status===3}])},n(t.status===1?"等待遷移確認中":t.status===2?"已完成遷移":"對方拒絕遷移"),3)],2))),128))])),S.value&&m.value.length===0?(l(),o("div",ie,[s("span",de,n(i(C)(_.value.merchant,"...",5,4)),1),e[5]||(e[5]=s("div",{class:"text-sm text-primary"},"已完成遷移",-1))])):x("",!0)])]),s("div",re,[c(rs,{color:"#FEA021",name:"warning",size:"18"}),e[6]||(e[6]=s("div",{class:"text-xs text-black leading-5"},[s("span",{class:"block"},"*可将当前店铺信息迁移合并至新地址，新地址使用当前店铺名称，一个店铺仅可操作一次迁移"),s("span",{class:"block"},"*迁移合并前店铺未完结订单仍需在原地址操作发货及售后"),s("span",{class:"block"},"*新店铺需要在治理体系中重新审核 ")],-1))])]),c(ks,{width:"90%",show:i(F),name:a.$t("ti-shi"),teleport:"body",onClose:e[2]||(e[2]=t=>i(r)(!1))},{default:h(()=>[s("div",ue,[c(us,{keypath:"shi-fou-que-ren-jiang-dian-pu-qian-yi-he-bing-dao-xin-di-zhi",tag:"div"},{address:h(()=>[s("span",ce,n(i(C)(g.value,"...",5,4)),1)]),store:h(()=>{var t;return[s("span",pe,n((t=_.value)==null?void 0:t.storeName),1)]}),_:1})]),s("div",fe,[c(V,{round:"",class:"plain-btn flex-1 font-semibold",onClick:e[1]||(e[1]=t=>i(r)(!1))},{default:h(()=>[s("span",_e,n(a.$t("qu-xiao")),1)]),_:1}),c(V,{loading:k.value,round:"",class:"flex-1 btn font-semibold",onClick:os},{default:h(()=>e[7]||(e[7]=[s("span",{class:"text-black"},"確認遷移",-1)])),_:1,__:[7]},8,["loading"])])]),_:1},8,["show","name"])])}}}),we=ts(ve,[["__scopeId","data-v-a50a88f2"]]);export{we as default};
