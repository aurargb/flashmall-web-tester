import{d as f,r,c as p,ao as b,I as u,o as _,A,w as g,n as w,B as h,b as i,t as d,ai as C,e as l,m as I}from"./index-CUOTbcfj.js";const N={key:0},$={key:1},F=f({__name:"ApproveButton",props:{contract:{},token:{},fallBack:{type:Function},loading:{type:Boolean},symbol:{},approveAmount:{},disabled:{type:Boolean},classes:{},isHide:{type:Boolean},approveBack:{type:Function}},setup(v,{expose:m}){const a=v,o=r(!1),s=r(0),t=p(()=>Number(s.value)>0&&Number(s.value)>=Number(a.approveAmount??0)||a.approveAmount<=0),c=p(()=>b(a.token)),n=async()=>{o.value=!0,s.value=+await(await c.value.allowance(a.contract)).result,o.value=!1,a.approveBack&&(a==null||a.approveBack())},k=async()=>{o.value=!0,await c.value.approve(a.contract),await n()},B=()=>{t.value?a==null||a.fallBack():k()};return u(()=>a.token,()=>{n()}),u(()=>a.contract,()=>{n()}),_(()=>{n()}),m({isApprove:t}),(e,S)=>{const y=h;return l(),A(y,{round:"",loading:e.loading||o.value,disabled:t.value&&e.disabled,class:w(`${e.classes??"text-red-600 px-4 py-2 bg-gray3"}`),onClick:B},{default:g(()=>[t.value?(l(),i("div",$,[C(e.$slots,"default",{},void 0,!0)])):(l(),i("div",N,d(e.$t("shou-quan"))+d(e.symbol??null),1))]),_:3},8,["loading","disabled","class"])}}}),x=I(F,[["__scopeId","data-v-868c3f86"]]);export{x as A};
