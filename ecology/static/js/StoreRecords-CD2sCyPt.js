import{d as R,u as v,a as L,s as x,q as C,I as b,o as k,b as c,e as o,f as p,w as u,F as q,h as E,A as N}from"./index-CUOTbcfj.js";import{L as w}from"./index-CxvDQ-XZ.js";import{q as z}from"./guarantee-Co77L47n.js";import{_ as I}from"./CommonVanProvider.vue_vue_type_script_setup_true_lang-DPd-NeDl.js";import{_ as T}from"./ReviewStoreItem.vue_vue_type_script_setup_true_lang-tLxmJzL1.js";import{G as n}from"./guarantee-BhLJfceW.js";import"./index-Kl_Xgl6e.js";import"./use-placeholder-D6-2x8kD.js";import"./BackIcon-BJnAPxX0.js";/* empty css                                                                 */import"./member-wzMSw2ZB.js";import"./use-refs-Bv-5yJjw.js";const B={class:"font-normal bg-gray1"},J=R({__name:"StoreRecords",setup(O){const f=v(),{t:i}=L(),t=x({active:2,page:0,size:10,finished:!1,list:[],loading:!1,total:0,sortType:1}),m={[n.OPEN_RECORD]:i("wo-shen-he-de-kai-dian"),[n.CLAIM_RECORD]:i("wo-shen-he-de-jiu-dian"),[n.INACTIVE_RECORD]:i("wo-shen-he-de-inactive-dian")},r=async()=>{t.loading=!0,t.page+=1,await g(),t.loading=!1},h=e=>{f.push(e)},g=async()=>{const e=await z({page:t.page,size:t.size,type:t.active,sortType:t.sortType});if(t.loading=!1,!e.success){t.finished=!0;return}if(!e.data||!+e.total){t.finished=!0;return}t.total=e.total,t.list=t.page===1?e.data:t.list.concat(e.data),t.list.length>=t.total&&(t.finished=!0)},d=()=>{t.page=0,t.total=0,t.finished=!1,t.list=[],r()},a=C();return b(()=>a.query.type,e=>{a.path==="/storeRecords"&&e&&e&&t.active!==Number(e)&&(t.active=Number(e),d())}),k(()=>{a.query.type&&(t.active=Number(a.query.type)),d()}),(e,l)=>{const _=w;return o(),c("div",B,[p(I,{title:m[t.active]},{default:u(()=>[p(_,{loading:t.loading,"onUpdate:loading":l[0]||(l[0]=s=>t.loading=s),class:"px-4 py-2.5",finished:t.finished,"finished-text":e.$t("mei-you-geng-duo-le"),"loading-text":e.$t("jia-zai-zhong"),"immediate-check":!1,onLoad:r},{default:u(()=>[(o(!0),c(q,null,E(t.list,(s,y)=>(o(),N(T,{key:y,shop:s,type:t.active,noBtn:"",onHandleTo:h},null,8,["shop","type"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:1},8,["title"])])}}});export{J as default};
