import{d as T,P as $,S as N,r as b,T as D,f as l,W as H,a4 as O,N as w,O as K,Q as _,c as L,I as C,aD as E,ak as U,aJ as j,aF as q,al as M,am as F,aM as J,bl as Q,aK as W,$ as Z,aq as G,b as P,i as R,bm as X,J as Y,n as ee,bn as A,e as I,m as te}from"./index-D1PoYEED.js";const[le,V]=N("key"),oe=l("svg",{class:V("collapse-icon"),viewBox:"0 0 30 24"},[l("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),ae=l("svg",{class:V("delete-icon"),viewBox:"0 0 32 22"},[l("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var p=T({name:le,props:{type:String,text:$,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:o,slots:c}){const a=b(!1),u=D(),h=i=>{u.start(i),a.value=!0},n=i=>{u.move(i),u.direction.value&&(a.value=!1)},y=i=>{a.value&&(c.default||H(i),a.value=!1,o("press",e.text,e.type))},g=()=>{if(e.loading)return l(O,{class:V("loading-icon")},null);const i=c.default?c.default():e.text;switch(e.type){case"delete":return i||ae;case"extra":return i||oe;default:return i}};return()=>l("div",{class:V("wrapper",{wider:e.wider}),onTouchstartPassive:h,onTouchmovePassive:n,onTouchend:y,onTouchcancel:y},[l("div",{role:"button",tabindex:0,class:V([e.color,{large:e.large,active:a.value,delete:e.type==="delete"}])},[g()])])}});const[ne,v]=N("number-keyboard"),se={show:Boolean,title:String,theme:K("default"),zIndex:$,teleport:[String,Object],maxlength:_(1/0),modelValue:K(""),transition:w,blurOnClose:w,showDeleteKey:w,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:w,safeAreaInsetBottom:w,extraKey:{type:[String,Array],default:""}};function ue(e){for(let o=e.length-1;o>0;o--){const c=Math.floor(Math.random()*(o+1)),a=e[o];e[o]=e[c],e[c]=a}return e}var re=T({name:ne,inheritAttrs:!1,props:se,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:o,slots:c,attrs:a}){const u=b(),h=()=>{const t=Array(9).fill("").map((s,r)=>({text:r+1}));return e.randomKeyOrder&&ue(t),t},n=()=>[...h(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],y=()=>{const t=h(),{extraKey:s}=e,r=Array.isArray(s)?s:[s];return r.length===0?t.push({text:0,wider:!0}):r.length===1?t.push({text:0,wider:!0},{text:r[0],type:"extra"}):r.length===2&&t.push({text:r[0],type:"extra"},{text:0},{text:r[1],type:"extra"}),t},g=L(()=>e.theme==="custom"?y():n()),i=()=>{e.show&&o("blur")},f=()=>{o("close"),e.blurOnClose&&i()},z=()=>o(e.show?"show":"hide"),d=(t,s)=>{if(t===""){s==="extra"&&i();return}const r=e.modelValue;s==="delete"?(o("delete"),o("update:modelValue",r.slice(0,r.length-1))):s==="close"?f():r.length<+e.maxlength&&(o("input",t),o("update:modelValue",r+t))},m=()=>{const{title:t,theme:s,closeButtonText:r}=e,S=c["title-left"],k=r&&s==="default";if(t||k||S)return l("div",{class:v("header")},[S&&l("span",{class:v("title-left")},[S()]),t&&l("h2",{class:v("title")},[t]),k&&l("button",{type:"button",class:[v("close"),q],onClick:f},[r])])},B=()=>g.value.map(t=>{const s={};return t.type==="delete"&&(s.default=c.delete),t.type==="extra"&&(s.default=c["extra-key"]),l(p,{key:t.text,text:t.text,type:t.type,wider:t.wider,color:t.color,onPress:d},s)}),x=()=>{if(e.theme==="custom")return l("div",{class:v("sidebar")},[e.showDeleteKey&&l(p,{large:!0,text:e.deleteButtonText,type:"delete",onPress:d},{default:c.delete}),l(p,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:d},null)])};return C(()=>e.show,t=>{e.transition||o(t?"show":"hide")}),e.hideOnClickOutside&&E(u,i,{eventName:"touchstart"}),()=>{const t=m(),s=l(U,{name:e.transition?"van-slide-up":""},{default:()=>[M(l("div",J({ref:u,style:W(e.zIndex),class:v({unfit:!e.safeAreaInsetBottom,"with-title":!!t}),onAnimationend:z,onTouchstartPassive:Q},a),[t,l("div",{class:v("body")},[l("div",{class:v("keys")},[B()]),x()])]),[[F,e.show]])]});return e.teleport?l(j,{to:e.teleport},{default:()=>[s]}):s}}});const ie=Z(re),de={class:"keyboard-input"},ce=["placeholder"],me=T({__name:"NumberKeyBoardInput",props:{modelValue:{},placeholder:{},max:{},reg:{default:/^\d+(\.\d{0,4})?$/},inputShow:{type:Boolean,default:!0},classStyle:{}},emits:["update:modelValue","onConfirm","keybordShow"],setup(e,{expose:o,emit:c}){const a=b(!1),u=e,h=b(u.modelValue??""),n=b(u.modelValue??""),y=d=>{if(u.max&&+`${n.value}${d}`>+u.max){n.value=A(Number(u.max)),h.value=A(Number(u.max)),f("update:modelValue",n.value);return}(u.reg?u.reg.test(`${n.value}${d}`):!0)&&(n.value=`${n.value}${d}`,f("update:modelValue",n.value))},g=()=>{n.value=n.value.slice(0,-1),f("update:modelValue",n.value)},i=()=>{f("onConfirm")};C(()=>u.modelValue,d=>{n.value=d??"",h.value=d??""}),C(()=>a.value,()=>{f("keybordShow",a.value)});const f=c;return G(()=>{}),o({toShow:()=>{a.value=!0},show:a}),(d,m)=>{const B=ie;return I(),P("div",de,[d.inputShow?M((I(),P("input",{key:0,"onUpdate:modelValue":m[0]||(m[0]=x=>n.value=x),readonly:"",clickable:"",placeholder:d.placeholder,class:ee(["w-full",d.classStyle]),onClick:m[1]||(m[1]=Y(x=>a.value=!0,["stop"]))},null,10,ce)),[[X,n.value]]):R("",!0),l(B,{modelValue:h.value,"onUpdate:modelValue":m[2]||(m[2]=x=>h.value=x),class:"flash-keyboard",theme:"custom","extra-key":".","close-button-text":d.$t("que-ren"),show:a.value,"safe-area-inset-bottom":"",onBlur:m[3]||(m[3]=x=>a.value=!1),onInput:y,onDelete:g,onClose:i},null,8,["modelValue","close-button-text","show"])])}}}),ve=te(me,[["__scopeId","data-v-b2af8e17"]]);export{ve as N};
