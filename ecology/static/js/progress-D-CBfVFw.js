import{d as _,L as h,u as y,s as x,b as n,e as o,g as i,f as r,t as L,w as k,F as b,h as w,A as B}from"./index-DpnWNzZa.js";import{L as v}from"./index-C_cBekjO.js";import{_ as z}from"./BackIcon-Wzk3li0b.js";import{_ as C}from"./ReviewStoreItem.vue_vue_type_script_setup_true_lang-2lyjWvTi.js";import{q as I}from"./guarantee-8vU7Yn2j.js";/* empty css                                                                 */import"./member-wzMSw2ZB.js";import"./guarantee-BhLJfceW.js";import"./use-refs-umfq_Azi.js";const T={class:"font-normal",style:{background:"#f2f0ef"}},V={class:"sticky top-0 px-9 gap-4 text-center text-lg h-[44px] flex bg-white items-center z-50"},q={class:"text-base font-semibold"},H=_({__name:"progress",setup(A){const{getCurrentStoreId:l}=h(),c=y(),t=x({active:0,page:0,size:999,finished:!1,list:[],loading:!1,total:0,sortType:1}),d=async()=>{t.loading=!0,t.page+=1,await f(),t.loading=!1},p=e=>{c.push(e)},f=async()=>{var s;const e=await I({page:t.page,size:t.size,shopId:(s=await l())==null?void 0:s.id});if(t.loading=!1,!e.success){t.finished=!0;return}if(!e.data||!+e.total){t.finished=!0;return}t.total=e.total,t.list=t.page===1?e.data:t.list.concat(e.data),t.list.length>=t.total&&(t.finished=!0)};return(e,s)=>{const u=z,m=v;return o(),n("div",T,[i("div",V,[r(u,{class:"absolute font-normal -translate-y-1/2 top-1/2 left-2.5"}),i("div",q,L(e.$t("shen-he-jin-du")),1)]),r(m,{loading:t.loading,"onUpdate:loading":s[0]||(s[0]=a=>t.loading=a),class:"p-2.5",finished:t.finished,onLoad:d},{default:k(()=>[(o(!0),n(b,null,w(t.list,(a,g)=>(o(),B(C,{key:g,shop:a,noBtn:"",onHandleTo:p},null,8,["shop"]))),128))]),_:1},8,["loading","finished"])])}}});export{H as default};
