import{x as _,y as M,z as t,C as d,e as s,A as x,H as k,aU as I,_ as N,a8 as L,v as O,a9 as S,r,ai as b,W as q,F as j,G as P,D as E,O as H,P as J,J as Q,Q as W}from"./index-Ce_DXvk7.js";import{L as B}from"./index-CscZwBzF.js";import{f as K,_ as X}from"./cf-D0X9PrTD.js";import{_ as Z}from"./filter-line-Ap-Rztjw.js";import{_ as z}from"./TokenAmount-V2Bwu2KM.js";import{_ as A}from"./DataRow-0sSszyJ5.js";import{D as ee}from"./index-DcSy7jCe.js";import{d as te}from"./dark-close-SpaTsRy-.js";import{u as ae}from"./index-BmORpdFZ.js";import"./MAI-BT7NZAfN.js";const le={class:"w-full rounded-xl bg-white p-3 mb-3"},se={class:"w-full title line-clamp-1"},oe={class:"mt-4"},ne={class:"text-b1 text-sm font-semibold"},ie={class:"text-b1 text-sm font-normal ml-1"},ce={class:"text-b1 text-sm font-semibold"},ue={__name:"RecordItem",props:{record:{required:!0}},setup:o=>(n,Y)=>(_(),M("div",le,[t("div",se,d(o.record.title||"--"),1),t("div",oe,[s(z,{title:n.$t("Crowdfunding amount"),mcoin:o.record.collectedMcoin,mai:o.record.collectedMai,point:o.record.collectedPoint,type:o.record.targetType},null,8,["title","mcoin","mai","point","type"]),s(A,{title:n.$t("Number of crowdfunding copies"),class:"mt-2"},{right:x(()=>[t("span",ne,d(o.record.collectedNum||0),1),t("span",ie,d(n.$t("serving")),1)]),_:1},8,["title"]),s(z,{title:n.$t("Dividend Distribution"),mcoin:k(I)(o.record.mcoin),mai:k(I)(o.record.mai),point:k(I)(o.record.point),"point-text":n.$t("Give points"),type:50,class:"mt-2"},null,8,["title","mcoin","mai","point","point-text"]),s(A,{title:n.$t("Dividend payment time"),class:"mt-2"},{right:x(()=>[t("span",ce,d(o.record.createTime||"--"),1)]),_:1},8,["title"])])]))},de={class:"content relative p-4"},re={class:"title relative"},me={class:"text-b1 text-lg font-semibold text-center"},ve={class:"mt-4"},pe={class:"text-b1 text-sm font-semibold"},fe={class:"flex flex-wrap gap-2 mt-3"},xe={class:"text-b1 text-sm font-normal"},be={class:"mt-4"},he={class:"text-b1 text-sm font-semibold mb-3"},we={class:"flex items-center gap-2"},ye={class:"flex-1 bg-gray4 rounded-md w-[155px] h-9 p-2 text-center flex items-center justify-center"},De={class:"flex-1 bg-gray4 rounded-md w-[155px] h-9 p-2 text-center flex items-center justify-center"},ge={class:"mt-6 flex gap-3"},_e={class:"text-base font-normal text-b1"},Ce={class:"text-base font-semibold text-b1"},$e=N({__name:"RecordFilterPop",props:{show:{},showModifiers:{}},emits:L(["update:show","filter"],["update:show"]),setup(o,{emit:n}){const{t:Y}=O(),T=S(o,"show"),m=n,D=[{label:"Mcoin",value:"1"},{label:"Mai",value:"2"},{label:"Mcoin&Mai",value:"3"},{label:Y("integral"),value:"4"}],v=r(!1),p=r(!1),U=r([b().year(),b().month()+1,b().date()]),C=r([b().year(),b().month()+1,b().date()]),l=r({type:"",startDate:"",endDate:""}),$=q(()=>l.value.startDate?new Date(l.value.startDate):b().subtract(10,"years").toDate()),V=u=>b(u).format("YYYY-MM-DD"),R=u=>{const e=u.selectedValues||[],w=e[0],y=e[1],g=e[2];l.value.startDate=b({year:w,month:y-1,day:g}).format("YYYY-MM-DD 00:00:00"),v.value=!1},i=u=>{const e=u.selectedValues||[],w=e[0],y=e[1],g=e[2];l.value.endDate=b({year:w,month:y-1,day:g}).format("YYYY-MM-DD 23:59:59"),p.value=!1},c=()=>{l.value={type:"",startDate:"",endDate:""},m("filter",l.value),f()},h=()=>{m("filter",{type:l.value.type,startDate:l.value.startDate,endDate:l.value.endDate}),f()},F=()=>{m("update:show",!1)},f=()=>{m("update:show",!1)};return(u,e)=>{const w=H,y=J,g=ee;return _(),M("div",null,[s(y,{show:T.value,"onUpdate:show":e[2]||(e[2]=a=>T.value=a),round:"",position:"bottom","close-on-click-overlay":"",onClose:f,closeable:"",onClickOverlay:F,"close-icon":k(te)},{default:x(()=>[t("div",de,[t("div",re,[t("p",me,d(u.$t("Dividend Screening")),1)]),t("div",ve,[t("p",pe,d(u.$t("Crowdfunding Type")),1),t("div",fe,[(_(),M(j,null,P(D,a=>s(w,{key:a.value,class:E(["filter-btn",{active:l.value.type===a.value}]),onClick:Ue=>(G=>{l.value.type=G})(a.value)},{default:x(()=>[t("span",xe,d(a.label),1)]),_:2},1032,["class","onClick"])),64))])]),t("div",be,[t("p",he,d(u.$t("Dividend payment time")),1),t("div",we,[t("div",ye,[t("span",{onClick:e[0]||(e[0]=a=>v.value=!0),class:"text-b1 text-sm font-normal"},d(l.value.startDate?V(l.value.startDate):u.$t("Start time")),1)]),e[9]||(e[9]=t("span",{class:"text-b2"},"-",-1)),t("div",De,[t("span",{onClick:e[1]||(e[1]=a=>p.value=!0),class:"text-b1 text-sm font-normal"},d(l.value.endDate?V(l.value.endDate):u.$t("End time")),1)])])]),t("div",ge,[s(w,{class:"flex-1 reset-btn",onClick:c},{default:x(()=>[t("span",_e,d(u.$t("reset")),1)]),_:1}),s(w,{class:"flex-1 confirm-btn",onClick:h},{default:x(()=>[t("span",Ce,d(u.$t("confirm")),1)]),_:1})])])]),_:1},8,["show","close-icon"]),s(y,{show:v.value,"onUpdate:show":e[5]||(e[5]=a=>v.value=a),position:"bottom",round:""},{default:x(()=>[s(g,{modelValue:U.value,"onUpdate:modelValue":e[3]||(e[3]=a=>U.value=a),onConfirm:R,onCancel:e[4]||(e[4]=a=>v.value=!1)},null,8,["modelValue"])]),_:1},8,["show"]),s(y,{show:p.value,"onUpdate:show":e[8]||(e[8]=a=>p.value=a),position:"bottom",round:""},{default:x(()=>[s(g,{modelValue:C.value,"onUpdate:modelValue":e[6]||(e[6]=a=>C.value=a),"min-date":$.value,onConfirm:i,onCancel:e[7]||(e[7]=a=>p.value=!1)},null,8,["modelValue","min-date"])]),_:1},8,["show"])])}}},[["__scopeId","data-v-1099a126"]]),Me={class:"page__container bg-flash-linear relative"},ke={class:"fixed top-0 w-full right-0 left-0"},Ye={class:"sm:w-[375px] mx-auto fixed top-[50px] h-[calc(100vh-50px)] w-full right-0 left-0 px-3 pb-7 overflow-y-scroll"},Te=N({__name:"IncomeRecord",setup(o){const n=r(0),Y=r(20),T=r(0),m=r(!1),D=r(!1),v=r([]),p=r({targetType:null,startTime:null,endTime:null}),U=i=>{p.value.startTime=i.startDate?i.startDate:null,p.value.endTime=i.endDate?i.endDate:null,p.value.targetType=i.type?Number(i.type):null,n.value=0,v.value=[],C()},C=()=>{m.value=!0,n.value+=1,l()},l=()=>{const i={...p.value,page:n.value,size:Y.value};K(i).then(c=>{if(c.code!=200||c.success===!1)return D.value=!0,void(m.value=!1);const h=c.data||{};T.value=h.total,v.value=n.value===1?v.value=h.records:v.value.concat(h.records),h.current>=h.pages&&(D.value=!0)}).catch(c=>{D.value=!0,m.value=!1}).finally(()=>{m.value=!1})},[$,V]=ae(!1),R=()=>{V(!0)};return(i,c)=>{const h=X,F=B;return _(),M("div",Me,[t("section",ke,[s(h,{title:i.$t("Revenue Record")},{right:x(()=>[t("div",{class:"w-[22px] h-[22px]",onClick:R},c[2]||(c[2]=[t("img",{src:Z,class:"w-[22px] h-[22px]",alt:"Filter Tools"},null,-1)]))]),_:1},8,["title"])]),t("section",Ye,[s(F,{loading:m.value,"onUpdate:loading":c[0]||(c[0]=f=>m.value=f),finished:D.value,"finished-text":i.$t("no-more"),onLoad:C},{default:x(()=>[(_(!0),M(j,null,P(v.value,f=>(_(),W(ue,{key:f.id,class:"record-item",record:f},null,8,["record"]))),128))]),_:1},8,["loading","finished","finished-text"])]),s($e,{show:k($),"onUpdate:show":c[1]||(c[1]=f=>Q($)?$.value=f:null),onFilter:U},null,8,["show"])])}}},[["__scopeId","data-v-ddabc849"]]);export{Te as default};
