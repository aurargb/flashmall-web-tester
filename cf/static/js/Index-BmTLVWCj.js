import{x as r,y as v,e as n,A as f,z as c,C as V,r as s,o as A,d as R,M as S,Q as M,E as z,F as L,G as O,S as D}from"./index-Ce_DXvk7.js";import{S as E,P as T,a as U}from"./scrollSave-CuDB3o3n.js";import{L as q}from"./index-CscZwBzF.js";import{v as F,_ as G,g as Q}from"./cf-D0X9PrTD.js";import{_ as B}from"./DataRow-0sSszyJ5.js";import{_ as w}from"./TokenAmount-V2Bwu2KM.js";import"./projectEnum-9kZKCKr4.js";import"./useCountdown-DD4s2lb6.js";import"./MAI-BT7NZAfN.js";const H={class:"line-1 bg-white py-3 px-3 rounded-xl"},I={class:"text-b1 text-sm font-semibold"},J={__name:"TotalData",props:{summary:{type:Object,default:()=>{}}},setup:l=>(m,y)=>(r(),v("div",H,[n(B,{title:m.$t("Manage Projects")},{right:f(()=>[c("span",I,V(l.summary.projectNum||0)+"\u4E2A",1)]),_:1},8,["title"]),n(w,{title:m.$t("Amount under management"),mcoin:l.summary.totalMcoin,mai:l.summary.totalMai,point:l.summary.totalPoint,type:50,class:"mt-2"},null,8,["title","mcoin","mai","point"]),n(w,{title:m.$t("Amount raised"),mcoin:l.summary.collectedMcoin,mai:l.summary.collectedMai,point:l.summary.collectedPoint,type:50,class:"mt-2"},null,8,["title","mcoin","mai","point"])]))},K={class:"page__container bg-flash-linear relative"},W={class:"fixed top-0 w-full right-0 left-0"},X={class:"sm:w-[375px] mx-auto fixed top-[50px] h-[calc(100vh-50px)] w-full right-0 left-0 px-3 pt-2"},Y={class:"mb-3"},Z={class:"list__wrap overflow-y-scroll h-[calc(100%-112px)] pb-5"},aa=R({name:"Managed"}),ea=Object.assign(aa,{setup(l){const m=S(),y=s({type:"managed",status:"all"}),d=s(0),g=s(20),b=s(0),a=s(!1),p=s(!1),o=s([]),h=s({projectNum:null,successProjectNum:null,totalMCoin:null,totalMai:null,waitRefundMCoin:null,waitRefundMai:null}),x=()=>{a.value=!0,d.value+=1,j()},j=()=>{const e={...y.value,page:d.value,size:g.value};Q(e).then(t=>{if(t.code!=200||t.success===!1)return p.value=!0,void(a.value=!1);const i=t.data||{};b.value=i.total,o.value=d.value===1?o.value=i.records:o.value.concat(i.records),i.current>=i.pages&&(p.value=!0)}).catch(t=>{p.value=!0,a.value=!1}).finally(()=>{a.value=!1})},_=()=>{F().then(e=>{e.code==200&&(h.value=e.data||{})}).catch(e=>{})},C=()=>{o.value=[],d.value=0,g.value=20,_(),x()};return A(()=>{new E(".list__wrap","reset_managed_scroll"),_()}),(e,t)=>{const i=G,$=D,P=q,k=T;return r(),v("div",K,[c("section",W,[n(i,{title:e.$t("my-managed")},null,8,["title"])]),c("section",X,[c("div",Y,[n(J,{summary:h.value},null,8,["summary"])]),c("div",Z,[n(k,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=u=>a.value=u),onRefresh:C,"animation-duration":"200"},{default:f(()=>[o.value.length!==0||a.value?z("",!0):(r(),M($,{key:0,name:e.$t("No record of initiation")},null,8,["name"])),n(P,{loading:a.value,"onUpdate:loading":t[0]||(t[0]=u=>a.value=u),finished:p.value,"finished-text":o.value.length===0?"":e.$t("no-more"),onLoad:x},{default:f(()=>[(r(!0),v(L,null,O(o.value,u=>(r(),M(U,{key:u.id,project:u,onClick:ta=>(N=>{m.push({path:"/created-detail",query:{id:N.id,type:"managed"}})})(u)},null,8,["project","onClick"]))),128))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["modelValue"])])])])}}});export{ea as default};
