import{_ as Q,y as H,E as z,K as B,G as o,N as F,H as t,F as r,J as ee,a1 as A,Q as u,P as a,I as te,O as g,Z as se,$ as oe,X as v,be as U,r as m,D as xe,a3 as ye,a4 as K,R as $e,bs as Ae,a2 as ke,w as be,l as Ie,x as ne,bt as Se,bc as Ce,T as N,U as He,bK as Me,bo as Ee,Y as Ne,a0 as Pe,z as we,bj as Ve,n as Ue}from"./vendor-BlU_hoYl.js";import{_ as Ke}from"./auth-icon-QCWqqJ9q.js";import{_ as Xe}from"./member-BZWba7V1.js";import{b as Qe,_ as We,g as E,e as de,br as Ye,a7 as Ze,a9 as Je,a8 as et,r as Te,u as tt,bs as st,aE as ot,bt as nt,W as re,bu as lt,X as at,aL as it,bv as ct,T as rt}from"./index-Clz0Qna-.js";import{R as J}from"./rangking-soiwLY3n.js";import{_ as ut,M as dt}from"./MetaKeyTag-D6RyTOcl.js";import{_ as mt}from"./ExpressMinutesTag-aSSq9bxY.js";import{R as Le}from"./RatioBox-CfBlBgLi.js";import{_ as ft}from"./ApproveInfo-C5dFK99m.js";import{B as ht}from"./BoutiqueLabelInLogo-BBB_wfVh.js";import{q as pt}from"./beiRanking-BBEXLh4F.js";import{_ as vt}from"./MCOIN-Bodfn-v1.js";import{_ as gt}from"./ImgBoutiqueLable-BIio6fYG.js";import{C as yt}from"./CommonVanProvider-CDfGVWR4.js";import{_ as wt}from"./logo-D1FnEJzd.js";import{c as _t,i as xt,s as $t}from"./convertToImage-B2yuKPNR.js";import{M as kt}from"./MallTabBar-CIYGM8Fg.js";import{R as bt}from"./RemovedShelves-D9xIciHL.js";import{b as _e}from"./mall-tuLNpwbe.js";import{s as It}from"./useOrderStatus-D1Cw0BRr.js";import{O as St,c as Ct}from"./offlineGoods-DvT2Go6q.js";import"./shop-CeqcS6K2.js";import"./BackIcon-8hcEjDKb.js";import"./browser-DFlSdkZC.js";import"./upload-Bd5o3h4D.js";const Tt=""+new URL("../images/kefu-D_Ko4rIY.svg",import.meta.url).href,Lt=""+new URL("../images/collect-oXqS1C1N.png",import.meta.url).href,Bt=""+new URL("../images/collected-BX-G0Q8O.png",import.meta.url).href,Dt=""+new URL("../images/share-tVl568Cu.svg",import.meta.url).href,Rt=""+new URL("../images/governance-BAxxHEE2.svg",import.meta.url).href,qt=e=>(se("data-v-754a2b67"),e=e(),oe(),e),Ft={class:"py-8 text-base text-center text-black"},zt={class:"flex flex-wrap items-center justify-center flex-1 gap-x-4 gap-y-1"},Gt={class:"w-[30px] flex-center bg-[#FED73A] rounded-3xl ml-1"},Ot=qt(()=>t("img",{src:Xe,class:"w-2.5 h-2.5"},null,-1)),jt={class:"text-xs"},At={class:"mt-5"},Ht={class:"flex justify-center"},Mt=H({props:{show:{type:Boolean},list:{default:()=>[]}},emits:["close"],setup(e,{emit:d}){return(h,i)=>{const l=z("van-button");return o(),B(We,{width:"90%",show:e.show,name:h.$t("shop.Service Guarantee"),teleport:"body",onClose:i[1]||(i[1]=()=>{d("close")})},{default:F(()=>[t("div",Ft,[t("div",zt,[(o(!0),r(te,null,ee(e.list,k=>(o(),r("div",{class:"flex items-center text-sm",key:k},[A(u(k.address&&a(Qe)(k.address,"....",4,3))+" ",1),t("div",Gt,[Ot,t("span",jt,"v"+u(k.memberLevel),1)])]))),128))]),t("div",At,u(h.$t("shop.Already guaranteed for this store")),1)]),t("div",Ht,[g(l,{class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:i[0]||(i[0]=k=>d("close"))},{default:F(()=>[A(u(h.$t("common.confirm")),1)]),_:1})])]),_:1},8,["show","name"])}}}),Et=Q(Mt,[["__scopeId","data-v-754a2b67"]]),Nt={key:0,class:"flex items-center min-w-fit"},Pt=["src"],Vt={class:"bg-[#FFF1D6] rounded-2xl text-xs font-normal py-0.5 px-1.5 pl-3.5"},Ut=H({props:{rankNum:null,type:{default:J.SR},showHelpButton:{type:Boolean,default:!1},isLogin:{type:Boolean,default:!1}},emits:["help"],setup(e){return(d,h)=>+e.rankNum>0?(o(),r("div",Nt,[t("img",{src:a(E)(`images/shop/rank${e.rankNum>3?4:e.rankNum}.png`),class:"inline-block w-[14px] h-[16px] -mr-2.5 z-10"},null,8,Pt),t("div",Vt,[A(u(e.type===a(J).EBR?d.$t("ranking.store boost",{num:e.rankNum}):d.$t("ranking.recently hot sales",{num:e.rankNum}))+" ",1),e.showHelpButton&&e.isLogin?(o(),r("span",{key:0,onClick:h[0]||(h[0]=i=>d.$emit("help")),class:"ml-1 text-newOrigin text-xs font-normal cursor-pointer text-left"},u(e.type===a(J).EBR?d.$t("ranking.power_to"):d.$t("mall.Help TA")),1)):v("",!0)])])):v("",!0)}}),Kt=e=>(se("data-v-054950fa"),e=e(),oe(),e),Xt={class:"relative"},Qt={class:"py-3 z-[999]"},Wt={class:"w-full flex justify-start items-center px-2.5"},Yt={class:"w-10 h-10 rounded-[4px] overflow-hidden flex-shrink-0 relative"},Zt=["src"],Jt={class:"absolute right-0 top-0"},es={class:"ml-2 flex flex-col justify-between items-start"},ts={key:0,src:Rt,class:"w-4 mr-1 align-text-top"},ss={class:"flex items-center bg-[#FED73A] rounded-xl py-[0.20rem] px-1.5"},os=Kt(()=>t("img",{src:Ke,class:"inline-block w-3 h-3 mr-0.5"},null,-1)),ns={class:"text-xxs text-default"},ls={class:"flex items-center text-sm text-primary"},as={class:"ml-1"},is={class:"h-10 flex flex-col justify-start items-center ml-auto flex-shrink-0"},cs={class:"w-full flex justify-start items-center mt-2 gap-1.5 overflow-x-auto px-2.5"},rs={class:"mt-3 overflow-x-auto px-2.5"},us={key:0,class:"flex"},ds=["onClick"],ms=["src"],fs={key:1,class:"flex"},hs={class:"flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]"},ps=["src"],vs=H({props:{info:null,list:{default:()=>[]},authorizeInfo:null},emits:["handleTo"],setup(e,{expose:d,emit:h}){const i=e,{accountStore:l}=de(),[k,D]=U(!1),[b,q]=U(!1),C=m({}),I=async()=>{var p,y,w,T,S;if(!((p=i.info)!=null&&p.id))return;const{success:x,data:c}=await pt({shopId:(y=i.info)==null?void 0:y.id,month:Ye()});!x||(c==null?void 0:c.status)!==1||(C.value={...c,mai:c.allMai,type:2,id:c.rankingId,avatar:(w=i.info)==null?void 0:w.logo,nickname:(T=i.info)==null?void 0:T.storeName,address:(S=i.info)==null?void 0:S.merchant})},O=x=>{const c=i.info.scenery.split(",")||[];Ae({images:c,startPosition:x||0,loop:!1,closeOnPopstate:!0})};return xe(()=>{I()}),d({getMyRanking:I}),(x,c)=>{var y,w,T;const p=z("van-rate");return o(),r("div",Xt,[t("div",Qt,[t("div",Wt,[t("div",Yt,[t("img",{src:e.info.logo||e.info.scenery&&e.info.scenery.split(",")[0]||a(E)("images/goods/defaultImg.png"),class:"w-10 h-full object-cover"},null,8,Zt),t("div",Jt,[g(ht,{type:e.info.type},null,8,["type"])])]),t("div",es,[t("div",{class:"text-base font-semibold text-black line-clamp-1 max-w-max leading-[22px] inline-flex",onClick:c[1]||(c[1]=K(S=>e.list&&e.list.length>0?a(q)(!0):null,["stop"]))},[e.list&&e.list.length>0?(o(),r("img",ts)):v("",!0),A(" "+u(e.info.storeName)+" ",1),(y=e.authorizeInfo)!=null&&y.authorizeAddress?(o(),r("div",{key:1,onClick:c[0]||(c[0]=K(()=>{a(D)(!0)},["stop"])),class:"inline-block ml-1.5 lex-shrink-0 align-text-bottom"},[t("div",ss,[os,t("span",ns,u(x.$t("ecology.authorized")),1)])])):v("",!0)]),t("div",ls,[g(p,{class:"flex-shrink-0",readonly:"","allow-half":"",modelValue:e.info.star,"onUpdate:modelValue":c[2]||(c[2]=S=>e.info.star=S),size:16,gutter:"0",color:"#FEA021"},null,8,["modelValue"]),t("span",as,u(e.info.star),1)])]),t("div",is,[g(Le,{tag:x.$t("common.rebate"),ratio:e.info.discountRatio||0},null,8,["tag","ratio"])])]),t("div",cs,[(w=C.value)!=null&&w.sort?(o(),B(Ut,{key:0,"rank-num":(T=C.value)==null?void 0:T.sort,type:a(J).EBR,"show-help-button":!0,"is-login":a(l).isLogin,onHelp:c[3]||(c[3]=S=>h("handleTo",`/talentRanking/rankingShop?shopId=${e.info.id}`))},null,8,["rank-num","type","is-login"])):v("",!0),ye(x.$slots,"like",{},void 0,!0),g(ut,{type:e.info.buyFlag?1:e.info.watchFlag?2:e.info.followFlag?3:0},null,8,["type"]),e.info.recentExpressSeconds?(o(),B(mt,{key:1,time:e.info.recentExpressSeconds},null,8,["time"])):v("",!0),e.info.metakeyFlag?(o(),B(dt,{key:2})):v("",!0)]),t("div",rs,[e.info.scenery?(o(),r("div",us,[(o(!0),r(te,null,ee(e.info.scenery.split(","),(S,G)=>(o(),r("div",{key:S,class:$e(["flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]",e.info.scenery.split(",").length-1===G?"":"mr-2"]),onClick:M=>O(G)},[t("img",{src:S||a(E)("images/goods/defaultImg.png"),class:"object-cover w-full h-full aspect-square rounded-xl",alt:""},null,8,ms)],10,ds))),128))])):(o(),r("div",fs,[t("div",hs,[t("img",{src:e.info.logo||a(E)("images/goods/defaultImg.png"),class:"w-full h-full aspect-square rounded-xl object-cover"},null,8,ps)])]))]),ye(x.$slots,"default",{},void 0,!0)]),g(Et,{list:e.list,show:a(b),onClose:c[4]||(c[4]=S=>a(q)(!1))},null,8,["list","show"]),a(k)&&e.authorizeInfo?(o(),B(ft,{key:0,show:a(k),info:e.authorizeInfo,onClose:c[5]||(c[5]=S=>a(D)(!1))},null,8,["show","info"])):v("",!0)])}}}),gs=Q(vs,[["__scopeId","data-v-054950fa"]]),ys=""+new URL("../images/plus-DOIrZp3k.png",import.meta.url).href,ws={key:0,class:"bg-white rounded-xl p-3 my-3"},_s={class:"text-base font-semibold"},xs=["onClick"],$s={class:"relative w-[80px] h-[80px] flex-shrink-0 bg-b5 overflow-hidden rounded-lg"},ks={class:"object-cover w-full h-full aspect-square",fit:"cover"},bs={class:"w-full min-h-[80px] flex flex-col justify-between ml-2"},Is={class:"text-b1 font-semibold line-clamp-1"},Ss={class:"text-b3 font-normal line-clamp-1"},Cs={class:"text-b3 font-normal"},Ts={class:"flex justify-between items-center"},Ls={class:"flex-start"},Bs=t("img",{class:"w-4 h-4 mr-1",src:vt},null,-1),Ds={class:"font-semibold mr-1"},Rs=["onClick"],qs=t("img",{src:ys,class:"w-5 h-5"},null,-1),Fs=[qs],zs={key:0},Gs={key:1},Os=H({props:{merchantAddress:null},setup(e,{expose:d}){const h=e,i=ke(),{t:l}=be(),k=Ie(),D=Ze(),b=m([]),q=m(!1),C=m(!1),I=m(0),O=m(10),x=m(0),[c,p]=U(!1),y=()=>{p(!c.value)},w=f=>{k.push(`/goodsDetail?id=${f.id}`)},T=async()=>{q.value=!0,I.value+=1,await M(),q.value=!1},S=ne(()=>{var f;return c.value?b.value:(f=b.value)==null?void 0:f.slice(0,2)}),G=m([]),M=async()=>{const f=await Je({page:I.value,size:O.value,isActivity:1,boutiqueTop:!0,merchantAddress:h.merchantAddress});if(q.value=!1,!f.success){C.value=!0;return}if(!f.data||!f.total){C.value=!0;return}x.value=f.total,G.value=f.data||[],b.value=I.value===1?G.value:b.value.concat(G.value),b.value.length>=x.value&&(C.value=!0)},j=()=>{I.value=0,x.value=0,C.value=!1,b.value=[],T()},le=async f=>{if(f.stock===0&&f.goodsTypes!==2){N(l("order.Insufficient stock"));return}N.loading({duration:0});const P={needlogin:"true",...i.query};k.replace({path:i.path,query:P});const V=await et(f.id);N.clear(),V.success&&(N(l("cart.addTips")),D.getCartCount())};return d({init:j}),(f,P)=>{const V=z("van-icon"),W=z("VanList"),ae=Se("lazy");return C.value&&x.value===0?v("",!0):(o(),r("div",ws,[t("div",_s,u(f.$t("shop.curactive")),1),g(W,{loading:q.value,"onUpdate:loading":P[0]||(P[0]=$=>q.value=$),finished:C.value,"loading-text":f.$t("common.loading"),onLoad:T},{default:F(()=>[(o(!0),r(te,null,ee(a(S),$=>(o(),r("div",{class:"flex mt-3",key:$.id,onClick:Y=>w($)},[t("div",$s,[Ce(t("img",ks,null,512),[[ae,$.icons&&$.icons.split(",")[0]||a(E)("images/goods/defaultImg.png")]]),g(gt,{activity:!0,type:2})]),t("div",bs,[t("section",null,[t("div",Is,u($.goodsName),1),t("div",Ss,u($==null?void 0:$.goodsDesc),1),t("div",Cs,u(f.$t("mall.15th sale",{salesVolume:$.volume15})),1)]),t("div",Ts,[t("div",Ls,[Bs,t("span",Ds,u($.price),1),g(Le,{tag:f.$t("common.rebate"),ratio:$.discountRatio||0},null,8,["tag","ratio"])]),t("div",{onClick:K(Y=>le($),["stop"])},Fs,8,Rs)])])],8,xs))),128)),b.value.length>2?(o(),r("div",{key:0,onClick:y,class:"text-xs text-b3 font-normal text-center mt-3.5"},[a(S).length==2?(o(),r("div",zs,[A(u(f.$t("shop.chakanhuodongshsangpin"))+" ",1),g(V,{name:"arrow-down"})])):(o(),r("div",Gs,[A(u(f.$t("refund.put way"))+" ",1),g(V,{name:"arrow-up"})]))])):v("",!0)]),_:1},8,["loading","finished","loading-text"])]))}}}),js={class:"bg-white rounded-xl my-3 py-3"},As={class:"flex-center-bw px-3"},Hs={class:"text-base font-semibold"},Ms={class:"pl-3 pt-3"},Es=["onClick"],Ns={class:"object-cover w-full h-full aspect-square",fit:"cover"},Ps=H({props:{boutiqueGoods:null,title:null,type:null},emits:["toMore","toDetail"],setup(e,{emit:d}){const h=e,i=()=>{d("toMore",h.type)};return(l,k)=>{const D=z("van-icon"),b=z("van-swipe-item"),q=z("van-swipe"),C=Se("lazy");return o(),r("div",js,[t("div",As,[t("div",Hs,u(e.title),1),t("div",{class:"text-xs text-b3 whitespace-nowrap",onClick:i},[A(u(l.$t("common.check more")),1),g(D,{name:"arrow"})])]),t("div",Ms,[g(q,{class:"flex-start",loop:!1,width:126,"show-indicators":!1},{default:F(()=>[(o(!0),r(te,null,ee(e.boutiqueGoods,(I,O)=>(o(),B(b,{class:"flex",key:I.id},{default:F(()=>[t("div",{class:$e(["flex-1 w-full",{"mr-4":O<e.boutiqueGoods.length-1}])},[t("div",{onClick:()=>d("toDetail",I),class:"relative w-[110px] h-[110px] flex-shrink-0 bg-black-100 overflow-hidden rounded-lg"},[Ce(t("img",Ns,null,512),[[C,I&&I.goods&&I.goods.icons&&I.goods.icons.split(",")[0]||a(E)("images/goods/defaultImg.png")]])],8,Es)],2)]),_:2},1024))),128))]),_:1})])])}}}),ue=Q(Ps,[["__scopeId","data-v-9f70f930"]]),Vs=""+new URL("../images/shop-zan-CIPmIHxz.svg",import.meta.url).href,Us={class:"bg-[#FFF1D6] rounded-2xl text-xs py-0.5 px-1.5 flex items-center gap-x-1 min-w-fit"},Ks=t("img",{src:Vs,class:"w-[14px] h-[14px]"},null,-1),Xs=H({props:{likeFlag:{type:Boolean,default:!0},likeCount:{default:0},isLogin:{type:Boolean,default:!1}},emits:["onLike"],setup(e){return(d,h)=>(o(),r("div",Us,[Ks,t("span",null,u(e.likeCount),1),!e.likeFlag&&e.isLogin?(o(),r("span",{key:0,onClick:h[0]||(h[0]=i=>d.$emit("onLike")),class:"text-newOrigin text-xs cursor-pointer text-left"},u(d.$t("shop.like")),1)):v("",!0)]))}}),Qs={class:"flex items-center justify-between text-b3 text-xs mt-3"},Ws={class:"w-[70%] flex items-center"},Ys={key:0,class:"shrink-0"},Zs={class:"w-fit line-clamp-1 truncate"},Js={key:1,class:"shrink-0"},eo={class:"shrink-0 flex items-center whitespace-nowrap ml-3"},to=H({props:{commentReview:null,commentTotal:null},setup(e){const d=e,h=ne(()=>{var i;return!!((i=d.commentReview)!=null&&i.commentContent)});return(i,l)=>{const k=z("van-icon");return o(),r("div",Qs,[t("div",Ws,[a(h)?(o(),r("div",Ys,"“")):v("",!0),t("div",Zs,u(e.commentReview.commentContent),1),a(h)?(o(),r("div",Js,"”")):v("",!0)]),t("div",eo,[t("span",null,u(i.$t("offline.shop_evaluate_num",{num:e.commentTotal||0})),1),g(k,{name:"arrow",class:"text-xxs text-[#666] ml-1"})])])}}}),Be=e=>(se("data-v-2bfae1a2"),e=e(),oe(),e),so={class:"w-full h-[190px] overflow-hidden"},oo=["src"],no={key:0,class:"absolute left-0 w-full px-3 flex-center-bw top-3"},lo={class:"ml-1 text-sm"},ao={class:"mt-[-45px]"},io={class:"border-4 rounded-2xl border-solid border-[#FFF] drop-shadow-lg w-[90px] h-[90px] bg-[#D9D9D9] m-auto"},co=["src"],ro={class:"text-[#2E2008] font-medium text-lg text-center mt-5"},uo={class:"flex items-center justify-between px-5 pt-10 pb-5"},mo={class:"flex items-center"},fo={class:"border border-solid border-[#D9D9D9] p-1"},ho={class:"text-[#2E2008] opacity-80 ml-3"},po=Be(()=>t("br",null,null,-1)),vo=Be(()=>t("img",{src:wt,class:"w-[60px] h-[60px] object-contain"},null,-1)),go=H({props:{show:{type:Boolean},shopInfo:null},emits:["close","onSuceess"],setup(e,{emit:d}){const{shopInfo:h,show:i}=e,{width:l,height:k}=He(),D=m(null),b=m(100);Me(D,y=>{const w=y[0],{height:T}=w.contentRect;b.value=T||100});const q=ne(()=>window.location.origin+"/#/category?deliveryType=1&init=1&shopId="+h.id),{loadingToggle:C}=Te(),[I,O]=U(!1),x=()=>{d("close")},c=()=>{O(!0),C(!0),document.getElementById("saveHtml")?setTimeout(()=>{p()},200):setTimeout(()=>{p()},3e3)},p=async()=>{let y=document.getElementById("saveHtml");y.style.display="block";const w=await _t(y);await xt(w)&&(y.style.display="none",$t(w,h.storeName||""),x(),y.style.display="block",O(!1),C(!1),d("onSuceess"))};return(y,w)=>{const T=z("van-icon"),S=z("VanButton"),G=z("van-popup");return o(),B(G,{show:e.show,"onUpdate:show":w[1]||(w[1]=M=>Pe(i)?i.value=M:null),onClickOverlay:x,class:"w-full h-full bg-default/20",style:Ne({paddingLeft:`${(a(l)-300)/2}px`,paddingTop:`${(a(k)-b.value)/2}px`}),onClick:x},{default:F(()=>[t("div",{class:"w-[300px] rounded-lg overflow-hidden",onClick:w[0]||(w[0]=K(()=>{},["stop"]))},[t("div",{class:"w-[300px] relative bg-white",id:"saveHtml",ref:(M,j)=>{j.saveHtml=M,D.value=M}},[t("div",so,[t("img",{src:(e.shopInfo.shareImg||e.shopInfo.scenery||a(E)("images/shop/shop_bg.png"))+"?"+new Date().getTime(),class:"object-cover w-full",alt:"",crossOrigin:"anonymous"},null,8,oo)]),a(I)?v("",!0):(o(),r("div",no,[g(S,{class:"text-sm h-[30px] min-w-[65px] rounded-2xl text-white share-btn",onClick:c},{default:F(()=>[g(T,{name:"back-top",class:"rotate-180",size:"18"}),t("span",lo,u(y.$t("common.save")),1)]),_:1}),t("div",{class:"share-btn w-[30px] h-[30px] rounded-full flex justify-center items-center text-white text-lg",onClick:x},[g(T,{name:"cross"})])])),t("div",ao,[t("div",io,[t("img",{src:(e.shopInfo.logo||a(E)("images/goods/defaultImg.png"))+"?"+new Date().getTime(),class:"h-[82px] aspect-square rounded-xl object-fill",crossOrigin:"anonymous"},null,8,co)]),t("div",ro,u(e.shopInfo.storeName||"-"),1),t("div",uo,[t("div",mo,[t("div",fo,[g(Ee,{value:a(q),size:60,level:"H"},null,8,["value"])]),t("div",ho,[A(u(y.$t("common.new found")),1),po,A(u(y.$t("common.share you")),1)])]),vo])])],512)])]),_:1},8,["show","style"])}}}),yo=Q(go,[["__scopeId","data-v-2bfae1a2"]]),De=e=>(se("data-v-1a226120"),e=e(),oe(),e),wo={class:"flex items-center gap-4"},_o=De(()=>t("img",{class:"w-5 h-5",src:Tt},null,-1)),xo=[_o],$o={key:0,class:"w-5 h-5",src:Lt},ko={key:1,class:"w-5 h-5",src:Bt},bo=De(()=>t("img",{class:"w-5 h-5",src:Dt},null,-1)),Io=[bo],So={key:0,class:"px-3 safe-body overflow-y-scroll"},Co={class:"px-2.5"},To=H({name:"Shop"});function Lo(e){const{orderGoodsStore:d}=de(),{t:h}=be(),{loadingToggle:i}=Te(),l=m({}),k=ke(),D=Ie(),b=m(null),{login:q}=tt(),[C,I]=U(!1),[O,x]=U(!1),c=m(),p=ne(()=>k.query.shopId),y=()=>{var s,n;(s=l.value)!=null&&s.merchant&&j(`/shopInfo?address=${(n=l.value)==null?void 0:n.merchant}`)},w=s=>{s===2?D.push(`category?shopId=${+p.value}&deliveryType=1`):s===3?D.push(`category?shopId=${+p.value}&deliveryType=2`):D.push(`boutique-goods?shopId=${+p.value}`)},T=m(null),S=m(null);we(p,async s=>{var n,L;s&&s!==S.value&&(i(!0),S.value=s,b.value&&(b.value.list=[]),await fe(),b.value&&b.value.resetData(),c.value&&((n=c.value)==null||n.getMyRanking()),T.value&&((L=T.value)==null||L.init()),i(!1))});const G=m(null),M=async()=>{const s=await rt(l.value.merchant);s.success&&s.data&&(G.value=s.data)},j=s=>{D.push(s)},le=async()=>{const s=await at(p.value);!s.success||!s.data||(l.value=s.data,await Ue(),Fe())},f=async s=>{i(!0);const{success:n}=await nt({shopIds:[s.id],type:s.isFollow?2:1});i(!1),n&&(s.isFollow=!s.isFollow,s.isFollow?N({message:"收藏成功",icon:re("toast-success.svg"),duration:3e3}):N({message:"取消收藏",icon:re("toast-success.svg"),duration:3e3}))},P=()=>{N({message:h("common.Saved successfully"),icon:re("toast-success.svg"),duration:3e3})},V=()=>{d.changeOfflineInfo({shop:l.value});const s={key:p.value,orderType:St.STORE};D.push({path:"/offlineSubmit",query:s})},W=m([]),ae=async()=>{var n,L,R;if(!((n=l.value)!=null&&n.type))return;const s=await _e({merchant:(L=l.value)==null?void 0:L.merchant,status:1,page:1,size:12,type:(R=l.value)==null?void 0:R.type,sortType:3,orderBy:1});s.success&&(W.value=s.data)},$=m(null),Y=async()=>{var n;$.value=[];const s=await _e({merchant:(n=l.value)==null?void 0:n.merchant,status:1,page:1,size:12,deliveryType:1});s.success&&($.value=s.data)},ie=m([]),Re=async()=>{if(!p.value)return;$.value=[];const{success:s,data:n}=await it({shopId:Number(p.value),goodsStatus:Ct.Published,page:1,size:12,sortBy:"desc|goods_sales_volume",distinctFlag:!0});s&&(ie.value=(n.records||[]).map(L=>({...L,goods:{icons:(L==null?void 0:L.goodsIcons)||""}})))},me=m([]),qe=async()=>{const{success:s,data:n}=await ct({page:1,size:10,shopId:k.query.shopId});s&&(me.value=n&&n[0].guaranteeList||[])},fe=async()=>{await le(),ae(),Y(),Re(),qe(),M()},he=m(null),Fe=()=>{he.value&&he.value.addEventListener("scroll",Ge)},ze=m(1),pe=m([]),Ge=s=>{const{scrollTop:n}=s.target,{length:L}=pe.value;for(let R=0;R<L;R++)if(n<pe.value[R].offsetTop){ze.value=R+1;break}},{accountStore:ve}=de(),Oe=async()=>{if(!ve.isLogin)return x(!0);l.value.likeFlag||(lt({shopId:p.value}),l.value.likeCount++,l.value.likeFlag=!0)};we(()=>{var s;return(s=l.value)==null?void 0:s.merchant},async s=>{s&&await Y()});const ge=m(0),Z=m(null),je=async()=>{var L,R,X,_;const s={page:1,size:1,shopId:p.value,sortBy:"desc|comment_time",havePicsFlag:null,commentStatus:1},n=await ot(s);n.success?(L=n.data)!=null&&L.records&&((R=n.data)==null?void 0:R.records.length)>0&&(Z.value=(X=n.data)==null?void 0:X.records[0],ge.value=((_=n.data)==null?void 0:_.total)||0):Z.value=null};return xe(async()=>{i(!0),await fe(),await je(),i(!1)}),Ve(()=>{$.value=[]}),(s,n)=>{const L=z("VanButton");return o(),B(yt,{class:"h-full font-Puhui font-normal safe-bottom-page relative",style:{background:"linear-gradient(180deg, #fed73a 0%, #f2f0ef 50%)"},title:s.$t("shop.Shop Details"),themeVars:{navBarBackgroundColor:"transparent"}},{right:F(()=>[t("div",wo,[t("div",{onClick:y},xo),t("div",{onClick:n[0]||(n[0]=R=>f(l.value))},[l.value.isFollow?(o(),r("img",ko)):(o(),r("img",$o))]),t("div",{onClick:n[1]||(n[1]=K(R=>a(I)(!0),["stop"]))},Io)])]),default:F(()=>{var R,X;return[l.value&&Object.keys(l.value).length!==0&&l.value.status==1?(o(),r("div",So,[l.value&&Object.keys(l.value).length!==0?(o(),B(gs,{key:0,ref:(_,ce)=>{ce.shopHeader=_,c.value=_},info:l.value,list:me.value,authorizeInfo:G.value,onHandleTo:n[3]||(n[3]=_=>j(_)),onFollowShop:f,class:"bg-white rounded-xl"},{like:F(()=>{var _;return[g(Xs,{"like-flag":l.value.likeFlag,"like-count":(_=l.value)==null?void 0:_.likeCount,"is-login":a(ve).isLogin,onOnLike:Oe},null,8,["like-flag","like-count","is-login"])]}),default:F(()=>[t("div",Co,[g(L,{round:"",class:"w-full text-b1 h-[46px] px-[1.125rem] bg-yellow text-base font-semibold mt-3",onClick:V},{default:F(()=>[A(u(s.$t("common.payBill")),1)]),_:1}),Z.value?(o(),B(to,{key:0,commentTotal:+ge.value,commentReview:Z.value,onClick:n[2]||(n[2]=K(_=>j("/offline-evaluate-home?shopId="+a(p)),["stop"]))},null,8,["commentTotal","commentReview"])):v("",!0)])]),_:1},8,["info","list","authorizeInfo"])):v("",!0),g(Os,{ref:(_,ce)=>{ce.shopActivity=_,T.value=_},merchantAddress:(R=l.value)==null?void 0:R.merchant},null,8,["merchantAddress"]),l.value.type?(o(),B(ue,{key:1,boutiqueGoods:W.value,title:s.$t("shop.Main Store")+a(It)(l.value.type),onToMore:w,onToDetail:n[4]||(n[4]=_=>j(`/goodsDetail?id=${_.goods.id}`))},null,8,["boutiqueGoods","title"])):v("",!0),g(ue,{boutiqueGoods:$.value,type:2,onToMore:w,title:s.$t("shop.our_products"),onToDetail:n[5]||(n[5]=_=>j(`/goodsDetail?id=${_.goods.id}`))},null,8,["boutiqueGoods","title"]),(ie.value||[]).length?(o(),B(ue,{key:2,boutiqueGoods:ie.value,type:3,onToMore:w,title:s.$t("shop.offline_services"),onToDetail:n[6]||(n[6]=_=>j(`/offlineGoodsDetail?goodsId=${_.goodsId}`))},null,8,["boutiqueGoods","title"])):v("",!0)])):l.value&&Object.keys(l.value).length!==0?(o(),B(bt,{key:1,type:"shop"})):v("",!0),a(C)?(o(),B(yo,{key:2,show:a(C),shopInfo:l.value,onClose:n[7]||(n[7]=_=>a(I)(!1)),onOnSuceess:P},null,8,["show","shopInfo"])):v("",!0),a(p)?(o(),B(kt,{key:3,shopId:+a(p),shopType:(X=l.value)==null?void 0:X.type},null,8,["shopId","shopType"])):v("",!0),a(O)?(o(),B(st,{key:4,onLogin:a(q)},null,8,["onLogin"])):v("",!0)]}),_:1},8,["title"])}}const Bo=H({...To,setup:Lo}),sn=Q(Bo,[["__scopeId","data-v-1a226120"]]);export{sn as default};
