import{_ as D}from"./MCOIN-Bodfn-v1.js";import{_ as V,y as A,r as l,D as P,F as n,G as o,O as w,N as f,E as g,l as z,I as B,J as F,K as b,H as s,Q as i,P as T,a0 as N,Y as j,Z as E}from"./vendor-Ba70TIw4.js";import{P as G}from"./flashSale-DDyqLyYN.js";import{l as O}from"./order-Bt6BXfCD.js";import{f as M,e as H,d as J}from"./useRefund-Dpqhghzq.js";import{R as K}from"./RefundGoodItem-CvKBnn3F.js";import{C as Q}from"./CommonVanProvider-CqQk6UpZ.js";import"./index-Bsb9uxb4.js";import"./avatarRing-CLGxkH-F.js";import"./GoodsItem-DbDIwpYs.js";import"./credit-EZuPIBEN.js";import"./mcoin-logo-1-Deho8IWN.js";import"./useShipTemplate-CJrw2UwP.js";import"./enums-DlE-aiss.js";import"./useOrderStatus-eiwKm5Dv.js";import"./BackIcon-DkqwcD_b.js";const U=u=>(j("data-v-1a120c26"),u=u(),E(),u),Y={class:"refund-list-wrapper h-full"},Z={class:"mt-3 w-full"},q={class:"mb-3 flex items-center justify-between text-sm text-b3 font-normal"},W={class:""},X={class:"text-sm whitespace-nowrap text-b1"},ee={class:"flex items-center justify-between text-sm text-b3 font-normal relative z-0"},te={class:""},se={class:"text-sm text-b1 font-normal"},oe={key:0},ae={key:0,class:"flex items-center ml-2"},ne={key:1,class:"flex items-center ml-2"},ie={key:1,class:"ml-2"},le={key:1,class:"flex justify-end whitespace-nowrap"},re={class:"text-[#FF8812] font-normal"},ce={class:"ml-1 flex items-center"},ue=U(()=>s("img",{src:D,class:"w-4 h-4 mr-1"},null,-1)),me={class:"font-semibold text-b1"},de={key:2},pe=A({setup(u){const k=z(),_=l([]),m=l([]),r=l(!1),d=l(!1),h=l(0),S=l(10),x=l(0),R=async()=>{r.value=!0,h.value+=1,await L(),r.value=!1},L=async()=>{const e=await O({page:h.value,size:S.value,status:-1,type:2,refundStatus:99,tab:2});if(r.value=!1,!e.success){d.value=!0;return}if(!e.data||!e.total){d.value=!0;return}x.value=e.total,_.value=e.data.map(a=>{if(a.refundStatus===1){const v=new Date(a.systemTime).getTime(),y=new Date(a.autoRefundTime).getTime()-v;return{...a,cutDownTimestamp:y}}else return a}),m.value=h.value===1?_.value:m.value.concat(_.value),m.value.length>=x.value&&(d.value=!0)},C=e=>J(e,!0),I=e=>{k.push(e)};return P(()=>{R()}),(e,a)=>{const v=g("van-count-down"),$=g("VanList"),y=g("router-view");return o(),n("div",Y,[w(Q,{title:e.$t("order.refund title"),class:"bg-gray1 font-Puhui font-normal relative px-3 z-10","theme-vars":{"field-placeholder-text-color":"#A6A6A6"},ref:(t,c)=>{c.shopGoodsRef=t}},{default:f(()=>[w($,{loading:r.value,"onUpdate:loading":a[0]||(a[0]=t=>r.value=t),finished:d.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:R},{default:f(()=>[(o(!0),n(B,null,F(m.value,t=>(o(),b(K,{payType:t.payType,key:t.id,"fm-stored-card":t.fmStoredCard,onClick:c=>I(`/refundDetail?id=${t.id}`),order:t,class:"mt-3"},{default:f(()=>{var c;return[s("div",Z,[s("div",q,[s("p",W,i(e.$t("refund.reason title")),1),s("p",null,[s("span",X,i(C(t)||" -- "),1)])]),s("div",ee,[s("p",te,i(e.$t("refund.progress title")),1),s("p",se,[((c=t.refundInfo)==null?void 0:c.refundStatus)==1?(o(),n("span",oe,[t.payType!==T(G).STORE_CARD?(o(),n("span",ae,[t.cutDownTimestamp>0?(o(),b(v,{key:0,time:t.cutDownTimestamp},{default:f(p=>[N(i(e.$t("common.shop will",{time:p.days+e.$t("common.days")+p.hours+e.$t("common.hours")+p.minutes+e.$t("common.minutes")+p.seconds+e.$t("common.seconds")})),1)]),_:2},1032,["time"])):(o(),n("span",ne,i(e.$t("refund.not delivered the goods")),1))])):(o(),n("span",ie,i(e.$t("order.status4")),1))])):T(M)(t)?(o(),n("span",le,[s("span",re,i(T(H)(t)),1),s("span",ce,[ue,s("span",me,i(t.totalAmount),1)])])):(o(),n("span",de," -- "))])])])]}),_:2},1032,["payType","fm-stored-card","onClick","order"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:1},8,["title"]),w(y,{class:"child-view"})])}}}),Ie=V(pe,[["__scopeId","data-v-1a120c26"]]);export{Ie as default};
