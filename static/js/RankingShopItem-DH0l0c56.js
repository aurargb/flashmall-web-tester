import{y as x,r as u,z as b,K as P,F as f,G as c,E as V,O as k,_ as L,H as i,Q as h,R as j,P as C,X as $,I as H,a3 as N,a4 as T}from"./vendor-BlU_hoYl.js";import{L as F}from"./Lottie_v2-CXH4aUEt.js";import{g as M,b as A}from"./index-Clz0Qna-.js";const E=""+new URL("../images/rank-vote-BOp99hG1.svg",import.meta.url).href,O={key:1,src:E,class:"w-5 h-5"},z=x({props:{direction:null},emits:["completePlay"],setup(e,{emit:a}){const s=e,n=u(null),t=u(null),m=()=>{t.value=n.value.getLottieAnimation(),t.value.setSpeed(+s.direction==200?.5:1),t.value.play()},r=()=>{t.value.destroy(),a("completePlay")};return b(()=>s==null?void 0:s.direction,o=>{o&&setTimeout(()=>{m()},300)},{immediate:!0,deep:!0}),(o,d)=>e.direction?(c(),P(F,{key:0,class:"w-5 h-5",path:+e.direction==200?"lottie/greenLight.json":"lottie/redLight.json",ref:(l,v)=>{v.lottieRef=l,n.value=l},renderer:"svg",autoplay:!0,loop:!1,onComplete:r},null,8,["path"])):(c(),f("img",O))}}),G={class:"text-[#4D2E0F] text-right text-[22px] font-BebasNeue"},K=x({props:{score:null},setup(e){const a=e,s=u(null),n=u(Math.floor(a.score||0)),t=u(null);return b(()=>a==null?void 0:a.score,(m,r)=>{t.value=Math.floor(m),n.value=Math.floor(r),setTimeout(()=>{var o;(o=s.value)==null||o.start()},150)},{immediate:!1,deep:!0}),(m,r)=>{const o=V("count-to");return c(),f("div",G,[k(o,{startVal:n.value,endVal:t.value,duration:2e3,autoplay:!1,ref:(d,l)=>{l.countToRef=d,s.value=d}},null,8,["startVal","endVal"])])}}}),Q={class:"py-3 pl-2 pr-4 flex items-center gap-x-2"},U={class:"flex-col text-left flex-1"},X={class:"text-[#7D3619] line-clamp-1"},q={class:"text-xs text-b3 mt-0.5"},J={class:"flex items-center justify-center gap-x-2"},W={class:"text-[#7D3619]"},Y=x({props:{rankItem:null,showTip:{type:Boolean},noRank:{type:Boolean},hideScore:{type:Boolean},showPower:{type:Boolean}},emits:["voteShop","toDetail"],setup(e,{emit:a}){const{rankItem:s}=e;return(n,t)=>{var r,o,d,l,v,p,g,y,I,w,B,R,S;const m=V("van-image");return c(),f("div",Q,[i("div",{class:j(["w-8 h-4 font-bold text-base text-center text-[#995C1F] index-number",{up:((r=e.rankItem)==null?void 0:r.preHeat)&&+((o=e.rankItem)==null?void 0:o.sort)<+((d=e.rankItem)==null?void 0:d.preHeat),down:((l=e.rankItem)==null?void 0:l.preHeat)&&+((v=e.rankItem)==null?void 0:v.sort)>+((p=e.rankItem)==null?void 0:p.preHeat)}])},h(+((g=e.rankItem)==null?void 0:g.sort)||"-"),3),i("div",{class:"flex-1 flex items-center",onClick:t[0]||(t[0]=D=>a("toDetail"))},[k(m,{round:"",fit:"cover",src:(((y=e.rankItem)==null?void 0:y.avatar)||((I=e.rankItem)==null?void 0:I.logo)||"").split()[0]||C(M)("images/avatarRing.png"),class:"w-[40px] h-[40px] mr-2 rounded-full object-cover"},null,8,["src"]),i("div",U,[i("div",X,h(((w=e.rankItem)==null?void 0:w.storeName)||"-"),1),i("div",q,h(C(A)((B=e.rankItem)==null?void 0:B.shopAddress,"***",0,4)),1)])]),i("div",J,[e.hideScore?$("",!0):(c(),P(K,{key:0,score:(R=e.rankItem)==null?void 0:R.score},null,8,["score"])),e.showPower?(c(),f(H,{key:1},[n.$slots.right?N(n.$slots,"right",{key:0},void 0,!0):(c(),f("div",{key:1,class:"text-xs flex items-center min-w-fit",onClick:t[2]||(t[2]=T(D=>a("voteShop"),["stop"]))},[k(z,{direction:(S=e.rankItem)==null?void 0:S.direction,onCompletePlay:t[1]||(t[1]=()=>{e.rankItem.direction=null})},null,8,["direction"]),i("span",W,h(n.$t("ranking.power")),1)]))],64)):$("",!0)])])}}}),te=L(Y,[["__scopeId","data-v-66e7a4fc"]]);export{te as R,K as _,z as a};
