import{y as ce,r as C,x as se,z as ae,E as S,K as L,G as m,N as g,H as s,Q as c,O as b,a4 as W,F as N,J as me,a2 as k,R as U,P as n,I as he,n as ue,bf as fe,D as Te,a0 as X,_ as uo,w as co,a1 as go,l as po,be as oe,bG as ke,bF as Ne,Y as vo,Z as fo,T as te,bs as Ve}from"./vendor-Ba70TIw4.js";import{C as mo}from"./CommonVanProvider-CqQk6UpZ.js";import{_ as ho}from"./search-C4fLtTfY.js";import{_ as Oe}from"./checked-C8-rw1H8.js";import{_ as bo}from"./BrandSelectPop-BrimLQ8Y.js";import{e as qe,ap as _o,aT as ze,u as xo,r as yo,W as pe,_ as Io,T as wo,Y as $o,a8 as Fe,a9 as Be,a3 as De,q as Pe,aM as Co,bK as Ee}from"./index-DiRx6UeW.js";import{u as Ae}from"./upload-JfLMTiM0.js";import{i as Re,c as Le}from"./offlineGoods-DvT2Go6q.js";import{S as ve}from"./shop-CeqcS6K2.js";import"./BackIcon-DkqwcD_b.js";const So={class:"w-full py-4 pl-4 pr-2 bg-b6 rounded-[10px] overflow-hidden font-Puhui"},ko={class:"text-center felx-1 relative mr-2"},No={class:"text-base font-bold"},Vo={class:"absolute right-0 top-0 pl-2"},Fo={class:"flex-1 bg-b5 rounded-3xl mr-2 mt-4 mb-2"},Bo=s("div",null,[s("img",{src:ho,class:"w-4 h-4"})],-1),Do={class:"categoryList pr-2 mr-2 overflow-y-auto"},Po=["id","onClick"],Eo=["innerHTML"],Ao={key:0,class:"w-4 h-4",src:Oe,alt:""},Ro=ce({props:{list:null,id:null,level:null},emits:["close","select"],setup(D,{emit:p}){const E=D,G=C(!0),P=C(""),M=se(()=>{if(!P.value.trim())return E.list;const i=A(P.value),f=new RegExp(`(${i})`,"gi");return E.list.filter(y=>y.goodsCategoryName.match(f))}),_=i=>{if(!P.value.trim())return i;const f=A(P.value),y=new RegExp(`(${f})`,"gi");return i.replace(y,'<span class="highlight">$1</span>')},A=i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),e=i=>{p("select",i.goodsCategoryId,i.goodsCategoryName),p("close")},j=i=>{const f=document.getElementById(i);f&&f.scrollIntoView({behavior:"smooth"})};return ae(()=>E.id,async i=>{i&&(await ue(),j(i))},{immediate:!0,deep:!0}),(i,f)=>{const y=S("van-icon"),V=S("VanField"),H=S("VanPopup");return m(),L(H,{teleport:"body",show:G.value,position:"bottom",round:"","close-on-click-overlay":!1,onClickOverlay:f[2]||(f[2]=x=>i.$emit("close")),"overlay-class":"categoryOverlay",class:"sm:w-[375px] sm:left-[50%] sm:translate-x-[-50%]",style:{"min-height":"50%","border-radius":"16px 16px 0 0"}},{default:g(()=>[s("div",So,[s("header",ko,[s("div",No,c([i.$t("offline.one_category"),i.$t("offline.two_category"),i.$t("offline.three_category")][(D.level||1)-1])+" （"+c((D.list||[]).length)+"） ",1),s("div",Vo,[b(y,{name:"cross",size:"20",onClick:f[0]||(f[0]=W(()=>{p("close")},["stop"]))})])]),s("div",Fo,[b(V,{modelValue:P.value,"onUpdate:modelValue":f[1]||(f[1]=x=>P.value=x),placeholder:i.$t("mall.Enter search keywords"),class:"w-[100% - 20px] text-center bg-transparent items-center",clearable:""},{"left-icon":g(()=>[Bo]),_:1},8,["modelValue","placeholder"])]),s("div",Do,[(m(!0),N(he,null,me(n(M),x=>(m(),N("div",{key:x.goodsCategoryId,id:x.goodsCategoryId,class:"flex flex-1 justify-between py-4 border-b border-b-b4 last:border-none",onClick:K=>e(x)},[s("span",{class:U({"text-newOrigin":x.goodsCategoryId===D.id}),innerHTML:_(x.goodsCategoryName)},null,10,Eo),x.goodsCategoryId===D.id?(m(),N("img",Ao)):k("",!0)],8,Po))),128))])])]),_:1},8,["show"])}}}),Lo={class:"w-full py-4 p-3 bg-b6 rounded-[10px] overflow-hidden font-Puhui"},To={class:"text-center felx-1 relative mx-1"},Oo={class:"text-base font-bold"},qo={class:"absolute right-0 top-0 pl-2"},zo={class:"rounded-[10px] bg-[#F5F5F5] h-[56px] w-full mt-4"},Uo={class:"flex items-center justify-start w-full h-full p-3"},Go={class:"w-8 h-8 rounded-[4px] bg-[#D9D9D9]"},Mo={class:"ml-2"},jo={class:"text-base font-semibold text-b1 line-clamp-1 flex-shrink-0"},Ho={class:"flex-1 flex items-center gap-1 text-sm"},Ko={class:"flex-1"},Yo={class:"text-b3 flex items-center gap-x-1"},Jo={class:"line-clamp-1"},Qo={key:0,class:"w-4 h-4",src:Oe,alt:""},Wo={class:"flex items-center gap-x-3 pt-4"},Xo=X(" 全分店（含增补） "),Zo={key:0},et=ce({props:{rootName:null,rootId:null,ids:null},emits:["close","select","changeBrand","getAll"],setup(D,{emit:p}){var le;const E=D,{cityMapStore:G}=qe(),P=C(""),M=C(!0),_=fe({total:0,loading:!1,finished:!1,list:[]}),A=fe({page:0,size:20,storeBrandId:E.rootId,overseasFlag:((le=G.currentActiveCity)==null?void 0:le.overseasFlag)||!1,storeNameLike:void 0}),e=C([]),j=C(null),i=se(()=>{var a,u;return(a=_.list)!=null&&a.length?((u=_.list)==null?void 0:u.length)===e.value.length:!1});ae(()=>E.rootName,async a=>{a&&(await ue(),f())},{immediate:!0,deep:!0});const f=async()=>{const{success:a,data:u}=await ze({page:1,size:1,storeBrandNameLike:E.rootName,showNotHaveStoresFlag:!0});if(a){const I=u.records.find(T=>T.storeBrandId===E.rootId);I&&I.storeBrandIcon?P.value=I.storeBrandIcon.split(",")[0]||"":P.value=""}},y=()=>{p("select",e.value,_.list.filter(a=>e.value.includes(a.storeId)).map(a=>a.storeName)),p("close")},V=()=>{p("getAll"),p("close")},H=()=>{p("changeBrand")},x=a=>{const u=document.getElementById(a);u&&u.scrollIntoView({behavior:"smooth"})};ae(()=>E.ids,async a=>{a!=null&&a.length&&(e.value=a,await ue(),x(a[0]))},{immediate:!0,deep:!0});const K=async()=>{_.loading=!0,A.page+=1,await l(),_.loading=!1},l=async()=>{A.storeBrandId=E.rootId;const{success:a,data:u}=await _o(A),{records:I,total:T,current:O,pages:q}=u;if(!a){_.finished=!0;return}if(!T||!I||!(I!=null&&I.length)){_.finished=!0;return}_.total=T,_.list=A.page===1?I:_.list.concat(I),i.value&&(e.value=_.list.map(Y=>Y.storeId)),+O>=+q&&(_.finished=!0)},Z=a=>{let u="";return a.storeAddress?(a.areaExtName3&&a.storeAddress.indexOf(a.areaExtName3)>-1?u=a.storeAddress:u=`${a.areaExtName3}${a.storeAddress}`,a.areaExtName2&&a.storeAddress.indexOf(a.areaExtName2)>-1?u=u:u=`${a.areaExtName2}${u}`,a.areaExtName1&&a.storeAddress.indexOf(a.areaExtName1)>-1?u=u:u=`${a.areaExtName1}${u}`,u||""):(u=`${a.areaExtName3||""}${a.areaExtName2||""}${a.areaExtName1||""}${a.storeName||""}`,u)};return Te(()=>{K()}),(a,u)=>{const I=S("van-icon"),T=S("VanImage"),O=S("van-checkbox"),q=S("van-checkbox-group"),Y=S("VanList"),ne=S("VanButton"),J=S("VanPopup");return m(),L(J,{teleport:"body",show:M.value,position:"bottom",round:"","close-on-click-overlay":!1,onClickOverlay:u[3]||(u[3]=$=>a.$emit("close")),"overlay-class":"categoryOverlay",class:"sm:w-[375px] sm:left-[50%] sm:translate-x-[-50%]",style:{"min-height":"50%","border-radius":"16px 16px 0 0"}},{default:g(()=>[s("div",Lo,[s("header",To,[s("div",Oo,c(a.$t("offline.select_branch_store")),1),s("div",qo,[b(I,{name:"cross",size:"20",onClick:u[0]||(u[0]=W(()=>{p("close")},["stop"]))})])]),s("section",zo,[s("div",Uo,[s("div",Go,[b(T,{src:P.value||"",radius:"4px",width:"32px",height:"32px",fit:"cover"},null,8,["src"])]),s("div",Mo,[s("span",jo,c(D.rootName),1)]),s("div",{class:"ml-auto pl-1 flex-shrink-0"},[s("span",{class:"text-[#FF8812] text-sm font-normal",onClick:H}," 更换品牌 ")])])]),b(Y,{loading:n(_).loading,"onUpdate:loading":u[2]||(u[2]=$=>n(_).loading=$),finished:n(_).finished,"immediate-check":!1,"loading-text":a.$t("common.loading"),onLoad:K,class:"shopList h-[calc(100vh-230px)] mx-1 overflow-y-auto"},{default:g(()=>[b(q,{modelValue:e.value,"onUpdate:modelValue":u[1]||(u[1]=$=>e.value=$),ref:($,Q)=>{Q.checkboxGroup=$,j.value=$}},{default:g(()=>[(m(!0),N(he,null,me(n(_).list,$=>(m(),L(O,{key:$.storeId,name:$.storeId,id:$,"label-position":"left",class:"flex flex-1 justify-between py-4 border-b border-b-b4 last:border-none"},{icon:g(Q=>[Q.checked?(m(),N("img",Qo)):k("",!0)]),default:g(()=>[s("div",Ho,[s("div",Ko,[s("div",{class:U([{"text-newOrigin font-semibold":e.value.includes($.storeId)},"line-clamp-1"])},c($.storeName),3),s("div",Yo,[s("span",Jo,c(Z($)),1)])])])]),_:2},1032,["name","id"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["loading","finished","loading-text"]),s("div",Wo,[b(ne,{class:"submit-btn flex-1 bg-white text-b1 text-base font-normal border border-solid border-b4 h-[46px]",round:"",onClick:V},{default:g(()=>[Xo]),_:1}),b(ne,{class:"submit-btn flex-1 bg-yellow text-b1 text-base font-semibold border-none h-[46px]",round:"",onClick:y},{default:g(()=>[X(c(a.$t("common.ConfirmSelection")),1),e.value.length?(m(),N("span",Zo,"("+c(e.value.length)+")",1)):k("",!0)]),_:1})])])]),_:1},8,["show"])}}}),be=D=>(vo("data-v-5bc739d2"),D=D(),fo(),D),ot={class:"bg-white rounded-xl overflow-hidden mx-3 px-3 py-4 title"},tt={class:"text-b1 font-semibold"},st={class:"border-b4 border-b border-solid pb-4 van-uploader__wrapper gap-1.5"},at=["onClick"],lt={class:"van-image van-uploader__preview-image",style:{width:"60px",height:"60px"}},nt=["src"],dt=["onClick"],rt=be(()=>s("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)),it=[rt],ut={class:"w-[60px] h-[60px] bg-b5 rounded-xl text-center flex flex-col justify-center items-center text-[#d9d9d9]"},ct=["src"],gt={class:"text-xs font-light text-center text-b1 opacity-30"},pt={class:"border-b4 border-b border-solid"},vt={class:"text-default font-semibold"},ft={key:0,class:"border-b4 border-b border-solid"},mt={class:"text-default font-semibold"},ht={key:1,class:"border-b4 border-b border-solid"},bt={class:"text-default font-semibold"},_t={class:"border-b4 border-b border-solid"},xt={class:"text-default font-semibold"},yt={key:0,class:"rounded-[10px] bg-[#F5F5F5] min-h-[56px] w-full mb-4 p-3"},It={class:"flex items-center justify-start w-full h-full"},wt={class:"w-8 h-8 rounded-[4px] bg-[#D9D9D9]"},$t={class:"ml-2"},Ct={class:"text-base font-semibold text-b1"},St={key:0,class:"mt-3 border-t border-t-b4 pt-3"},kt={key:1,class:"mt-3 border-t border-t-b4 pt-3"},Nt=be(()=>s("div",{class:"text-b1 text-sm mb-2 last:mb-0"},"全部分店（含增补）",-1)),Vt=[Nt],Ft={class:"pt-4 font-semibold text-b1"},Bt={class:"van-uploader__wrapper gap-1.5"},Dt=["onClick"],Pt={class:"van-image van-uploader__preview-image",style:{width:"60px",height:"60px"}},Et=["src"],At=["onClick"],Rt=be(()=>s("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)),Lt=[Rt],Tt={class:"w-[60px] h-[60px] bg-b5 rounded-xl text-center flex flex-col justify-center items-center text-[#d9d9d9]"},Ot=["src"],qt={class:"text-xs font-light text-center text-b1 opacity-30"},zt={key:0,class:"bg-white rounded-xl m-3 overflow-hidden"},Ut={class:"text-default font-semibold"},Gt={class:"bg-white rounded-xl overflow-hidden m-3 px-3 title"},Mt={class:"border-b4 border-b border-solid"},jt={class:"text-default font-semibold"},Ht={class:"text-default font-semibold"},Kt=X("%"),Yt={key:1,class:"fixed bottom-0 flex items-center px-3 pt-4 safe-bottom justify-evenly gap-x-3 btn-wrapper sm:w-[375px] w-full left-[50%]",style:{transform:"translateX(-50%)"}},Jt={class:"text-b3 text-center text-sm mt-6"},Qt={class:"flex items-center justify-between mt-6"},Wt=ce({name:"EditOfflineGoods"});function Xt(D){const{t:p}=co(),{accountStore:E,serviceCategoriesStore:G}=qe(),{getCurrentStoreId:P}=xo(),{loadingToggle:M}=yo(),_=go(),A=po(),e=C({goodsId:null,shopId:null,goodsName:"",goodsIcons:"",goodsPrice:null,goodsDiscountRatio:null,goodsDesc:null,goodsPics:"",goodsStatus:1,goodsType:null,goodsCategoryId1:null,goodsCategoryName1:null,goodsCategoryId2:null,goodsCategoryName2:null,goodsCategoryId3:null,goodsCategoryName3:null,goodsCategoryId:null,storeBrandId:void 0,includeAllStoreFlag:!1}),j=se(()=>!e.value.goodsName||i.value.length<=0||!e.value.goodsCategoryId1||!e.value.goodsCategoryId2||!e.value.goodsCategoryId3||!e.value.goodsPrice||!e.value.goodsDiscountRatio),i=C([]),f=C([]),y=C(0),V=C(0),H=C([]),x=C(1),K=C(null),l=fe({brandId:null,brandName:null,storeIds:[],storeNames:[],includeAllStoreFlag:!1}),Z=C(""),[le,a]=oe(!1),[u,I]=oe(!1),[T,O]=oe(!1),[q,Y]=oe(!1),[ne,J]=oe(!1),$=se(()=>({1:p("common.boutique"),2:p("mall.Best"),3:p("shop.Star Selection")})),Q=[[1,80],[4,30],[10,80],[20,80]],z=se(()=>{let o=[1,80];return y.value&&(o=Q[V.value]),o}),Ue=o=>o.replace(/^(\d*\.?\d{0,4}).*$/,"$1"),_e=o=>{function t(d){let h=d.replace(/[^\d.]/g,"");return h=h.replace(/(\..*)\./g,"$1"),h=y.value?h.replace(/^(\d*\.?\d{0,0}).*$/,"$1"):h.replace(/^(\d*\.?\d{0,2}).*$/,"$1"),h}return o>z.value[1]?z.value[1].toString():t(o.toString())};ae(()=>y.value,()=>{e.value.goodsDiscountRatio>0&&(e.value.goodsDiscountRatio=_e(e.value.goodsDiscountRatio))});const Ge=()=>{if(!y.value&&V.value&&e.value.goodsDiscountRatio>0){const o=Q[V.value];e.value.goodsDiscountRatio>=o[0]&&e.value.goodsDiscountRatio<=o[1]&&(y.value=V.value)}},de=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var t=Math.random()*16|0,d=o==="x"?t:t&3|8;return d.toString(16)}),xe=C(5),Me=async o=>{if(i.value.length>=xe.value)return;const t=Fe(o.file);if(!t.valid)return F(t.tips);const d=Be(o.file);if(!d.valid)return F(d.tips);te.loading({message:p("common.uploading"),forbidClick:!0,duration:0});const h=await De(o,"goodsImg"),B=await Ae(h);if(te.clear(),!B.success)return F("图片上传失败");i.value.push({id:de(),url:Pe.imgUrl+B.data})},je=o=>{i.value.splice(o,1)},He=o=>{Ve({images:i.value.map(t=>t.url),startPosition:o})},ye=C(5),Ke=async o=>{if(f.value.length>=ye.value)return;const t=Fe(o.file);if(!t.valid)return F(t.tips);const d=Be(o.file);if(!d.valid)return F(d.tips);te.loading({message:p("common.uploading"),forbidClick:!0,duration:0});const h=await De(o,"goodsDesc"),B=await Ae(h);if(te.clear(),!B.success)return F("图片上传失败");f.value.push({id:de(),url:Pe.imgUrl+B.data})},Ye=o=>{f.value.splice(o,1)},Je=o=>{Ve({images:f.value.map(t=>t.url),startPosition:o})},ge=(o,t,d)=>{H.value=Co(G.fullCategories,{idKey:"goodsCategoryId",parentKey:"goodsCategoryParentId",rootId:t}),K.value=o,x.value=d,Y(!0)},Qe=(o,t)=>{if(e.value[`goodsCategoryId${x.value}`]=o,e.value[`goodsCategoryName${x.value}`]=t,x.value<3)for(let d=x.value;d<3;d++)e.value[`goodsCategoryId${d+1}`]=null,e.value[`goodsCategoryName${d+1}`]=null},We=()=>{l.brandId?I(!0):a(!0)},Xe=()=>{I(!1),a(!0)},Ze=()=>{l.storeIds=[],l.storeNames=[],l.includeAllStoreFlag=!0},eo=(o,t)=>{l.brandName=t,o!==l.brandId&&(l.brandId=o,l.storeIds=[]),o&&I(!0)},oo=(o,t)=>{l.storeIds=o||[],l.storeNames=t||[],l.includeAllStoreFlag=!1,I(!1)};ae(()=>l.brandName,async o=>{o&&(await ue(),to())},{immediate:!0,deep:!0});const to=async()=>{const{success:o,data:t}=await ze({page:1,size:1,storeBrandNameLike:l.brandName,showNotHaveStoresFlag:!0});if(o){const d=t.records.find(h=>h.storeBrandId===l.brandId);d&&d.storeBrandIcon?Z.value=d.storeBrandIcon.split(",")[0]||"":Z.value=""}},F=o=>{te({message:o,icon:pe("toast-warn.svg"),duration:2e3,overlay:!0,overlayClass:"toastOverlay",className:"toastCard",type:"html"})},so=()=>{e.value.goodsPrice<0&&(F(p("offline.price_tips")),e.value.goodsPrice=Math.abs(e.value.goodsPrice))},Ie=()=>{var o;return e.value.goodsName?i.value.length?((o=e.value)==null?void 0:o.goodsPrice)<=0?(F(p("shop.pleaseInput")+p("goods.price")),!1):!0:(F(p("offline.empty_image")),!1):(F(p("offline.offline_name_placeholder")),!1)},we=async()=>{var d,h;const o=i.value.map(B=>B.url),t=f.value.map(B=>B.url);e.value.goodsType=y.value?V.value:ve.SD,e.value.goodsIcons=o.join(","),e.value.goodsPics=t.join(","),e.value.shopId=(d=await P())==null?void 0:d.id,e.value.storeBrandId=l.brandId?l.brandId:void 0,e.value.storeBrandName=l.brandName?l.brandName:void 0,e.value.includeAllStoreFlag=l.includeAllStoreFlag,e.value.storeIds=(h=l.storeIds)!=null&&h.length?l.storeIds:void 0},ao=async()=>{if(!Ie())return;O(!0),e.value.goodsStatus=Le.DRAFT,await we();const{success:o,data:t}=await Ee(e.value);O(!1),o&&(e.value.goodsId=t,$e())},lo=async()=>{if(!Ie())return;if(!e.value.goodsCategoryId1)return F(p("shop.pleaseSelect")+p("offline.one_category"));if(!e.value.goodsCategoryId2)return F(p("shop.pleaseSelect")+p("offline.two_category"));if(!e.value.goodsCategoryId3)return F(p("shop.pleaseSelect")+p("offline.three_category"));if(!e.value.goodsDiscountRatio||e.value.goodsDiscountRatio<z.value[0]||+e.value.goodsDiscountRatio>z.value[1]){const d=p("offline.empty_discount")+`<div class="text-center ">(${z.value[0]}-${z.value[1]}%)</div>`;return F(d)}O(!0),e.value.goodsStatus=Le.Published,await we();const{success:o,data:t}=await Ee(e.value);O(!1),o&&(e.value.goodsId=t,J(!0))},no=()=>{var o,t,d;if(Ce(),J(!1),(o=e.value)!=null&&o.goodsId){let h={};(t=e.value)!=null&&t.goodsId&&(h.goodsId=(d=e.value)==null?void 0:d.goodsId),A.replace({path:"/offlineGoodsDetail",query:h})}},$e=()=>{Ce(),J(!1),A.back()},Ce=()=>{var t;const o=((t=e.value)==null?void 0:t.goodsId)||_.query.goodsId||"add";sessionStorage.setItem("shop_offline_refresh_id",o.toString())},ro=async()=>{var d,h,B,re,ie,ee;const o=(d=_.query)==null?void 0:d.goodsId;if(!o)return;const t=await $o(o.toString(),!0);t.success&&(e.value=t.data,e.value.goodsId=o.toString(),((h=e.value)==null?void 0:h.goodsType)!==ve.SD&&V.value!==ve.SD&&(y.value=1),e.value.goodsIcons&&(i.value=(e.value.goodsIcons||"").split(",").map(R=>({id:de(),url:R}))),e.value.goodsPics&&(f.value=e.value.goodsPics.split(",").map(R=>({id:de(),url:R}))),e.value.goodsDiscountRatio<=0&&(e.value.goodsDiscountRatio=null),+e.value.storeBrandId&&(l.brandId=e.value.storeBrandId,l.brandName=(B=e.value)==null?void 0:B.storeBrandName,(re=e.value)!=null&&re.includeAllStoreFlag?(l.storeIds=[],l.storeNames=[],l.includeAllStoreFlag=!0):(l.storeIds=(ie=e.value)==null?void 0:ie.stores.map(R=>R.storeId),l.storeNames=(ee=e.value)==null?void 0:ee.stores.map(R=>R.storeName),l.includeAllStoreFlag=!1),console.log(l.storeNames)))},io=async()=>{var d;const{success:o,data:t}=await wo((d=await P())==null?void 0:d.merchant);o&&(V.value=t==null?void 0:t.type)};return Te(async()=>{M(!0),G.init(),await io(),ro(),M(!1)}),(o,t)=>{const d=S("van-field"),h=S("van-uploader"),B=S("VanIcon"),re=S("VanImage"),ie=S("van-switch"),ee=S("VanButton");return m(),L(mo,{title:o.$t("offline.published_goods"),class:"font-Puhui font-normal relative pb-20 bg-gray1",themeVars:{navBarBackgroundColor:"#F2F0EF"}},{default:g(()=>{var R,Se;return[s("div",ot,[s("div",tt,c(o.$t("offline.offline_name")),1),b(d,{modelValue:e.value.goodsName,"onUpdate:modelValue":t[0]||(t[0]=r=>e.value.goodsName=r),autosize:"",type:"text",placeholder:o.$t("offline.offline_name_placeholder"),maxlength:"50",class:"no-bt"},null,8,["modelValue","placeholder"]),s("div",st,[b(n(Ne),ke({class:"flex flex-wrap gap-1.5",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=r=>i.value=r),"item-key":"id",distance:"12",delay:"200",touchStartThreshold:"15"},{animation:200,group:"description",disabled:!1,ghostClass:"ghost"},{handle:".handle"}),{item:g(({element:r,index:v})=>[s("div",{class:"van-uploader__preview",onClick:W(w=>He(v),["stop"])},[s("div",lt,[s("img",{src:r.url,class:"van-image__img rounded-md",style:{"object-fit":"cover"}},null,8,nt)]),s("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:W(w=>je(v),["stop"])},it,8,dt)],8,at)]),_:1},16,["modelValue","handle"]),i.value.length<xe.value?(m(),L(h,{key:0,accept:n(Re),afterRead:Me},{default:g(()=>[s("div",ut,[s("img",{src:n(pe)("image-default.svg"),class:"w-6 mx-auto",alt:""},null,8,ct),s("div",gt,c(o.$t("offline.main_image")),1)])]),_:1},8,["accept"])):k("",!0)]),s("div",pt,[b(d,{"input-align":"right",autocomplete:"off",class:"no-bt",onClick:t[2]||(t[2]=r=>{var v;return ge((v=e.value)==null?void 0:v.goodsCategoryId1,0,1)})},{label:g(()=>[s("div",vt,c(o.$t("offline.one_category")),1)]),input:g(()=>{var r,v,w;return[s("div",{class:U(["dropdown text-b3",{"!text-b2":(r=e.value)==null?void 0:r.goodsCategoryId1,"down-active":x.value===1&&n(q)}])},c((v=e.value)!=null&&v.goodsCategoryId1?(w=e.value)==null?void 0:w.goodsCategoryName1:o.$t("shop.pleaseSelect")),3)]}),_:1})]),(R=e.value)!=null&&R.goodsCategoryId1?(m(),N("div",ft,[b(d,{"input-align":"right",autocomplete:"off",class:"no-bt",onClick:t[3]||(t[3]=r=>{var v,w;return ge((v=e.value)==null?void 0:v.goodsCategoryId2,(w=e.value)==null?void 0:w.goodsCategoryId1,2)})},{label:g(()=>[s("div",mt,c(o.$t("offline.two_category")),1)]),input:g(()=>{var r,v,w;return[s("div",{class:U(["dropdown text-b3",{"!text-b2":(r=e.value)==null?void 0:r.goodsCategoryId2,"down-active":x.value===2&&n(q)}])},c((v=e.value)!=null&&v.goodsCategoryId2?(w=e.value)==null?void 0:w.goodsCategoryName2:o.$t("shop.pleaseSelect")),3)]}),_:1})])):k("",!0),(Se=e.value)!=null&&Se.goodsCategoryId2?(m(),N("div",ht,[b(d,{"input-align":"right",autocomplete:"off",class:"no-bt",onClick:t[4]||(t[4]=r=>{var v,w;return ge((v=e.value)==null?void 0:v.goodsCategoryId3,(w=e.value)==null?void 0:w.goodsCategoryId2,3)})},{label:g(()=>[s("div",bt,c(o.$t("offline.three_category")),1)]),input:g(()=>{var r,v,w;return[s("div",{class:U(["dropdown text-b3",{"!text-b2":(r=e.value)==null?void 0:r.goodsCategoryId3,"down-active":x.value===3&&n(q)}])},c((v=e.value)!=null&&v.goodsCategoryId3?(w=e.value)==null?void 0:w.goodsCategoryName3:o.$t("shop.pleaseSelect")),3)]}),_:1})])):k("",!0),s("div",_t,[b(d,{"input-align":"right",autocomplete:"off",class:"no-bt",onClick:t[5]||(t[5]=r=>We())},{label:g(()=>[s("div",xt,c(o.$t("offline.brandInfo")),1)]),input:g(()=>{var r,v;return[s("div",{class:U(["text-b3",{"!text-b2":n(l).brandId}])},[X(c((r=n(l).storeIds)!=null&&r.length?o.$t("offline.store_selected",{num:(v=n(l).storeIds)==null?void 0:v.length}):n(l).brandId?o.$t("offline.brand_selected",{num:1}):o.$t("shop.pleaseSelect"))+" ",1),b(B,{name:"arrow",class:"text-xs font-bold"})],2)]}),_:1}),n(l).brandId?(m(),N("div",yt,[s("div",It,[s("div",wt,[b(re,{src:Z.value||"",radius:"4px",width:"32px",height:"32px",fit:"cover"},null,8,["src"])]),s("div",$t,[s("span",Ct,c(n(l).brandName||""),1)])]),n(l).storeIds.length?(m(),N("div",St,[(m(!0),N(he,null,me(n(l).storeNames,(r,v)=>(m(),N("div",{key:v,class:"text-b1 text-sm mb-2 last:mb-0"},c(r),1))),128))])):n(l).includeAllStoreFlag?(m(),N("div",kt,Vt)):k("",!0)])):k("",!0)]),s("div",Ft,c(`${o.$t("goods.goodsDesc")}`),1),b(d,{modelValue:e.value.goodsDesc,"onUpdate:modelValue":t[6]||(t[6]=r=>e.value.goodsDesc=r),rows:"1",autosize:"",type:"textarea",placeholder:o.$t("goods.pleaseInputDesc"),class:"no-bt",style:{"padding-top":"8px !important","padding-bottom":"8px !important"}},null,8,["modelValue","placeholder"]),s("div",Bt,[b(n(Ne),ke({class:"flex flex-wrap gap-1.5",modelValue:f.value,"onUpdate:modelValue":t[7]||(t[7]=r=>f.value=r),"item-key":"id",distance:"12",delay:"200",touchStartThreshold:"15"},{animation:200,group:"description",disabled:!1,ghostClass:"ghost"},{handle:".handle"}),{item:g(({element:r,index:v})=>[s("div",{class:"van-uploader__preview",onClick:W(w=>Je(v),["stop"])},[s("div",Pt,[s("img",{src:r.url,class:"van-image__img rounded-md",style:{"object-fit":"cover"}},null,8,Et)]),s("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:W(w=>Ye(v),["stop"])},Lt,8,At)],8,Dt)]),_:1},16,["modelValue","handle"]),f.value.length<ye.value?(m(),L(h,{key:0,accept:n(Re),afterRead:Ke},{default:g(()=>[s("div",Tt,[s("img",{src:n(pe)("image-default.svg"),class:"w-6 mx-auto",alt:""},null,8,Ot),s("div",qt,c(o.$t("goods.descImage")),1)])]),_:1},8,["accept"])):k("",!0)])]),V.value?(m(),N("div",zt,[b(d,{"input-align":"right",autocomplete:"off",class:"no-bt",style:{"padding-top":"16px !important","padding-bottom":"16px !important"},label:`*${o.$t("goods.setting boutique good"),{type:n($)[V.value]}}`},{label:g(()=>[s("div",Ut,c(`${o.$t("goods.setting boutique good",{type:n($)[V.value]})}`),1)]),input:g(()=>[b(ie,{modelValue:y.value,"onUpdate:modelValue":t[8]||(t[8]=r=>y.value=r),"active-color":"#FF8812","inactive-color":"#B7B4B0","active-value":1,"inactive-value":0,size:"20"},null,8,["modelValue"])]),_:1},8,["label"])])):k("",!0),s("div",Gt,[s("div",Mt,[b(d,{"input-align":"right",type:"number",autocomplete:"off",modelValue:e.value.goodsPrice,"onUpdate:modelValue":t[9]||(t[9]=r=>e.value.goodsPrice=r),onBlur:so,formatter:Ue,placeholder:o.$t("shop.pleaseInput"),class:"no-bt"},{label:g(()=>[s("div",jt,c(o.$t("offline.mcPrice")),1)]),_:1},8,["modelValue","placeholder"])]),b(d,{class:"no-bt","input-align":"right",type:y.value?"digit":"number",autocomplete:"off",modelValue:e.value.goodsDiscountRatio,"onUpdate:modelValue":t[10]||(t[10]=r=>e.value.goodsDiscountRatio=r),formatter:_e,placeholder:`${o.$t("shop.pleaseInput")}${n(z)[0]}-${n(z)[1]}`,onBlur:Ge},{label:g(()=>[s("div",Ht,c(`${o.$t("offline.discountRatio")} `),1)]),"right-icon":g(()=>[Kt]),_:1},8,["type","modelValue","placeholder"])]),n(E).isOnlyView?k("",!0):(m(),N("div",Yt,[!n(_).query.goodsId||e.value.goodsStatus!==1?(m(),L(ee,{key:0,round:"",type:"primary",class:"flex-1 min-w-[130px] h-[46px] rounded-full border border-solid border-b4 bg-white text-b2 text-base font-semibold",onClick:t[11]||(t[11]=r=>ao()),loading:n(T)},{default:g(()=>[X(c(o.$t("goods.saveDraft")),1)]),_:1},8,["loading"])):k("",!0),b(ee,{round:"",class:U(["flex-1 min-w-[130px] h-[46px] text-base font-semibold",n(j)?"bg-b4 text-b2":"bg-btnOrBg text-b1"]),disabled:n(j),onClick:t[12]||(t[12]=r=>lo()),loading:n(T)},{default:g(()=>[X(c(o.$t("goods.upimmediately")),1)]),_:1},8,["disabled","class","loading"])])),n(q)?(m(),L(Ro,{key:2,list:H.value,level:x.value,id:K.value,onSelect:Qe,onClose:t[13]||(t[13]=r=>n(Y)(!1))},null,8,["list","level","id"])):k("",!0),n(le)?(m(),L(bo,{key:3,id:n(l).brandId,name:n(l).brandName,onSelect:eo,onClose:t[14]||(t[14]=r=>n(a)(!1))},null,8,["id","name"])):k("",!0),n(u)?(m(),L(et,{key:4,ids:n(l).storeIds,rootId:n(l).brandId,rootName:n(l).brandName,onSelect:oo,onChangeBrand:Xe,onGetAll:Ze,onClose:t[15]||(t[15]=r=>n(I)(!1))},null,8,["ids","rootId","rootName"])):k("",!0),b(Io,{noClose:"",name:o.$t("offline.published_success"),show:n(ne),onClose:t[17]||(t[17]=r=>n(J)(!1))},{default:g(()=>[s("div",Jt,c(o.$t("offline.published_success_desc")),1),s("div",Qt,[s("div",{class:"flex-1 h-[46px] leading-[44px] rounded-full text-center border border-solid-b4 mr-3",onClick:no},c(o.$t("flashSale.check-the-details")),1),s("div",{class:"flex-1 h-[46px] leading-[46px] rounded-full text-center bg-yellow",onClick:t[16]||(t[16]=r=>$e())},c(o.$t("common.back list")),1)])]),_:1},8,["name","show"])]}),_:1},8,["title"])}}const Zt=ce({...Wt,setup:Xt}),us=uo(Zt,[["__scopeId","data-v-5bc739d2"]]);export{us as default};
