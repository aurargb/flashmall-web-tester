import{_ as K,y as Q,l as Y,w as Z,bO as _,E as I,F as n,G as r,H as o,X as m,a3 as ee,Q as t,P as d,I as p,J as j,Y as se,a4 as w,K as A,a1 as k,O as x,N as h,T as V,Z as te,$ as oe,be as U,bf as re,a2 as ne}from"./vendor-BlU_hoYl.js";import{_ as ae}from"./avatarRing-CLGxkH-F.js";import{_ as de}from"./address-AoifhxGN.js";import{a as W}from"./useRefund-CagomE1G.js";import{G as ie}from"./GoodsItem-Xj-yUlkJ.js";import{e as X,o as ce,b as le,l as N}from"./index-Clz0Qna-.js";import{u as ue,f as me}from"./useOrderStatus-D1Cw0BRr.js";import{c as fe,n as he,l as ye,G as J}from"./order-oH4Sz-Mc.js";import{P as F}from"./flashSale-DDyqLyYN.js";import{g as O}from"./orderTime-Do7otswC.js";import{C as ge}from"./ChangeRegion-W_k7XIfQ.js";import{B as pe}from"./BackIcon-8hcEjDKb.js";import"./credit-EZuPIBEN.js";import"./mcoin-logo-1-Deho8IWN.js";import"./useShipTemplate-C35bKCd2.js";import"./enums-DlE-aiss.js";import"./ChangeRegionPop-CQAokX6U.js";const xe=""+new URL("../images/addTag-B03q_prA.svg",import.meta.url).href,P=e=>(te("data-v-1ecf5e6c"),e=e(),oe(),e),ve={class:"gap-2 flex-center-bw"},be=P(()=>o("div",{class:"w-8 h-8"},[o("img",{src:ae,class:"w-full h-full rounded-md",alt:"",fit:"cover"})],-1)),we={class:"flex flex-col justify-center flex-1 h-8 text-default"},ke={class:"text-sm font-semibold flex-center-bw"},$e={key:0},Ce={class:"text-primary"},Te={key:0},Re={key:0},Se={key:1},Ae={key:2},Ie={class:"text-xs opacity-60"},Le={key:0},Be={key:1},Ve={key:2},Ne={key:0,class:"bg-[#34C2A9] rounded-[2px] w-[20px] h-[20px] text-center mr-[8px]"},Fe=P(()=>o("img",{src:xe,class:"w-4 h-4",alt:""},null,-1)),Oe={class:"text-sm text-default"},je={class:"flex justify-between gap-2 text-[#C96C26] text-sm font-normal rounded-lg bg-[#FFF5E9] p-2"},Pe={class:"whitespace-nowrap w-[100px]"},De={key:0,class:"opacity-60"},Ee={key:1,class:"break-all opacity-60"},Ge={class:"break-all"},qe={key:0,class:"text-base text-black font-semibold mt-2 border-t-[1px] border-[#F2F2F2] border-solid pt-2"},ze=P(()=>o("img",{src:de,class:"inline-block w-[18px]"},null,-1)),He={key:1,class:"mt-1 text-sm text-default opacity-60"},Me={key:0,class:"pt-2.5 text-xs text-[#B9B9B9]"},Ue={class:"items-center inline"},We={class:"block"},Je={class:"colon"},Ke={class:"block"},Qe={class:"colon"},Xe={class:"block"},Ye={class:"colon"},Ze={class:"block"},_e={class:"colon"},es={key:1,class:"text-right"},ss={key:1,class:"flex justify-end mt-3"},ts=Q({props:{order:null,isService:{type:Boolean},nowTime:null},emits:["open"],setup(e,{emit:$}){const y=e,{accountStore:f}=X(),v=Y(),C=ue(y.order),{t:a}=Z(),L=s=>{y.isService||v.push(s)},B=()=>{y.isService||v.push(`/sellerOrderDetail?id=${y.order.id}`)},T=_("openBatchReceiptPop",null),{merchantConfirm:R}=ce(),S=async s=>{if(f.isOnlyView)return V(a("order.Requires merchant account operation"));if(T){T(s);return}s.loading=!0;try{const g=(await fe({orderIds:s.id})).data.ordIds,u=await R(g);if(!u.success)return;if(s.payType!==F.STORE_CARD){if(!(await he({ordIds:g,hash:u.result.hash})).success)return;s.merchantsConfirm=1,V.success(a("order.confirmSuccess"))}}finally{s.loading=!1}},c=s=>{$("open",s)};return(s,l)=>{var b,D,E,G,q,z,H,M;const g=I("van-count-down"),u=I("VanButton");return r(),n("div",{class:"px-5 mt-3 bg-white rounded-xl py-7",onClick:B},[o("div",ve,[be,o("div",we,[o("div",ke,[e.order.userAddress&&e.order.userAddress.address?(r(),n("div",$e,t(d(le)(e.order.userAddress.address,"...",5,5)),1)):m("",!0),o("div",Ce,[d(W)(e.order).available?(r(),n("span",Te,t(d(W)(e.order).label),1)):(r(),n(p,{key:1},[e.order.status==-1?(r(),n("span",Re,t(s.$t("order.canceled")),1)):e.order.status===0&&e.order.hash?(r(),n("span",Se,t(s.$t("order.wait block chain")),1)):(r(),n("span",Ae,t(d(C)[e.order.status+""]),1))],64))])]),o("div",Ie,[e.order.status==4?(r(),n("span",Le,t(d(N)(e.order.finishTime))+" "+t(s.$t("common.finish")),1)):e.order.status==2?(r(),n("span",Be,t(d(N)(e.order.expressTime))+" "+t(s.$t("order.Ship")),1)):(r(),n("span",Ve,t(d(N)(e.order.createTime))+" "+t(s.$t("order.buied")),1))])])]),o("ul",{class:"flex justify-start tagStyle items-center mt-[8px] text-white",onClick:l[0]||(l[0]=w(i=>c(e.order),["stop"]))},[((D=(b=e.order)==null?void 0:b.orderLabelList)==null?void 0:D.length)>0?(r(),n(p,{key:0},[(r(!0),n(p,null,j((G=(E=e.order)==null?void 0:E.orderLabelList)==null?void 0:G.slice(0,5),i=>(r(),n("li",{style:se({backgroundColor:i==null?void 0:i.colorHex}),class:"text-[10px] min-h-[16px] min-w-[20px] rounded-[2px] h-[20px] px-[4px] mr-[6px]",key:i==null?void 0:i.id},t(i==null?void 0:i.content),5))),128)),((z=(q=e.order)==null?void 0:q.orderLabelList)==null?void 0:z.length)>5?(r(),n("li",Ne," ... ")):m("",!0)],64)):m("",!0),Fe]),(r(!0),n(p,null,j(e.order.orderGoods,i=>(r(),A(ie,{creditFlag:e.order.creditFlag,payType:e.order.payType,key:i.goodsName,goods:i,storeCard:e.order.fmStoredCard,onHandleTo:L},null,8,["creditFlag","payType","goods","storeCard"]))),128)),o("div",Oe,[o("div",je,[o("div",Pe,t(s.$t("order.remark")),1),(H=e.order.userAddress)!=null&&H.postscript?(r(),n("div",Ee,t((M=e.order.userAddress)==null?void 0:M.postscript),1)):(r(),n("div",De,t(s.$t("order.noRemark")),1))])]),o("div",Ge,[e.order.userAddress?(r(),n("div",qe,[ze,k(" "+t(e.order.userAddress.provinceName??"")+t(e.order.userAddress.cityName??"")+t(e.order.userAddress.countyName??"")+t(e.order.userAddress.detailInfo??""),1)])):m("",!0),e.order.userAddress?(r(),n("div",He,t(e.order.userAddress.userName)+" "+t(e.order.userAddress.telNumber),1)):m("",!0)]),e.order.status===2?(r(),n("div",Me,[d(O)(e.order.expressTime,e.order.confirmLimit,e.nowTime)>0?(r(),n(p,{key:0},[o("div",null,t(s.$t("order.observeTip")),1),o("div",Ue,[x(g,{class:"order-time",time:d(O)(e.order.expressTime,e.order.confirmLimit,e.nowTime)},{default:h(i=>[o("span",We,t(i.days),1),o("span",Je,t(s.$t("common.day")),1),o("span",Ke,t(i.hours),1),o("span",Qe,t(s.$t("common.hours")),1),o("span",Xe,t(i.minutes),1),o("span",Ye,t(s.$t("common.minutes")),1),o("span",Ze,t(i.seconds),1),o("span",_e,t(s.$t("common.seconds")),1)]),_:1},8,["time"]),o("span",null,t(s.$t("order.sellConfirmTip")),1)])],64)):e.order.payType===d(F).WITHDRAW_POINTS&&!e.order.merchantsConfirm?(r(),n("div",es,t(s.$t("order.sellConfirm")),1)):m("",!0)])):m("",!0),e.isService?m("",!0):(r(),n("div",ss,[!d(f).isOnlyView&&e.order.status===1?(r(),A(u,{key:0,class:"btn-orange h-[37px] px-9 text-white text-sm font-semibold",onClick:l[1]||(l[1]=w(i=>d(f).isOnlyView?d(V)(s.$t("order.Requires merchant account operation")):d(v).push(`/orderDelivery?id=${e.order.id}`),["stop"]))},{default:h(()=>[k(t(s.$t("order.Ship")),1)]),_:1})):m("",!0),!d(f).isOnlyView&&e.order.status===2&&e.order.payType!==d(F).STORE_CARD&&!e.order.merchantsConfirm?(r(),A(u,{key:1,class:"btn-orange h-[37px] px-6 text-white text-sm font-semibold",disabled:d(O)(e.order.expressTime,e.order.confirmLimit,e.nowTime)>0,loading:e.order.loading,onClick:l[2]||(l[2]=w(i=>S(e.order),["stop"]))},{default:h(()=>[k(t(s.$t("order.confirmGeted")),1)]),_:1},8,["disabled","loading"])):m("",!0)])),ee(s.$slots,"default",{},void 0,!0)])}}}),os=K(ts,[["__scopeId","data-v-1ecf5e6c"]]),rs={class:"px-3 bg-[#f2f0ef] mb-1"},ns={class:"gap-2 mt-2 flex-start"},as={class:"text"},ds={class:"flex justify-between mt-2.5 text-sm text-[#2E2008]"},is={class:"font-medium opacity-60"},cs={class:""},ls={class:"flex-center-bw mt-2.5"},us=Q({setup(e){const{reloadStore:$}=X(),[y,f]=U(!1),[v,C]=U(!1),a=re({active:1,page:0,size:10,finished:!1,list:[],loading:!1,total:0}),L=c=>{const s=me();return c.fmRefundReason&&c.fmRefundReason[s]},B=async()=>{a.loading=!0,a.page+=1,await T(),a.loading=!1},T=async()=>{const c={page:a.page,size:a.size,type:3},s=await ye(c);if(a.loading=!1,!s.success){a.finished=!0;return}if(!s.data||!s.total){a.finished=!0;return}a.total=s.total,a.list=a.page===1?s.data:a.list.concat(s.data),a.list.length>=a.total&&(a.finished=!0)},R=ne();R.query.active&&(a.active=Number(R.query.active));const S=async(c,s)=>{if(s){C(!0);const l=await J({orderId:c.id,type:1});C(!1),l.success&&$.reload()}else{f(!0);const l=await J({orderId:c.id,type:2});f(!1),l.success&&$.reload()}};return(c,s)=>{const l=I("VanButton"),g=I("VanList");return r(),n("div",rs,[o("div",ns,[x(pe),o("div",as,t(c.$t("common.service")),1),x(ge,{showIcon:!0,showDownIcon:!0,class:"ml-auto bg-gray1 px-2 rounded-[20px] border-2 border-solid border-white",style:{"box-shadow":"0px 0px 15px 0px rgba(51, 47, 42, 0.3) inset"}})]),x(g,{class:"mt-2.5",loading:d(a).loading,"onUpdate:loading":s[0]||(s[0]=u=>d(a).loading=u),finished:d(a).finished,"finished-text":c.$t("common.noMore"),"loading-text":c.$t("common.loading"),onLoad:B},{default:h(()=>[(r(!0),n(p,null,j(d(a).list,u=>(r(),A(os,{key:u.id,order:u,isService:!0},{default:h(()=>[o("div",ds,[o("div",is,t(c.$t("refund.reasonforreturn")),1),o("div",cs,t(L(u)),1)]),o("div",ls,[x(l,{class:"border-orange bg-[#fff] rounded-3xl text-[#fea021] w-[130px] h-[45px]",onClick:w(b=>S(u,!0),["stop"]),loading:d(v)},{default:h(()=>[k(t(c.$t("common.agree")),1)]),_:2},1032,["onClick","loading"]),x(l,{class:"btn-orange rounded-3xl text-white w-[130px] h-[45px]",onClick:w(b=>S(u,!1),["stop"]),loading:d(y)},{default:h(()=>[k(t(c.$t("common.reject")),1)]),_:2},1032,["onClick","loading"])])]),_:2},1032,["order"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])])}}}),Is=K(us,[["__scopeId","data-v-b4124a2a"]]);export{Is as default};
