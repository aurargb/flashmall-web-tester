import{_ as N,y as B,r as h,E as L,F as r,G as n,I as z,J as U,K as V,X as S,N as F,H as e,R as E,O as w,P as d,a4 as q,Q as C,Z as M,$ as G,l as K,D as J,be as H,a1 as oe,Y as ne,a0 as le,z as Q,x as W,a3 as ae,bz as ce,bB as ie,bC as re,bA as ue,n as de,bc as pe,bd as fe,bh as he}from"./vendor-BlU_hoYl.js";import{_ as ve}from"./adpng-DqTFHGH_.js";import{a as me,r as _e,q as ge,d as ye,e as X}from"./mall-DBbHU8Zq.js";import{v as ee,e as xe,W as we,g as te}from"./index-UgIL2Smv.js";import{l as be,a as Z}from"./shop-CeqcS6K2.js";import{c as $e}from"./category-aaGcZXZl.js";import{R as ke}from"./Recommends-DZHrjztm.js";import{C as Ce}from"./ChangeRegionPop-Cbhn04PN.js";import{a as Ie}from"./festivalActivities-BsekkQdb.js";import{c as Le}from"./user-C6o7y5Gg.js";import{u as Se}from"./useShowActiveInfo-vOYMNb1J.js";import"./GoodsList-DFiOlQ59.js";import"./buy-cart-DX6aL7m1.js";import"./goods-BVwS8oFG.js";import"./ShopMaskTips-CxJi-SfW.js";import"./GoodsPrice-CFQUMmEr.js";import"./MCOIN-BOqZVkND.js";import"./WaterFull-Ce1Oez92.js";/* empty css                                                              */import"./ImgBoutiqueLable-BIio6fYG.js";import"./RatioBox-CBosZpIg.js";import"./MetaKeyTag-D6RyTOcl.js";import"./useOrderStatus-D1Cw0BRr.js";import"./rangking-soiwLY3n.js";const Re="/static/images/msg_icon_type_2-CRHOGGKj.png",Fe="/static/images/msg_icon_type_1-llTYHMvU.png",Te="/static/images/msg_close_dark-CMJSlgeW.png",Be=s=>(M("data-v-5c448efa"),s=s(),G(),s),Ae={key:0,class:"notification-bg-2 w-full h-[30px] absolute -bottom-[4px] px-0 left-0"},Pe=["onClick"],De={key:0,src:Re,class:"w-3.5 h-auto flex-shrink-0"},Oe={key:1,src:Fe,class:"w-3.5 h-auto flex-shrink-0"},Ee={class:"flex-1 text-sm"},ze=["onClick"],Ue=Be(()=>e("img",{src:Te,class:"w-4 h-auto"},null,-1)),Ve=[Ue],qe=["onClick"],Ne=B({emits:["handleTo"],setup(s,{expose:_,emit:a}){const{currentLocale:p}=ee(),v=h([]),l=(u,f)=>{me({id:f.id}),v.value.splice(u,1)},o=()=>{_e(),v.value.length=0};return _({_queryRemindList:async()=>{var f;const u=await ge({page:1,size:999});if(u.success){const g=(f=u.data)==null?void 0:f.filter(I=>I.readFlag===0);v.value=g||[]}}}),(u,f)=>{var R;const g=L("van-notice-bar"),I=L("van-swipe-cell");return n(),r("div",{class:E(["notification-container w-full font-normal",{"mb-1":((R=v.value)==null?void 0:R.length)>1}])},[(n(!0),r(z,null,U(v.value,(c,T)=>(n(),r("div",{key:c.id,class:"relative"},[T==0?(n(),V(I,{key:0,class:"h-[38px]"},{right:F(()=>[e("div",{class:E([{"bg-[#FED53D]":c.type===2,"bg-[#FFA123]":c.type===1},"h-[30px] flex items-center ml-1 px-4 rounded-[10px]"]),onClick:q(o,["stop"])},C(u.$t("mall.Clear")),11,qe)]),default:F(()=>[v.value&&v.value.length>1?(n(),r("div",Ae,[e("div",{class:E(["h-full rounded-[10px] box-shadow",{"bg-[#FED53D]":c.type===1,"bg-[#FFA123]":c.type===2}])},null,2)])):S("",!0),e("div",{class:E([{"bg-[#FED53D]":c.type===2,"bg-[#FFA123]":c.type===1},"notification-bg box-shadow flex items-center gap-2 h-[30px] rounded-[10px] px-2 relative"]),onClick:q(x=>a("handleTo","/orderMessage"+("?type="+c.type)+(c.category?"&category="+c.category:"")),["stop"])},[c.type===2?(n(),r("img",De)):c.type===1?(n(),r("img",Oe)):S("",!0),e("div",Ee,[w(g,{scrollable:"",color:c.type===2?"#222221":"#ffffff",background:"rgba(0,0,0,0)",text:c[`content${d(be)[d(p)]||"En"}`]},null,8,["color","text"])]),e("div",{class:"flex-shrink-0 w-5 ml-auto",onClick:q(x=>l(T,c),["stop"])},Ve,8,ze)],10,Pe)]),_:2},1024)):S("",!0)]))),128))],2)}}}),je=N(Ne,[["__scopeId","data-v-5c448efa"]]),He={key:0,class:"px-4 mt-2.5 py-4 bg-white rounded-xl category-box"},Me={class:"container flex overflow-x-auto"},Ge=["onClick"],Ke={class:"text-sm text-[#2e2008] opacity-60 text-center whitespace-nowrap mt-1"},Ye=B({setup(s){const{currentLocale:_}=ee(),a=K(),p=h([]),v=async()=>{const o=await $e();o.success&&(p.value=o.data||[])},l=o=>{a.push(`/search?classId=${o.id}&className=${o[`${Z[_.value]||"en"}Name`]}`)};return J(()=>{v()}),(o,$)=>{const u=L("VanImage");return p.value.length?(n(),r("div",He,[e("div",Me,[(n(!0),r(z,null,U(p.value,f=>(n(),r("div",{style:{flex:"0 0 18.18%"},class:"flex flex-col",key:f.name,onClick:g=>l(f)},[w(u,{src:f.logo,class:"mx-auto aspect-square w-11 h-11",alt:""},null,8,["src"]),e("span",Ke,C(f[`${d(Z)[d(_)]||"en"}Name`]),1)],8,Ge))),128))])])):S("",!0)}}}),Je=N(Ye,[["__scopeId","data-v-3e00afd0"]]),Qe="/static/images/hot-2BuvZhRT.png",We="/static/images/triangle-BeVcU1o4.png",Xe=s=>(M("data-v-7a74119a"),s=s(),G(),s),Ze={class:"flex items-center gap-1 py-1 text-sm leading-normal"},et=["src"],tt=Xe(()=>e("img",{src:We,class:"w-2 h-auto ml-1.5"},null,-1)),st=["onClick"],ot={class:"flex items-center"},nt=["src"],lt=B({props:{showIcon:{type:Boolean,default:!1},showOverlay:{type:Boolean,default:!0},showDownIcon:{type:Boolean,default:!0}},emits:["showPopRegin","showOverlay","showMallOverlay"],setup(s,{expose:_,emit:a}){const p=s,v=h(""),{regionStore:l}=xe(),[o,$]=H(!1),[u,f]=H(!1),g=()=>{$(!1),a("showOverlay",!1)},I=x=>{v.value=x,x!==l.country&&(f(!1),$(!0))},R=()=>{f(!1)},c=x=>{f(x),a("showOverlay",x)};function T(){p.showDownIcon&&c(!0)}return _({closePop:R}),(x,k)=>{const P=L("van-icon"),D=L("VanPopup");return n(),r("div",null,[e("div",{class:"change-region-tools flex items-center bg-[#F0F0F0] px-3 rounded-full",onClick:T},[e("div",Ze,[e("img",{src:d(we)(`mall/${d(l).country}-flag.svg`),class:"w-4 h-auto"},null,8,et),e("span",null,C(d(l).country),1)]),tt]),d(u)?(n(),V(D,{key:0,teleport:"body",overlay:s.showOverlay,show:d(u),"onUpdate:show":k[0]||(k[0]=y=>le(u)?u.value=y:null),position:"top",style:ne([{background:"transparent",width:"100%","max-width":"375px",left:"50%",transform:"translateX(-50%)",display:"flex"},{justifyContent:s.showIcon?"flex-end":"flex-start"}]),onClickOverlay:k[1]||(k[1]=y=>c(!1)),onClick:k[2]||(k[2]=y=>c(!1))},{default:F(()=>[e("div",{class:E(["min-w-[150px] sm:mt-[40%] mt-20 bg-[#f9f9f9] rounded-xl box-1 px-4",s.showIcon?"mr-2.5":"ml-2.5"])},[(n(!0),r(z,null,U(d(l).countries,y=>(n(),r("div",{key:y.key,class:E(["font-Silom py-1 leading-10 border-b text-sm border-solid border-[#D9D9D9] flex justify-between items-center",{"text-[#FEA021]":d(l).country===y.key}]),onClick:j=>I(y.key)},[e("div",ot,[e("img",{class:"w-5 h-auto mr-1.5",src:y.icon,alt:""},null,8,nt),oe(" "+C(y.text),1)]),d(l).country===y.key?(n(),V(P,{key:0,name:"success",alt:""})):S("",!0)],10,st))),128))],2)]),_:1},8,["overlay","show","style"])):S("",!0),w(Ce,{currentKey:v.value,show:d(o),onClose:g},null,8,["currentKey","show"])])}}}),at=N(lt,[["__scopeId","data-v-7a74119a"]]),se=s=>(M("data-v-df20a652"),s=s(),G(),s),ct={class:"z-[889] overflow-visible relative min-h-[12rem] my-bg"},it={class:"search-tools-bar w-full pt-3.5 bg-white flex-center-bw"},rt={class:"search-input flex items-center justify-between w-full h-8 bg-[#F0F0F0] rounded-full relative z-[999]"},ut={class:"flex items-center flex-1 gap-1 px-2 text-sm h-9 text-black/30"},dt={class:"line-clamp-1"},pt=["src"],ft={class:"search-tools-bar px-2.5 bg-white"},ht={class:"flex py-2.5 items-center gap-1.5 overflow-x-auto text-xs"},vt={class:"flex items-center flex-shrink-0 mr-[15px]"},mt=se(()=>e("img",{src:Qe,class:"w-2.5 h-auto mr-[2px]"},null,-1)),_t={class:"text-black font-normal ml-1"},gt=["onClick"],yt={class:"text-[#666]"},xt={class:"swiper-container px-2.5 mt-2.5 relative z-10"},wt={class:"swiper-slide-wrapper"},bt=["src"],$t=se(()=>e("div",{class:"swiper-pagination"},null,-1)),kt=B({props:{bannerList:{default:[]},expressList:{default:[]},hotList:{default:[]},hotListBottom:{default:[]}},setup(s,{expose:_}){const a=s,p=K(),v=t=>{p.push(t)},l=h(null);Q(()=>a.bannerList,()=>{de(()=>{var t;l.value&&((t=l.value)==null||t.$el.swiper.autoplay.start())})}),W(()=>a.bannerList[o.value]),W(()=>g.value==="left"?o.value>=a.bannerList.length-1?a.bannerList[0].colorCode:a.bannerList[o.value+1].colorCode:g.value==="right"?o.value===0?a.bannerList[a.bannerList.length-1].colorCode:a.bannerList[o.value-1].colorCode:null);const o=h(0),$=()=>{var t,i;u.value=0,g.value=null,o.value!==((t=l.value)==null?void 0:t.$el.swiper.realIndex)&&(o.value=(i=l.value)==null?void 0:i.$el.swiper.realIndex)},u=h(0),f=h(-1),g=h(null),I=(t,i)=>{if((i===0||i===1)&&(u.value=0,g.value=null),g.value){f.value=i;return}if(u.value===0){u.value=i;return}f.value=i,f.value<u.value?g.value="right":g.value="left",u.value=i},[R,c]=H(!1),T=t=>{t&&window.open(t,"_self")},x=h(null),k=h(null),P=t=>{c(t)};Q(()=>R.value,t=>{const i=document.getElementById("fm-page");t?i.style.overflow="hidden":i.style.overflow="auto"});const D=()=>{x.value.closePop()},y=()=>{D(),c(!1)},j=()=>{const t=k.value&&k.value.popShow?p.currentRoute.value.fullPath:"/search";p.push(t)};return _({closeRegionPop:D}),(t,i)=>{const Y=L("van-icon"),b=L("van-swipe-item"),A=L("van-swipe");return n(),r("div",ct,[d(R)?(n(),r("div",{key:0,class:"my-overlay",onClick:y,onTouchmove:i[0]||(i[0]=q(()=>{},["prevent"]))},null,32)):S("",!0),e("div",it,[w(at,{class:"relative z-[999] ml-2.5",ref:(m,O)=>{O.region=m,x.value=m},onShowOverlay:P,showOverlay:!1},null,512),e("div",{onClick:j,class:"relative ml-4 mr-2.5 flex-1"},[e("div",rt,[e("div",ut,[w(Y,{size:"16",name:"search",class:"font-bold text-black/30"}),w(A,{vertical:"",class:"leading-9 h-9",autoplay:5e3,touchable:!1,"show-indicators":!1},{default:F(()=>[(n(!0),r(z,null,U(s.hotList,m=>(n(),V(b,{key:m.id},{default:F(()=>[e("div",dt,[m.iconUrl?(n(),r("img",{key:0,class:"inline-block w-auto h-5 mr-1 align-middle",src:m.iconUrl},null,8,pt)):S("",!0),e("span",null,C(m.keyword),1)])]),_:2},1024))),128))]),_:1})])])])]),e("div",ft,[e("div",ht,[e("div",vt,[mt,e("span",_t,C(t.$t("mall.hotSearch")),1)]),(n(!0),r(z,null,U(s.hotListBottom,m=>(n(),r("div",{class:"hot-search-keyword bg-[#F5F5F5] px-2.5 py-0.5 rounded-xl flex-shrink-0",key:m.id,onClick:O=>v("/search?keyword="+m.keyword)},[e("span",yt,C(m.keyword),1)],8,gt))),128))])]),e("div",xt,[ae(t.$slots,"default",{},void 0,!0),s.bannerList&&s.bannerList.length>0?(n(),V(d(ue),{key:0,ref:(m,O)=>{O.swiperRef=m,l.value=m},modules:[d(ie),d(re)],autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},loop:!0,onSlideChange:$,onProgress:I,class:"swiper-container"},{default:F(()=>[(n(!0),r(z,null,U(s.bannerList,(m,O)=>(n(),V(d(ce),{key:m.id,virtualIndex:O,onClick:Zt=>T(m.linkUrl)},{default:F(()=>[e("div",wt,[e("img",{class:"w-full h-full rounded-md object-cover",src:m.imageUrl||d(te)("images/mall/mall_banner.png")},null,8,bt)])]),_:2},1032,["virtualIndex","onClick"]))),128)),$t]),_:1},8,["modules"])):S("",!0)])])}}}),Ct=N(kt,[["__scopeId","data-v-df20a652"]]),It="/static/images/new-text-DlOd6omk.png",Lt="/static/images/gift-icon-ChLUyQdL.png",St="/static/images/activity-text-fIwfO6KT.png",Rt="/static/images/active-icon-C76y8UVY.png",Ft={class:"flex gap-3 my-3"},Tt={class:"flex flex-col justify-between h-14"},Bt=e("img",{src:It,class:"w-8"},null,-1),At={class:"text-[#999] text-xxs"},Pt={class:"text-xs text-primary"},Dt=e("div",{class:"h-full flex flex-col justify-end"},[e("img",{src:Lt,class:"h-auto w-9"})],-1),Ot={class:"flex flex-col justify-between h-14"},Et=e("img",{src:St,class:"w-8"},null,-1),zt={class:"text-[#999] text-xxs"},Ut={class:"text-xs text-primary"},Vt=e("img",{src:Rt,class:"w-[75px] h-[72px]"},null,-1),qt=B({emits:["handleTo"],setup(s,{expose:_,emit:a}){K();const p=h({fmGeneralActivity:{name:"",startTime:"",endTime:""}});return(async()=>{const l={generalActivityId:1};try{const o=await Ie(l);o.code===1&&(p.value=o.data)}catch(o){console.error("获取活动信息失败:",o)}})(),_({actInfo:p}),(l,o)=>(n(),r("div",Ft,[e("div",{onClick:o[0]||(o[0]=$=>a("handleTo","/activity-goods?type=1")),class:"flex items-center justify-between flex-1 px-4 py-3 bg-white rounded-xl"},[e("div",Tt,[Bt,e("div",At,C(l.$t("mall.New Arrivals")),1),e("div",Pt,C(l.$t("avtivity.check")),1)]),Dt]),e("div",{onClick:o[1]||(o[1]=$=>a("handleTo","/activity-goods?type=2")),class:"flex items-center justify-between flex-1 px-4 pr-[6px] py-[3px] bg-white rounded-xl"},[e("div",Ot,[Et,e("div",zt,C(l.$t("mall.Hot sale products")),1),e("div",Ut,C(l.$t("avtivity.check")),1)]),Vt])]))}}),Nt=B({props:{limit:null},setup(s){const _=h(0),a=()=>{document.getElementById("fm-page").scrollTo({top:0,left:0,behavior:"smooth"})};return J(()=>{document.getElementById("fm-page").addEventListener("scroll",()=>{_.value=document.getElementById("fm-page").scrollTop})}),(p,v)=>{const l=L("van-icon");return pe((n(),r("div",{ref:(o,$)=>{$.toTop=o},onClick:a,class:"fixed flex shadow-1 items-center justify-center z-50 w-8 h-8 bg-white rounded-full right-2.5 bottom-[20%]"},[w(l,{name:"back-top",class:"text-xl"})],512)),[[fe,_.value>(s.limit||200)]])}}}),jt=s=>(M("data-v-79a3b8c6"),s=s(),G(),s),Ht={class:"w-full bg-fixed bg-[#F8F8F8] linear-mall h-full overflow-y-scroll"},Mt={class:"relative px-2.5 overflow-hidden"},Gt={class:"ad-img-container"},Kt=["onClick"],Yt=jt(()=>e("img",{src:ve,alt:"广告"},null,-1)),Jt=[Yt],Qt=B({name:"Mall"});function Wt(s){const _=h(null),a=h(null),p=h(!1),v=K(),[l,o]=H(!1),{showActiveInfo:$,getShowActiveInfo:u}=Se(),f=async()=>{var t,i;p.value=!0,await((t=_.value)==null?void 0:t.onRefresh()),(i=a.value)==null||i._queryRemindList(),p.value=!1},g=h(null),I=h([{id:1,imageUrl:te("images/mall/mall_banner.png"),linkUrl:null}]),R=async()=>{const t=await ye({locationType:1});t.success&&(I.value=t.data)},c=()=>{console.log("scroll")},T=h([]),x=h([]),k=async()=>{const t=await X({page:1,size:50,type:2});t.success&&(x.value=t.data||[])},P=h([]),D=async()=>{const t=await X({page:1,size:50,type:1});t.success&&(P.value=t.data||[])},y=t=>{v.push(t)},j=()=>{o(!1),v.push("/520-home")};return J(()=>{R(),k(),D(),u()}),he(()=>{var t;Le(),(t=a.value)==null||t._queryRemindList()}),(t,i)=>{const Y=L("van-pull-refresh");return n(),r("div",Ht,[w(Ct,{bannerList:I.value,expressList:T.value,hotList:x.value,hotListBottom:P.value},{default:F(()=>[w(je,{onHandleTo:y,ref:(b,A)=>{A.noticeRef=b,a.value=b}},null,512)]),_:1},8,["bannerList","expressList","hotList","hotListBottom"]),e("div",Mt,[w(Je),w(qt,{onHandleTo:y,ref:(b,A)=>{A.activeHandleRef=b,g.value=b}},null,512),w(Y,{modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=b=>p.value=b),onRefresh:f,class:"min-h-screen"},{default:F(()=>[w(ke,{isSearchPage:!1,ref:(b,A)=>{A.listRef=b,_.value=b},onScroll:c,activeInfo:d($)},null,8,["activeInfo"])]),_:1},8,["modelValue"])]),w(Nt),d(l)?(n(),r("div",{key:0,class:"overlay",onClick:i[1]||(i[1]=b=>d(o)(!1)),"z-index":"9999"},[e("div",Gt,[e("div",{onClick:q(j,["stop"])},Jt,8,Kt)])])):S("",!0)])}}const Xt=B({...Qt,setup:Wt}),ks=N(Xt,[["__scopeId","data-v-79a3b8c6"]]);export{ks as default};
