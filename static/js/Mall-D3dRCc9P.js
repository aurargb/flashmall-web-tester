import{_ as N,y as B,r as m,E as I,F as i,G as n,I as E,J as z,K as V,a2 as R,N as F,H as e,R as O,O as x,P as d,a4 as q,Q as L,Y as M,Z as G,l as K,D as J,be as H,a0 as oe,X as ne,$ as le,z as Q,x as W,a3 as ae,bB as ce,bL as re,bE as ie,bC as ue,n as de,bc as pe,bd as fe,bh as me}from"./vendor-Ba70TIw4.js";import{_ as he}from"./adpng-DGFmXgre.js";import{a as ve,r as _e,q as ge,d as ye,e as X}from"./mall-B7Basf_X.js";import{v as ee,e as we,W as xe,g as te}from"./index-DiRx6UeW.js";import{l as be,a as Z}from"./shop-CeqcS6K2.js";import{c as $e}from"./category-QNgdQFvQ.js";import{R as ke}from"./Recommends-B_DJiXaH.js";import{C as Le}from"./ChangeRegionPop-yUEqIma_.js";import{a as Ce}from"./festivalActivities-D2J2XWoL.js";import{c as Ie}from"./user-YzTePvUF.js";import{u as Re}from"./useShowActiveInfo-DHdwpoT9.js";import"./GoodsList-6U1SQ170.js";import"./buy-cart-m4kq4Bzt.js";import"./goods-BVwS8oFG.js";import"./ShopMaskTips-pbij6JLk.js";import"./GoodsPrice-DfhrvFCM.js";import"./MCOIN-Bodfn-v1.js";import"./WaterFull-DpMa4XQe.js";/* empty css                                                              */import"./cart-DpaReRSb.js";import"./ImgBoutiqueLable-BMjuak4g.js";import"./RatioBox-hb9qVZol.js";import"./MetaKeyTag-DSSf9cM_.js";import"./useOrderStatus-eiwKm5Dv.js";import"./rangking-soiwLY3n.js";const Se=""+new URL("../images/msg_icon_type_2-CRHOGGKj.png",import.meta.url).href,Fe=""+new URL("../images/msg_icon_type_1-llTYHMvU.png",import.meta.url).href,Te=""+new URL("../images/msg_close_dark-CMJSlgeW.png",import.meta.url).href,Be=s=>(M("data-v-5c448efa"),s=s(),G(),s),Ue={key:0,class:"notification-bg-2 w-full h-[30px] absolute -bottom-[4px] px-0 left-0"},Ae=["onClick"],Pe={key:0,src:Se,class:"w-3.5 h-auto flex-shrink-0"},De={key:1,src:Fe,class:"w-3.5 h-auto flex-shrink-0"},Oe={class:"flex-1 text-sm"},Ee=["onClick"],ze=Be(()=>e("img",{src:Te,class:"w-4 h-auto"},null,-1)),Ve=[ze],qe=["onClick"],Ne=B({emits:["handleTo"],setup(s,{expose:_,emit:a}){const{currentLocale:p}=ee(),h=m([]),l=(u,f)=>{ve({id:f.id}),h.value.splice(u,1)},o=()=>{_e(),h.value.length=0};return _({_queryRemindList:async()=>{var f;const u=await ge({page:1,size:999});if(u.success){const g=(f=u.data)==null?void 0:f.filter(C=>C.readFlag===0);h.value=g||[]}}}),(u,f)=>{var S;const g=I("van-notice-bar"),C=I("van-swipe-cell");return n(),i("div",{class:O(["notification-container w-full font-normal",{"mb-1":((S=h.value)==null?void 0:S.length)>1}])},[(n(!0),i(E,null,z(h.value,(c,T)=>(n(),i("div",{key:c.id,class:"relative"},[T==0?(n(),V(C,{key:0,class:"h-[38px]"},{right:F(()=>[e("div",{class:O([{"bg-[#FED53D]":c.type===2,"bg-[#FFA123]":c.type===1},"h-[30px] flex items-center ml-1 px-4 rounded-[10px]"]),onClick:q(o,["stop"])},L(u.$t("mall.Clear")),11,qe)]),default:F(()=>[h.value&&h.value.length>1?(n(),i("div",Ue,[e("div",{class:O(["h-full rounded-[10px] box-shadow",{"bg-[#FED53D]":c.type===1,"bg-[#FFA123]":c.type===2}])},null,2)])):R("",!0),e("div",{class:O([{"bg-[#FED53D]":c.type===2,"bg-[#FFA123]":c.type===1},"notification-bg box-shadow flex items-center gap-2 h-[30px] rounded-[10px] px-2 relative"]),onClick:q(w=>a("handleTo","/orderMessage"+("?type="+c.type)+(c.category?"&category="+c.category:"")),["stop"])},[c.type===2?(n(),i("img",Pe)):c.type===1?(n(),i("img",De)):R("",!0),e("div",Oe,[x(g,{scrollable:"",color:c.type===2?"#222221":"#ffffff",background:"rgba(0,0,0,0)",text:c[`content${d(be)[d(p)]||"En"}`]},null,8,["color","text"])]),e("div",{class:"flex-shrink-0 w-5 ml-auto",onClick:q(w=>l(T,c),["stop"])},Ve,8,Ee)],10,Ae)]),_:2},1024)):R("",!0)]))),128))],2)}}}),je=N(Ne,[["__scopeId","data-v-5c448efa"]]),He={key:0,class:"px-4 mt-2.5 py-4 bg-white rounded-xl category-box"},Me={class:"container flex overflow-x-auto"},Ge=["onClick"],Ke={class:"text-sm text-[#2e2008] opacity-60 text-center whitespace-nowrap mt-1"},Ye=B({setup(s){const{currentLocale:_}=ee(),a=K(),p=m([]),h=async()=>{const o=await $e();o.success&&(p.value=o.data||[])},l=o=>{a.push(`/search?classId=${o.id}&className=${o[`${Z[_.value]||"en"}Name`]}`)};return J(()=>{h()}),(o,$)=>{const u=I("VanImage");return p.value.length?(n(),i("div",He,[e("div",Me,[(n(!0),i(E,null,z(p.value,f=>(n(),i("div",{style:{flex:"0 0 18.18%"},class:"flex flex-col",key:f.name,onClick:g=>l(f)},[x(u,{src:f.logo,class:"mx-auto aspect-square w-11 h-11",alt:""},null,8,["src"]),e("span",Ke,L(f[`${d(Z)[d(_)]||"en"}Name`]),1)],8,Ge))),128))])])):R("",!0)}}}),Je=N(Ye,[["__scopeId","data-v-3e00afd0"]]),Qe=""+new URL("../images/hot-2BuvZhRT.png",import.meta.url).href,We=""+new URL("../images/triangle-BeVcU1o4.png",import.meta.url).href,Xe=s=>(M("data-v-7a74119a"),s=s(),G(),s),Ze={class:"flex items-center gap-1 py-1 text-sm leading-normal"},et=["src"],tt=Xe(()=>e("img",{src:We,class:"w-2 h-auto ml-1.5"},null,-1)),st=["onClick"],ot={class:"flex items-center"},nt=["src"],lt=B({props:{showIcon:{type:Boolean,default:!1},showOverlay:{type:Boolean,default:!0},showDownIcon:{type:Boolean,default:!0}},emits:["showPopRegin","showOverlay","showMallOverlay"],setup(s,{expose:_,emit:a}){const p=s,h=m(""),{regionStore:l}=we(),[o,$]=H(!1),[u,f]=H(!1),g=()=>{$(!1),a("showOverlay",!1)},C=w=>{h.value=w,w!==l.country&&(f(!1),$(!0))},S=()=>{f(!1)},c=w=>{f(w),a("showOverlay",w)};function T(){p.showDownIcon&&c(!0)}return _({closePop:S}),(w,k)=>{const A=I("van-icon"),P=I("VanPopup");return n(),i("div",null,[e("div",{class:"change-region-tools flex items-center bg-[#F0F0F0] px-3 rounded-full",onClick:T},[e("div",Ze,[e("img",{src:d(xe)(`mall/${d(l).country}-flag.svg`),class:"w-4 h-auto"},null,8,et),e("span",null,L(d(l).country),1)]),tt]),d(u)?(n(),V(P,{key:0,teleport:"body",overlay:s.showOverlay,show:d(u),"onUpdate:show":k[0]||(k[0]=y=>le(u)?u.value=y:null),position:"top",style:ne([{background:"transparent",width:"100%","max-width":"375px",left:"50%",transform:"translateX(-50%)",display:"flex"},{justifyContent:s.showIcon?"flex-end":"flex-start"}]),onClickOverlay:k[1]||(k[1]=y=>c(!1)),onClick:k[2]||(k[2]=y=>c(!1))},{default:F(()=>[e("div",{class:O(["min-w-[150px] sm:mt-[40%] mt-20 bg-[#f9f9f9] rounded-xl box-1 px-4",s.showIcon?"mr-2.5":"ml-2.5"])},[(n(!0),i(E,null,z(d(l).countries,y=>(n(),i("div",{key:y.key,class:O(["font-Silom py-1 leading-10 border-b text-sm border-solid border-[#D9D9D9] flex justify-between items-center",{"text-[#FEA021]":d(l).country===y.key}]),onClick:j=>C(y.key)},[e("div",ot,[e("img",{class:"w-5 h-auto mr-1.5",src:y.icon,alt:""},null,8,nt),oe(" "+L(y.text),1)]),d(l).country===y.key?(n(),V(A,{key:0,name:"success",alt:""})):R("",!0)],10,st))),128))],2)]),_:1},8,["overlay","show","style"])):R("",!0),x(Le,{currentKey:h.value,show:d(o),onClose:g},null,8,["currentKey","show"])])}}}),at=N(lt,[["__scopeId","data-v-7a74119a"]]),se=s=>(M("data-v-df20a652"),s=s(),G(),s),ct={class:"z-[889] overflow-visible relative min-h-[12rem] my-bg"},rt={class:"search-tools-bar w-full pt-3.5 bg-white flex-center-bw"},it={class:"search-input flex items-center justify-between w-full h-8 bg-[#F0F0F0] rounded-full relative z-[999]"},ut={class:"flex items-center flex-1 gap-1 px-2 text-sm h-9 text-black/30"},dt={class:"line-clamp-1"},pt=["src"],ft={class:"search-tools-bar px-2.5 bg-white"},mt={class:"flex py-2.5 items-center gap-1.5 overflow-x-auto text-xs"},ht={class:"flex items-center flex-shrink-0 mr-[15px]"},vt=se(()=>e("img",{src:Qe,class:"w-2.5 h-auto mr-[2px]"},null,-1)),_t={class:"text-black font-normal ml-1"},gt=["onClick"],yt={class:"text-[#666]"},wt={class:"swiper-container px-2.5 mt-2.5 relative z-10"},xt={class:"swiper-slide-wrapper"},bt=["src"],$t=se(()=>e("div",{class:"swiper-pagination"},null,-1)),kt=B({props:{bannerList:{default:[]},expressList:{default:[]},hotList:{default:[]},hotListBottom:{default:[]}},setup(s,{expose:_}){const a=s,p=K(),h=t=>{p.push(t)},l=m(null);Q(()=>a.bannerList,()=>{de(()=>{var t;l.value&&((t=l.value)==null||t.$el.swiper.autoplay.start())})}),W(()=>a.bannerList[o.value]),W(()=>g.value==="left"?o.value>=a.bannerList.length-1?a.bannerList[0].colorCode:a.bannerList[o.value+1].colorCode:g.value==="right"?o.value===0?a.bannerList[a.bannerList.length-1].colorCode:a.bannerList[o.value-1].colorCode:null);const o=m(0),$=()=>{var t,r;u.value=0,g.value=null,o.value!==((t=l.value)==null?void 0:t.$el.swiper.realIndex)&&(o.value=(r=l.value)==null?void 0:r.$el.swiper.realIndex)},u=m(0),f=m(-1),g=m(null),C=(t,r)=>{if((r===0||r===1)&&(u.value=0,g.value=null),g.value){f.value=r;return}if(u.value===0){u.value=r;return}f.value=r,f.value<u.value?g.value="right":g.value="left",u.value=r},[S,c]=H(!1),T=t=>{t&&window.open(t,"_self")},w=m(null),k=m(null),A=t=>{c(t)};Q(()=>S.value,t=>{const r=document.getElementById("fm-page");t?r.style.overflow="hidden":r.style.overflow="auto"});const P=()=>{w.value.closePop()},y=()=>{P(),c(!1)},j=()=>{const t=k.value&&k.value.popShow?p.currentRoute.value.fullPath:"/search";p.push(t)};return _({closeRegionPop:P}),(t,r)=>{const Y=I("van-icon"),b=I("van-swipe-item"),U=I("van-swipe");return n(),i("div",ct,[d(S)?(n(),i("div",{key:0,class:"my-overlay",onClick:y,onTouchmove:r[0]||(r[0]=q(()=>{},["prevent"]))},null,32)):R("",!0),e("div",rt,[x(at,{class:"relative z-[999] ml-2.5",ref:(v,D)=>{D.region=v,w.value=v},onShowOverlay:A,showOverlay:!1},null,512),e("div",{onClick:j,class:"relative ml-4 mr-2.5 flex-1"},[e("div",it,[e("div",ut,[x(Y,{size:"16",name:"search",class:"font-bold text-black/30"}),x(U,{vertical:"",class:"leading-9 h-9",autoplay:5e3,touchable:!1,"show-indicators":!1},{default:F(()=>[(n(!0),i(E,null,z(s.hotList,v=>(n(),V(b,{key:v.id},{default:F(()=>[e("div",dt,[v.iconUrl?(n(),i("img",{key:0,class:"inline-block w-auto h-5 mr-1 align-middle",src:v.iconUrl},null,8,pt)):R("",!0),e("span",null,L(v.keyword),1)])]),_:2},1024))),128))]),_:1})])])])]),e("div",ft,[e("div",mt,[e("div",ht,[vt,e("span",_t,L(t.$t("mall.hotSearch")),1)]),(n(!0),i(E,null,z(s.hotListBottom,v=>(n(),i("div",{class:"hot-search-keyword bg-[#F5F5F5] px-2.5 py-0.5 rounded-xl flex-shrink-0",key:v.id,onClick:D=>h("/search?keyword="+v.keyword)},[e("span",yt,L(v.keyword),1)],8,gt))),128))])]),e("div",wt,[ae(t.$slots,"default",{},void 0,!0),s.bannerList&&s.bannerList.length>0?(n(),V(d(ue),{key:0,ref:(v,D)=>{D.swiperRef=v,l.value=v},modules:[d(re),d(ie)],autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},loop:!0,onSlideChange:$,onProgress:C,class:"swiper-container"},{default:F(()=>[(n(!0),i(E,null,z(s.bannerList,(v,D)=>(n(),V(d(ce),{key:v.id,virtualIndex:D,onClick:Zt=>T(v.linkUrl)},{default:F(()=>[e("div",xt,[e("img",{class:"w-full h-full rounded-md object-cover",src:v.imageUrl||d(te)("images/mall/mall_banner.png")},null,8,bt)])]),_:2},1032,["virtualIndex","onClick"]))),128)),$t]),_:1},8,["modules"])):R("",!0)])])}}}),Lt=N(kt,[["__scopeId","data-v-df20a652"]]),Ct=""+new URL("../images/new-text-DlOd6omk.png",import.meta.url).href,It=""+new URL("../images/gift-icon-ChLUyQdL.png",import.meta.url).href,Rt=""+new URL("../images/activity-text-fIwfO6KT.png",import.meta.url).href,St=""+new URL("../images/active-icon-C76y8UVY.png",import.meta.url).href,Ft={class:"flex gap-3 my-3"},Tt={class:"flex flex-col justify-between h-14"},Bt=e("img",{src:Ct,class:"w-8"},null,-1),Ut={class:"text-[#999] text-xxs"},At={class:"text-xs text-primary"},Pt=e("div",{class:"h-full flex flex-col justify-end"},[e("img",{src:It,class:"h-auto w-9"})],-1),Dt={class:"flex flex-col justify-between h-14"},Ot=e("img",{src:Rt,class:"w-8"},null,-1),Et={class:"text-[#999] text-xxs"},zt={class:"text-xs text-primary"},Vt=e("img",{src:St,class:"w-[75px] h-[72px]"},null,-1),qt=B({emits:["handleTo"],setup(s,{expose:_,emit:a}){K();const p=m({fmGeneralActivity:{name:"",startTime:"",endTime:""}});return(async()=>{const l={generalActivityId:1};try{const o=await Ce(l);o.code===1&&(p.value=o.data)}catch(o){console.error("获取活动信息失败:",o)}})(),_({actInfo:p}),(l,o)=>(n(),i("div",Ft,[e("div",{onClick:o[0]||(o[0]=$=>a("handleTo","/activity-goods?type=1")),class:"flex items-center justify-between flex-1 px-4 py-3 bg-white rounded-xl"},[e("div",Tt,[Bt,e("div",Ut,L(l.$t("mall.New Arrivals")),1),e("div",At,L(l.$t("avtivity.check")),1)]),Pt]),e("div",{onClick:o[1]||(o[1]=$=>a("handleTo","/activity-goods?type=2")),class:"flex items-center justify-between flex-1 px-4 pr-[6px] py-[3px] bg-white rounded-xl"},[e("div",Dt,[Ot,e("div",Et,L(l.$t("mall.Hot sale products")),1),e("div",zt,L(l.$t("avtivity.check")),1)]),Vt])]))}}),Nt=B({props:{limit:null},setup(s){const _=m(0),a=()=>{document.getElementById("fm-page").scrollTo({top:0,left:0,behavior:"smooth"})};return J(()=>{document.getElementById("fm-page").addEventListener("scroll",()=>{_.value=document.getElementById("fm-page").scrollTop})}),(p,h)=>{const l=I("van-icon");return pe((n(),i("div",{ref:(o,$)=>{$.toTop=o},onClick:a,class:"fixed flex shadow-1 items-center justify-center z-50 w-8 h-8 bg-white rounded-full right-2.5 bottom-[20%]"},[x(l,{name:"back-top",class:"text-xl"})],512)),[[fe,_.value>(s.limit||200)]])}}}),jt=s=>(M("data-v-79a3b8c6"),s=s(),G(),s),Ht={class:"w-full bg-fixed bg-[#F8F8F8] linear-mall h-full overflow-y-scroll"},Mt={class:"relative px-2.5 overflow-hidden"},Gt={class:"ad-img-container"},Kt=["onClick"],Yt=jt(()=>e("img",{src:he,alt:"广告"},null,-1)),Jt=[Yt],Qt=B({name:"Mall"});function Wt(s){const _=m(null),a=m(null),p=m(!1),h=K(),[l,o]=H(!1),{showActiveInfo:$,getShowActiveInfo:u}=Re(),f=async()=>{var t,r;p.value=!0,await((t=_.value)==null?void 0:t.onRefresh()),(r=a.value)==null||r._queryRemindList(),p.value=!1},g=m(null),C=m([{id:1,imageUrl:te("images/mall/mall_banner.png"),linkUrl:null}]),S=async()=>{const t=await ye({locationType:1});t.success&&(C.value=t.data)},c=()=>{console.log("scroll")},T=m([]),w=m([]),k=async()=>{const t=await X({page:1,size:50,type:2});t.success&&(w.value=t.data||[])},A=m([]),P=async()=>{const t=await X({page:1,size:50,type:1});t.success&&(A.value=t.data||[])},y=t=>{h.push(t)},j=()=>{o(!1),h.push("/520-home")};return J(()=>{S(),k(),P(),u()}),me(()=>{var t;Ie(),(t=a.value)==null||t._queryRemindList()}),(t,r)=>{const Y=I("van-pull-refresh");return n(),i("div",Ht,[x(Lt,{bannerList:C.value,expressList:T.value,hotList:w.value,hotListBottom:A.value},{default:F(()=>[x(je,{onHandleTo:y,ref:(b,U)=>{U.noticeRef=b,a.value=b}},null,512)]),_:1},8,["bannerList","expressList","hotList","hotListBottom"]),e("div",Mt,[x(Je),x(qt,{onHandleTo:y,ref:(b,U)=>{U.activeHandleRef=b,g.value=b}},null,512),x(Y,{modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=b=>p.value=b),onRefresh:f,class:"min-h-screen"},{default:F(()=>[x(ke,{isSearchPage:!1,ref:(b,U)=>{U.listRef=b,_.value=b},onScroll:c,activeInfo:d($)},null,8,["activeInfo"])]),_:1},8,["modelValue"])]),x(Nt),d(l)?(n(),i("div",{key:0,class:"overlay",onClick:r[1]||(r[1]=b=>d(o)(!1)),"z-index":"9999"},[e("div",Gt,[e("div",{onClick:q(j,["stop"])},Jt,8,Kt)])])):R("",!0)])}}const Xt=B({...Qt,setup:Wt}),Ls=N(Xt,[["__scopeId","data-v-79a3b8c6"]]);export{Ls as default};
