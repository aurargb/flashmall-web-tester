import{aH as Z,x as W,g as K,d as V}from"./index-DiRx6UeW.js";import{_ as S,y as T,r as L,x as q,E as b,F as h,G as u,H as a,K as P,Q as v,P as w,I as B,J as E,R as F,n as G,O as $,X as J,N as A,Y as M,Z as N,w as X,bf as ee,be as te,D as se,a2 as oe,a0 as R,$ as ae,bH as D,bx as ne}from"./vendor-Ba70TIw4.js";import{g as le}from"./otc-B7eWfgeg.js";const Te=""+new URL("../images/Preview-icon-BAYfYu2U.png",import.meta.url).href,Be=""+new URL("../images/top-up-CvoSjQbt.png",import.meta.url).href,ie={class:"text-[#2E2008]"},re={class:"flex justify-between text-xs opacity-60"},ce=["onClick"],pe=T({props:{type:null,list:null},emits:["onClick"],setup(n,{expose:y,emit:f}){const i=n,r=L(null),x=()=>{G(()=>{r.value.scrollTop=r.value.scrollHeight})},C=q(()=>(i.list.slice(0,30)||[]).sort((c,_)=>_.price-c.price)),t=c=>{f("onClick",c)};return y({scrollToBottom:x}),(c,_)=>{const g=b("van-skeleton");return u(),h("div",ie,[a("div",re,[a("span",null,v(c.$t("mall.price")),1),a("span",null,v(c.$t("ecology.quantity")),1)]),w(Z)||!(w(C)||[]).length?(u(),P(g,{key:0,class:"mt-3",row:5})):(u(),h("div",{key:1,ref:(l,o)=>{o.scrollContainer=l,r.value=l},class:"mt-1 w-full overflow-auto list-box min-h-[8rem] max-h-[8rem]"},[(u(!0),h(B,null,E(w(C),l=>(u(),h("div",{class:"flex justify-between mb-1 text-xs",key:l.price,onClick:o=>t(l)},[a("span",{class:F({"text-[#FF507A]":n.type=="sell","text-[#14D8A9]":n.type=="buy"})},v(l.price),3),a("span",null,v(w(W)(l.amount)),1)],8,ce))),128))],512))])}}}),Ee=S(pe,[["__scopeId","data-v-7d981700"]]),Fe=""+new URL("../images/left-active-CvQBxcYP.svg",import.meta.url).href,Oe=""+new URL("../images/right-TgmWZf45.svg",import.meta.url).href,Ue=""+new URL("../images/left-CSppCxIr.svg",import.meta.url).href,Ve=""+new URL("../images/right-active-B_cYrZYT.svg",import.meta.url).href,Re=""+new URL("../images/add-wallet-D8_1TaQ3.svg",import.meta.url).href,ue=n=>(M("data-v-559fd3e0"),n=n(),N(),n),de={class:"relative"},me=["onClick"],ve=ue(()=>a("div",{class:"relative z-50 custom-button"},null,-1)),xe=T({emits:["change"],setup(n,{expose:y,emit:f}){const i=L(0),r=t=>{f("change",t)},x=t=>{i.value=t*25,f("change",i.value)};return y({resetValue:()=>{i.value=0}}),(t,c)=>{const _=b("van-slider");return u(),h("div",de,[(u(),h(B,null,E(5,(g,l)=>a("div",{class:F(["breakpoint",{"breakpoint-avtive":i.value>=l*25}]),key:g,style:J(`left: ${l*25}%`),onClick:o=>x(l)},null,14,me)),64)),$(_,{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=g=>i.value=g),onChange:r,"active-color":"#FEA021"},{button:A(()=>[ve]),_:1},8,["modelValue"])])}}}),De=S(xe,[["__scopeId","data-v-559fd3e0"]]),z=n=>(M("data-v-b58f191e"),n=n(),N(),n),he={class:"flex items-center justify-between mb-4 px-[15px]"},fe={class:"flex items-end"},_e=["src"],ge={class:"text-[#2E2008]"},ye=z(()=>a("div",{class:"text-lg"},"MAI/MUSD",-1)),be={class:"text-[0.65rem] opacity-60"},we=z(()=>a("div",{id:"line-echarts"},null,-1)),Ce={class:"my-2.5 flex pl-[15px]"},ke=["onClick"],Ie={class:"px-[20px] flex text-white pt-4 border-top"},Le=T({props:{show:{type:Boolean},lastPrice:null},emits:["close","success","setOtcType"],setup(n,{emit:y}){const f=s=>{y("setOtcType",s),i()},i=()=>{y("close")},{t:r}=X(),x=L(5),C=L([{label:"1d",type:5},{label:"3d",type:6},{label:"7d",type:7}]),t=L([]),c="rgba(20, 216, 169, 1)",_="rgba(255, 80, 122, 1)",g="rgba(20, 216, 169, .4)",l="rgba(255, 80, 122, .4)",o=ee({option:{tooltip:{trigger:"axis",axisPointer:{type:"cross"},position:function(s,p,k,I,d){const m={top:10};return m[["left","right"][+(s[0]<d.viewSize[0]/2)]]=30,m}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},grid:[{left:"5%",right:"10%",top:10,height:"80%"},{left:"5%",right:"10%",top:"66%",height:"35%"}],xAxis:[{type:"category",data:[],show:!1,splitLine:{show:!1},axisPointer:{show:!0,type:"none",label:{show:!1}}},{gridIndex:1,type:"category",data:[],show:!1,splitLine:{show:!1},axisPointer:{show:!0,type:"none",label:{show:!1}}}],yAxis:[{scale:!0,type:"value",smooth:!0,position:"right",max:null,min:null,splitLine:{show:!1},axisLabel:{show:!0},axisLine:{lineStyle:{color:"rgba(46, 32, 8, .4)"}},axisPointer:{lineStyle:{color:"#FFD81F"},label:{color:"#2E2008",backgroundColor:"#FFD81F"}}},{gridIndex:1,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisPointer:{show:!0,type:"none",label:{show:!1}}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:50,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:50,end:100,height:"20px"}],series:[{name:r("nft.trend"),type:"candlestick",data:[],itemStyle:{color:c,color0:_,borderColor:c,borderColor0:_},dimensions:["-",r("nft.openPrice"),r("nft.closePrice"),r("nft.lowestPrice"),r("nft.highestPrice")],encode:{x:0,y:[1,2,3,4],tooltip:[1,2,3,4]},barWidth:"90%"},{name:r("common.Trading volume"),type:"bar",xAxisIndex:1,yAxisIndex:1,data:[],itemStyle:{color:s=>{if(s.data[2]===1)return l;if(s.data[2]===-1)return g}},barWidth:"90%"}]},myChart:null}),Y=async()=>{U(!0);const s=await le(x.value);if(U(!1),!s.success)return;t.value=s.data.reverse();const p=[],k=[],I=[];let d=null,m=null;for(let e=0;e<t.value.length;e++)p.push(t.value[e].createTime),m=m?Math.max(m,Math.max(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max)):Math.max(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max),d=d?Math.min(d,Math.min(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max)):Math.min(t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max),k.push([t.value[e].open,t.value[e].close,t.value[e].min,t.value[e].max]),I.push([e,t.value[e].total||0,t.value[e].open>t.value[e].close?1:-1]);o.option.yAxis[0].max=V((m*100+.1*100)/100,1),o.option.yAxis[0].min=V(d-.1>0?(d*100-.1*100)/100:0,1),o.option.xAxis[0].data=p,o.option.xAxis[1].data=p,o.option.series[0].data=k,o.option.series[1].data=I},O=async()=>{await Y();const s=document.getElementById("line-echarts");s&&(D(s).dispose(),o.myChart=ne(D(s)),o.myChart.setOption(o.option,!0))},j=async()=>{o.option.xAxis[0].data=[],o.option.xAxis[1].data=[],o.option.series[0].data=[],await O(),o.myChart.setOption(o.option,!0)},[H,U]=te(!1),Q=s=>{x.value!==s.type&&(x.value=s.type,j())};return se(()=>{O()}),(s,p)=>{const k=b("van-loading"),I=b("van-icon"),d=b("VanButton"),m=b("van-popup");return u(),P(m,{show:n.show,"onUpdate:show":p[2]||(p[2]=e=>ae(show)?show.value=e:null),position:"bottom",round:"",style:{padding:"15px 0 25px"},onClose:i},{default:A(()=>[w(H)?(u(),P(k,{key:0,class:"opacity-60 absolute top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]",size:"32px"})):oe("",!0),a("div",he,[a("div",fe,[a("img",{class:"w-8 h-8 mr-2.5 mb-1",src:w(K)("images/tokens/MCOIN.png"),alt:"",srcset:""},null,8,_e),a("div",ge,[ye,a("div",be,v(s.$t("otc.latestprice"))+" "+v(n.lastPrice),1)])]),$(I,{name:"cross",size:"22px",onClick:i})]),we,a("div",Ce,[(u(!0),h(B,null,E(C.value,e=>(u(),h("div",{class:"py-1.5 px-2.5 mr-2.5 bg-[#ECECEC] text-[#2E2008] rounded",key:e.type,onClick:$e=>Q(e)},[a("span",{class:F({"opacity-30":x.value!==e.type})},v(e.label),3)],8,ke))),128))]),a("div",Ie,[$(d,{class:"font-semibold h-[38px] w-full px-4 rounded-xl text-base mr-4",style:{"background-color":"#14d8a9"},onClick:p[0]||(p[0]=e=>f("buy"))},{default:A(()=>[R(v(s.$t("otc.buyIn")),1)]),_:1}),$(d,{class:"font-semibold h-[38px] w-full px-4 rounded-xl text-base ml-4",style:{"background-color":"#ff507a"},onClick:p[1]||(p[1]=e=>f("sell"))},{default:A(()=>[R(v(s.$t("otc.sellOut")),1)]),_:1})])]),_:1},8,["show"])}}}),Me=S(Le,[["__scopeId","data-v-b58f191e"]]);export{Me as C,De as O,Fe as _,Oe as a,Ue as b,Ve as c,Re as d,Ee as e,Te as f,Be as g};
