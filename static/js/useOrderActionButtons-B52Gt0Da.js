import{e as m}from"./index-Bsb9uxb4.js";import{a7 as l}from"./vendor-Ba70TIw4.js";import{P as S}from"./flashSale-DDyqLyYN.js";import{u as o,b as p}from"./useRefund-Dpqhghzq.js";import{a as I,g as d,i as y,b as R}from"./orderTime-DGNmmu3-.js";const{accountStore:T}=m(),b=e=>{var f,a,i;if(!e)return!1;const t=Date.now()/1e3,{refundInfo:n,status:s,merchantsConfirm:u}=e;return l.isEmpty(n)||((f=n.phase)==null?void 0:f.code)==999?s===2&&(!u||I(u,t)>0):n&&((a=n.phase)==null?void 0:a.code)!=999&&!n.interveneStatus?s===2&&n.refundStatus==1?!0:s===2&&n.refundStatus==6?!1:s===2&&n.refundStatus==3:n&&((i=n.phase)==null?void 0:i.code)!=999&&n.interveneStatus?s===2&&n.interveneStatus==3:!1},A=(e,t)=>{if(!e||e.status!==2||e.payType===S.STORE_CARD||e.refundInfo||v(e)||b(e)||!y(e.chainCreateTime,e.confirmLimit))return!1;const n=e.expressTime,s=t||Date.now()/1e3;return!(n&&s&&R(n,s)<=0)},O=e=>e?e.status===1&&!p(e)&&e.payType!==S.STORE_CARD:!1,_=e=>{var t;return e?e.status===2&&((t=e.refundInfo)==null?void 0:t.refundStatus)==1:!1},P=e=>{var t;return e?l.isEmpty(e.refundInfo)||((t=e.refundInfo.phase)==null?void 0:t.code)==999?!T.isOnlyView&&e.status===2&&e.payType!==S.STORE_CARD&&!e.merchantsConfirm:(e.refundInfo&&e.refundInfo.refundStatus==1,!1):!1},N=e=>{var t;return e?l.isEmpty(e.refundInfo)||((t=e.refundInfo.phase)==null?void 0:t.code)==999?e.status===2:e.refundInfo?o(e,"USER_APPLY_REFUND","visible"):!1:!1},w=e=>e?e.status===2&&e.refundInfo&&e.refundInfo.refundStatus==1:!1,v=e=>{var t,n,s;return e?e.refundInfo&&((t=e.refundInfo)==null?void 0:t.refundType)==2&&((n=e.refundInfo)==null?void 0:n.refundStatus)==2&&((s=e.refundInfo)==null?void 0:s.returnStatus)==1:!1},L=e=>{var t;return e&&e.refundInfo&&((t=e.refundInfo.phase)==null?void 0:t.code)!=999?o(e,"MERCHANT_RECEIVE","visible"):!1},x=e=>e?!!(e.refundInfo&&e.refundInfo.refundStatus==2&&e.refundInfo.returnStatus==2||o(e,"MERCHANT_APPLY_INTERVENTION","visible")):!1,F=(e,t)=>{var u;if(!e)return{visible:!1,disabled:!0};let n=!1,s=!0;return e.refundInfo&&((u=e.refundInfo.phase)==null?void 0:u.code)!=999&&(n=o(e,"USER_FORCE_CANCEL","visible")),d(e.expressTime,e.confirmLimit,t)>0&&(s=!1),{visible:n,disabled:s}},U=e=>{const t=e||{};if(!("id"in t)||!t.id)return!1;const n=t.refundInfo||{};if(l.isEmpty(n))return!1;const{refundType:s,refundStatus:u,interveneStatus:f,merchantInterveneStatus:a,returnStatus:i,refundTriggerType:c}=n,r=t.status;return(r===1||r===2)&&(s===1||s===2)&&u===3&&f===2&&!a&&(s===2&&i===1||s===1)||r===1&&s===1&&!u&&!f&&!a&&!i&&!c},G=e=>{if(!e)return!1;const t=e||{},n=e.refundInfo||{};if(l.isEmpty(n))return!1;const s=t.status,{refundType:u,refundStatus:f,interveneStatus:a,merchantInterveneStatus:i,returnStatus:c,refundTriggerType:r}=n;return s===1&&u===1&&!f&&!a&&!i&&!c&&!r},H=e=>{var t;return e?e.refundInfo&&e.refundInfo.interveneStatus==1&&((t=e.refundInfo.phase)==null?void 0:t.code)!=999:!1},M=e=>{var n,s;if(!e)return!1;const t=((n=e.refundInfo)==null?void 0:n.interveneStatus)||null;return e.refundInfo&&((s=e.refundInfo.phase)==null?void 0:s.code)!=999?[1,2,3].includes(t):!1};export{P as a,L as b,x as c,U as d,b as e,v as f,A as g,O as h,N as i,F as j,w as k,M as l,G as m,H as n,_ as u};
