import{y as I,w as X,r as p,x as L,be as G,D as Z,F as x,G as d,H as e,O as u,a0 as D,Q as s,P as l,I as H,a2 as Q,aj as re,_ as ue,l as pe,a1 as de,bf as ce,E as A,N as F,$ as q,J,R as me,X as K,K as ve,Y as xe,Z as fe}from"./vendor-Ba70TIw4.js";import{e as he,J as _e,K as ge,l as E,g as ye,L as Te}from"./index-DiRx6UeW.js";import{D as be}from"./DescriptionPop-DhCoCQnv.js";import{_ as we}from"./date-picker-CsyBoWhh.js";import{_ as $e}from"./arrow-bottom-D85vJawE.js";import{_ as Fe}from"./DefaultPage-CnAxfjxg.js";import{B as De}from"./BackIcon-DkqwcD_b.js";const ke=""+new URL("../images/tips-orange-ZP3zHPJX.svg",import.meta.url).href,Ce={class:"releaseStatistics w-full h-fit p-[0.75rem] pr-[0.25rem] bg-[#FFF] rounded-[12px]"},Se=e("img",{class:"w-[15px] h-[15px] ml-[4px] text-[#A6A6A6]",src:ke},null,-1),Ae={class:"mt-[1px] flex items-end"},Pe={class:"text-[#000] font-BebasNeue text-[20px] font-normal leading-[24px]"},Re={class:"ml-[5px] mb-[3px] text-[#000] font-Puhui text-[10px] font-normal leading-[14px]"},Be={key:0,class:"text-[#A6A6A6] font-Puhui text-[12px] font-normal leading-[18px] flex flex-wrap"},Ve={class:"mx-[4px] text-[#FF8812]"},Le={class:"mx-[4px] text-[#FF8812]"},ze={key:1,class:"mt-[6px]"},Me=I({setup(g){const{contributesStore:i}=he(),{t:o}=X(),y=p(!1),f=L(()=>i.releaseData||{remainTotal:0,remainTemp:0}),[k,T]=G(!1),C=L(()=>[{url:"help/release/title",text:o("releaseTime.Free release times"),subText:o("releaseTime.Free release times tips")},{url:"help/release/step1",text:`1.${o("releaseTime.Monthly Gift")}`,subText:o("releaseTime.Monthly Gift tips")},{url:"help/release/step2",text:`2.${o("releaseTime.Shopping Order")}`,subText:o("releaseTime.Shopping Order tips")},{url:"help/release/step3",text:`3.${o("releaseTime.confirm the receipt of goods")}`,subText:o("releaseTime.confirm the receipt of goods tips")},{url:"help/release/step4",text:`4.${o("releaseTime.Consumer Reviews")}`,subText:o("releaseTime.Consumer Reviews tips")},{url:"help/release/step5",text:`5.${o("releaseTime.Gift points")}`,subText:o("releaseTime.Gift points tips")},{url:"help/release/step6",text:`6.${o("releaseTime.Offline payment")}`,subText:o("releaseTime.Offline payment tips")}]),_=async()=>{y.value=!0,await i.getNaturalReleaseTimes(),y.value=!1},b=L(()=>{let r=new Date,h=r.getFullYear(),w=r.getMonth();return _e(new Date(h,w+1,1).getTime()-1e3,"MM-DD HH:mm:ss")});return Z(()=>{_()}),(r,h)=>(d(),x("div",Ce,[e("div",{class:"w-fit text-[#A6A6A6] font-Puhui text-[12px] font-normal leading-[18px] flex items-center",onClick:h[0]||(h[0]=w=>l(T)(!0))},[D(s(r.$t("home.currentFreeTimes"))+" ",1),Se]),y.value?(d(),x("div",ze,[u(l(re),{size:"24"})])):(d(),x(H,{key:0},[e("div",Ae,[e("div",Pe,s(l(f).remainTotal||0),1),e("div",Re,s(r.$t("common.times")),1)]),l(f).remainTemp&&l(f).remainTemp>0?(d(),x("div",Be,[D(s(r.$t("home.among"))+" ",1),e("span",Ve,s(l(f).remainTemp||0),1),D(" "+s(r.$t("home.releaseTimesWill"))+" ",1),e("span",Le,s(l(b)),1),D(" "+s(r.$t("common.expire")),1)])):Q("",!0)],64)),u(be,{show:l(k),list:l(C),onClose:h[1]||(h[1]=w=>l(T)(!1))},null,8,["show","list"])]))}}),W=g=>(xe("data-v-ef2a856a"),g=g(),fe(),g),Ee={class:"p-[0.75rem] flex justify-between items-center z-10 transition-all"},Ge={class:"text-[#222] text-[14px] font-semibold leading-[20px]"},He=W(()=>e("img",{class:"ml-[0.25rem] w-[16px] h-[16px]",src:we,alt:"",srcset:""},null,-1)),Ie={class:"text-[#222] text-[14px] font-semibold leading-[20px]"},Ne=W(()=>e("div",null,[e("img",{class:"ml-[0.25rem] w-[16px] h-[16px]",src:$e,alt:"",srcset:""})],-1)),Oe={class:"h-[40vh] px-5"},Ue={class:"pt-[18px] pb-[10px] font-semibold text-base text-center"},Ye={class:"overflow-y-auto",style:{height:"calc(40vh - 52px - 78px)"}},je={class:"flex flex-wrap"},qe=["onClick"],Je={class:"p-[16px] flex justify-between gap-6 fixed bottom-0 left-0 right-0 bg-white"},Ke={class:"px-[0.75rem]"},Xe={class:"bg-white rounded-xl p-[12px]"},Ze={class:"rounded-lg border border-solid border-b4"},Qe={class:"bg-[#FFF8EC] p-[8px] rounded-t-lg text-xs grid grid-cols-[3fr_2fr_1fr] gap-3 text-b1 font-semibold"},We={class:"text-left"},et={class:"flex-1"},tt={class:"text-right"},st={class:"text-left"},lt={class:"flex-1"},at={class:"text-right"},ot=I({setup(g){const{t:i}=X(),o=pe(),y=de(),[f,k]=G(!1),[T,C]=G(!1),_=p(!1),b=p(!1),r=p(0),h=p(10),w=p(0),c=p([]),ee=p(new Date),m=p(null),P=p(new Date),$=ce({type:{text:i("order.All types"),value:null}}),v=p({text:i("order.All types"),value:null}),z=L(()=>[{text:i("releaseTime.payOrder"),value:20},{text:i("releaseTime.confirmGoods"),value:30},{text:i("releaseTime.consumerReviews"),value:40},{text:i("releaseTime.offlinePayment"),value:50},{text:i("releaseTime.giftPoints"),value:60},{text:i("releaseTime.naturalRelease"),value:100},{text:i("releaseTime.expired"),value:110},{text:i("releaseTime.onlineSystemGift"),value:10}]),te=async()=>{var B,V,S;const t=v.value.value,n=await Te({page:r.value,size:h.value,type:v.value.value,begin:m.value?E(new Date(m.value.getFullYear(),m.value.getMonth(),1).getTime()):null,end:m.value?E(new Date(m.value.getFullYear(),m.value.getMonth()+1,0).getTime()):null});t==v.value.value&&(w.value=(B=n.data)==null?void 0:B.total,c.value=r.value===1?(V=n.data)==null?void 0:V.records:c.value.concat((S=n.data)==null?void 0:S.records),c.value&&c.value.length>=w.value?b.value=!0:c.value||(c.value=[],b.value=!0))},se=t=>{m.value=t,P.value=t,k(!1),R()},le=()=>{m.value=null,P.value=null,k(!1),R()},ae=()=>{o.replace({path:"/releaseTimeDetail",query:{type:$.type.value}}),v.value=$.type,R(),C(!1)},oe=()=>{o.replace({path:"/releaseTimeDetail"}),v.value={text:i("order.All types"),value:null},$.type={...v.value},R(),C(!1)},N=()=>{const t=document.querySelector(".releaseStatistics");return(t==null?void 0:t.clientHeight)||0},M=async()=>{_.value=!0,r.value+=1,await te(),_.value=!1},R=()=>{r.value=0,b.value=!1,c.value=[],M()};return Z(()=>{var t;v.value.value=y.query.type||null,v.value.text=(t=z.value.find(n=>n.value==y.query.type))==null?void 0:t.text,$.type={...v.value},M()}),(t,n)=>{var U;const B=A("van-sticky"),V=A("van-datetime-picker"),S=A("VanPopup"),O=A("VanButton"),ne=A("van-list");return d(),x("div",{style:K(`min-height: calc(100vh - 50px - ${N()}px);`)},[u(B,null,{default:F(()=>[e("div",Ee,[e("div",{class:"flex items-center",onClick:n[0]||(n[0]=a=>l(k)(!0))},[e("div",Ge,s(m.value?l(ge)(m.value):t.$t("order.All time")),1),He]),e("div",{class:"flex items-center",onClick:n[1]||(n[1]=a=>l(C)(!0))},[e("div",Ie,s(v.value.text||t.$t("order.All types")),1),Ne])])]),_:1}),u(S,{round:"",show:l(f),"onUpdate:show":n[3]||(n[3]=a=>q(f)?f.value=a:null),position:"bottom",style:{height:"40vh"}},{default:F(()=>[u(V,{modelValue:P.value,"onUpdate:modelValue":n[2]||(n[2]=a=>P.value=a),type:"year-month",title:"",onConfirm:se,onCancel:le,"cancel-button-text":l(i)("common.reset"),"max-date":ee.value},null,8,["modelValue","cancel-button-text","max-date"])]),_:1},8,["show"]),u(S,{round:"",show:l(T),"onUpdate:show":n[4]||(n[4]=a=>q(T)?T.value=a:null),position:"bottom",style:{height:"40vh"}},{default:F(()=>[e("div",Oe,[e("div",Ue,s(t.$t("common.typeFilter")),1),e("div",Ye,[e("div",je,[(d(!0),x(H,null,J(l(z),a=>(d(),x("div",{class:"min-w-[50%] p-[8px]",key:a.value,onClick:Y=>l($).type=a},[e("div",{class:me(["w-full bg-[#F5F5F5] py-1.5 px-4 rounded-md text-sm text-center",{"bg-[#FED73A]":l($).type.value==a.value}])},s(a.text),3)],8,qe))),128))])]),e("div",Je,[u(O,{class:"bg-[#f5f5f5] text-default rounded-md h-[46px] flex-1 border-0",onClick:oe},{default:F(()=>[D(s(t.$t("common.reset")),1)]),_:1}),u(O,{class:"rounded-md text-default h-[46px] flex-1 bg-btnOrBg border-0",onClick:ae},{default:F(()=>[D(s(t.$t("common.confirm")),1)]),_:1})])])]),_:1},8,["show"]),e("div",Ke,[e("div",Xe,[e("div",Ze,[e("div",Qe,[e("div",We,s(t.$t("releaseTime.time")),1),e("div",et,s(t.$t("releaseTime.type")),1),e("div",tt,s(t.$t("releaseTime.change")),1)]),e("div",{class:"overflow-y-scroll",style:K(`max-height: calc(100vh - 50px - ${N()}px - 100px - 16px);`)},[u(ne,{loading:_.value,"onUpdate:loading":n[5]||(n[5]=a=>_.value=a),"loading-text":t.$t("common.loading"),finished:b.value,"immediate-check":!1,"finished-text":"",onLoad:M},{default:F(()=>[(d(!0),x(H,null,J(c.value,(a,Y)=>{var j;return d(),x("div",{key:Y,class:"p-2 grid grid-cols-[3fr_2fr_1fr] gap-3 text-xs leading-[18px] text-b2 border-t border-solid border-b4"},[e("div",st,s(a.createTime?l(E)(a.createTime):"-"),1),e("div",lt,s(((j=l(z).find(ie=>ie.value==a.type))==null?void 0:j.text)||""),1),e("div",at,s(a.times.toString().includes("-")?"":"+")+s(a.times),1)])}),128))]),_:1},8,["loading","loading-text","finished"]),!_.value&&((U=c.value)==null?void 0:U.length)<=0?(d(),ve(Fe,{key:0,class:"pb-6",needTextTop:!0,url:l(ye)("images/evaluate_empty.png"),title:t.$t("common.No data yet"),top:"2rem",iconSize:"145px"},null,8,["url","title"])):Q("",!0)],4)])])])],4)}}}),nt=ue(ot,[["__scopeId","data-v-ef2a856a"]]),it={class:"font-Puhui bg-gradient-to-b from-[#FED73A] from-0% to-[#F2F0EF] to-50%"},rt={class:"sticky top-0 sm:top-0 z-50 w-full h-[50px] px-[1rem] bg-[#FED73A] flex items-center"},ut={class:"relative w-full"},pt={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] flex justify-center items-center"},dt={class:"text-[#2E2008] text-[18px] not-italic font-bold leading-[26px] text-center"},ct={class:"px-[0.75rem]"},yt=I({setup(g){return(i,o)=>(d(),x("div",it,[e("div",rt,[e("div",ut,[u(De),e("div",pt,[e("span",dt,s(i.$t("home.releaseTimesDetail")),1)])])]),e("div",ct,[u(Me)]),e("div",null,[u(nt)])]))}});export{yt as default};
