import{u as ne,b as ae,h as le,Z as ie,$ as ce,i as re,q as j,f as ue,a0 as de}from"./index-DiRx6UeW.js";import{_ as me}from"./close-BkqxFSX4.js";import{_ as z,y as A,x as T,E as B,K as k,G as a,N as p,H as e,Q as o,O as C,P as i,bo as pe,a0 as m,$ as Z,Y as K,Z as q,r as _,be as H,D as G,F as d,a2 as U,I as $,w as ve,R as O,X as fe,T as he}from"./vendor-Ba70TIw4.js";import{P as we}from"./PopHeader-CPr5VpPI.js";import{_ as ge}from"./TokenBalance-D2dbq6-u.js";import{l as _e,u as be}from"./level-CXYyT9QD.js";const Q=t=>(K("data-v-4b3dd004"),t=t(),q(),t),xe=Q(()=>e("div",{class:"-mb-[28px] flex justify-center"},[e("div",{class:"relative"},[e("img",{src:ie,class:"w-[105px] h-auto"}),e("img",{src:ce,class:"w-[26px] z-50 absolute right-[23px] bottom-[20px]"})])],-1)),ye={class:"w-[85vw] max-w-[375px] px-5 py-6 bg-popBg rounded-[10px] z-10 relative"},$e={class:"pb-5 flex-center-bw"},ke={class:"flex-start"},Ce=Q(()=>e("img",{src:me,class:"w-[10px] h-[10px]",alt:""},null,-1)),Ie=[Ce],Ve={class:"mt-5 text-xs text-center"},Le={class:"text-default opacity-60"},Be={class:"font-bold"},Me=A({props:{show:{type:Boolean}},emits:["close"],setup(t,{emit:r}){const{show:v}=t,{getCurrentAccount:I}=ne(),f=T(()=>window.location.origin+"/#/home?invite="+I());return(h,l)=>{const b=B("VanButton"),x=B("VanPopup");return a(),k(x,{show:t.show,"onUpdate:show":l[2]||(l[2]=w=>Z(v)?v.value=w:null),style:{background:"transparent"},onClickOverlay:l[3]||(l[3]=()=>r("close"))},{default:p(()=>[xe,e("div",ye,[e("div",$e,[e("div",ke,[e("span",null,o(h.$t("home.inviteRegister")),1)]),e("div",{onClick:l[0]||(l[0]=w=>r("close"))},Ie)]),e("div",null,[C(pe,{value:i(f),size:200,level:"H",class:"mx-auto"},null,8,["value"]),e("div",Ve,[e("div",Le,[e("span",Be,o(h.$t("home.inviteLink")),1),e("span",null,o(i(ae)(i(f),"...",15,4)),1)]),C(b,{class:"btn-orange w-[150px] h-10 text-white mt-5",onClick:l[1]||(l[1]=w=>i(le)(i(f)))},{default:p(()=>[m(o(h.$t("common.copy")),1)]),_:1})])])])]),_:1},8,["show"])}}}),gt=z(Me,[["__scopeId","data-v-4b3dd004"]]),Fe=""+new URL("../images/level_header-B9ZxcF0Z.svg",import.meta.url).href,Pe=""+new URL("../images/level_tip-CloZu7KO.svg",import.meta.url).href,Y=""+new URL("../images/yes-Dk7kJjiI.svg",import.meta.url).href,J=""+new URL("../images/no-KmhKFik8.svg",import.meta.url).href,D=""+new URL("../images/level_bottom-BIkYLWqS.svg",import.meta.url).href,Re={class:"gap-4 mt-3 font-semibold text-white flex-center"},Se={class:"whitespace-nowrap"},Ue={class:"flex items-center justify-center mt-2 text-xs opacity-50"},ze=A({props:{openFee:null,buyMember:null},emits:["close","getIsVip"],setup(t,{emit:r}){const v=t,I=re(),f=_(0),[h,l]=H(!1),b=T(()=>f.value>v.openFee),x=async()=>{const n=await(await I).allowance(j.flashMall);f.value=n.result},w=async()=>{l(!0),(await(await I).approve(j.flashMall)).success&&await x(),l(!1)},M=async()=>{l(!0);const n=await v.buyMember();l(!1),n.success&&r("getIsVip")},y=async()=>{await x()};return G(()=>{y()}),(n,V)=>{const g=B("VanButton");return a(),d($,null,[C(we,{onClick:V[0]||(V[0]=u=>r("close"))},{default:p(()=>[m(o(n.$t("home.openVip")),1)]),_:1}),e("div",Re,[i(b)?U("",!0):(a(),k(g,{key:0,class:"btn-orange btn-shadow h-[35px] min-w-[120px] px-4",loading:i(h),onClick:w},{default:p(()=>[m(o(n.$t("assets.auth")),1)]),_:1},8,["loading"])),C(g,{class:"btn-orange btn-shadow h-[35px] min-w-[120px] px-4",loading:i(h),disabled:!i(b),onClick:M},{default:p(()=>[e("span",Se,o(n.$t("home.toOpenVip",{fee:t.openFee})),1)]),_:1},8,["loading","disabled"])]),e("div",Ue,[m(" MCOIN"+o(n.$t("assets.balance"))+" ",1),C(ge,{token:"MCOIN",tokenName:!1})])],64)}}}),Ae=z(ze,[["__scopeId","data-v-4112668c"]]),P=t=>(K("data-v-a9031166"),t=t(),q(),t),Te={class:"relative"},Ee=P(()=>e("div",{class:"bg-popBg h-8 absolute bottom-[-2px] w-full"},null,-1)),Ne=P(()=>e("img",{class:"relative z-10 w-full",src:Fe,alt:"",srcset:""},null,-1)),je={class:"mx-1 font-bold"},Oe=P(()=>e("div",{class:"z-10 mr-1"},[e("img",{class:"w-4 h-4 align-middle",src:Pe,alt:""})],-1)),De={class:"px-5 bg-popBg"},Ze={class:"pt-5 flex-center-bw"},Ke={class:"text-gray3"},qe={class:"font-bold text-[#2E2008]"},He={class:"mt-5 flex-center-bw"},Ge={class:"text-gray3"},Qe={class:"font-bold text-[#2E2008]"},Ye={class:"mt-5 flex-center-bw text-gray3"},Je={class:"font-bold text-[#2E2008]"},We=m(" 已满级 "),Xe={class:"mt-5 flex-center-bw"},et={class:"text-gray3"},tt={class:"font-bold text-primary"},st={key:0,src:Y,class:"w-[14px]",alt:""},ot={key:1,src:J,class:"w-[14px]",alt:""},nt={class:"mt-5 flex-center-bw"},at={class:"text-gray3"},lt={class:"font-bold text-primary"},it={key:0,src:Y,class:"w-[14px]",alt:""},ct={key:1,src:J,class:"w-[14px]",alt:""},rt={class:"relative z-10 flex justify-center items-center gap-4 pb-6 mt-6"},ut=P(()=>e("div",{class:"absolute bottom-0 flex justify-center"},[e("img",{class:"w-32 mr-2.5",src:D,alt:"",srcset:""}),e("img",{class:"w-32 ml-2.5",src:D,alt:"",srcset:""})],-1)),dt=A({props:{show:{type:Boolean},userInfo:null},emits:["close","invite","handleTo"],setup(t,{emit:r}){const{show:v,userInfo:I}=t,{t:f}=ve(),{members:h,memberPrice:l,buyMember:b,memberLevels:x}=ue(),[w,M]=H(!1),y=_(!1),n=_(0),V=_(0),g=_([]),u=_({id:1,one:1e5,two:1e5}),F=_({address:"",agentAmount:.001,majorAmount:.002}),E=async()=>{y.value=await h()},W=async()=>{V.value=+await l()},X=async()=>{n.value=await x()},ee=async()=>{const s=await _e();s.success&&(g.value=s.data||[],te())},te=()=>{if(n.value<=0)return;const s=g.value.length,c=n.value||0;u.value=c>=s+1?g.value[s-1]:g.value[c-1]},se=async()=>{const s=await be();s.success&&(F.value=s.data)},R=T(()=>{const s=g.value.length;return(n.value||0)>=s+1}),N=async()=>{if(!F.value.address)return;M(!0);const s=await de(F.value.address,F.value.agentAmount.toString());M(!1),s.success&&(he(f("home.upgradeTips")),setTimeout(()=>{r("close")},1500))};return G(async()=>{E(),W(),se(),await X(),ee()}),(s,c)=>{const S=B("VanButton"),oe=B("VanPopup");return a(),k(oe,{show:t.show,"onUpdate:show":c[3]||(c[3]=L=>Z(v)?v.value=L:null),round:"",onClose:c[4]||(c[4]=L=>r("close")),style:fe(y.value?"background-color: rgba(0, 0, 0, 0)":"")},{default:p(()=>[e("div",{class:O(["w-[85vw] max-w-[375px]",{"px-5 py-6":!y.value}])},[y.value?(a(),d($,{key:0},[e("div",Te,[Ee,Ne,e("div",{onClick:c[0]||(c[0]=L=>r("handleTo","/levelPointsDetail")),class:"absolute bottom-3 left-4 z-50 level-bg justify-center h-9 min-w-[8rem] text-base text-white flex items-center"},[e("span",null,o(s.$t("home.level")),1),e("span",je,"V"+o(n.value||0),1),Oe])]),e("div",De,[e("div",null,[e("div",Ze,[e("div",Ke,o(s.$t("home.score")),1),e("div",qe,o(t.userInfo.contribute||0),1)]),e("div",He,[e("div",Ge,o(s.$t("home.deductScore")),1),e("div",Qe,o(t.userInfo.totalContribute||0),1)]),e("div",Ye,[m(o(s.$t("home.nextLevel"))+" ",1),e("span",Je,[i(R)?(a(),d($,{key:1},[We],64)):(a(),d($,{key:0},[m(" V"+o((n.value||0)+1),1)],64))])]),n.value>0&&!i(R)?(a(),d($,{key:0},[e("div",Xe,[e("div",et,o(s.$t("home.keepScore",{num:u.value.one||0})),1),e("div",tt,[(+t.userInfo.contribute||0)>=+u.value.one?(a(),d("img",st)):(a(),d("img",ot))])]),e("div",nt,[e("div",at,o(s.$t("home.deductScore",{num:u.value.two||0})),1),e("div",lt,[(+t.userInfo.totalContribute||0)>=+u.value.two?(a(),d("img",it)):(a(),d("img",ct))])])],64)):U("",!0)]),e("div",rt,[C(S,{class:"w-full font-bold text-white btn h-9 btn-orange",round:"",onClick:c[1]||(c[1]=L=>r("invite"))},{default:p(()=>[m(o(s.$t("home.inviteRegister")),1)]),_:1}),i(R)?U("",!0):(a(),d($,{key:0},[n.value>0?(a(),k(S,{key:0,class:O(["w-full font-bold text-white h-9",+u.value.one>+t.userInfo.contribute||+u.value.two>+t.userInfo.totalContribute?"btn-disabled":"btn-orange"]),disabled:+u.value.one>+t.userInfo.contribute||+u.value.two>+t.userInfo.totalContribute,loading:i(w),onClick:N},{default:p(()=>[m(o(s.$t("home.upgrade")),1)]),_:1},8,["disabled","class","loading"])):(a(),k(S,{key:1,class:"w-full font-bold text-white h-9 btn-orange",loading:i(w),onClick:N},{default:p(()=>[m(o(s.$t("home.upgrade")),1)]),_:1},8,["loading"]))],64))]),ut])],64)):(a(),k(Ae,{key:1,openFee:V.value,buyMember:i(b),onClose:c[2]||(c[2]=L=>r("close")),onGetIsVip:E},null,8,["openFee","buyMember"]))],2)]),_:1},8,["show","style"])}}}),_t=z(dt,[["__scopeId","data-v-a9031166"]]);export{gt as I,_t as L};
