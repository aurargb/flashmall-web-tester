import{_ as z,y as S,w as Q,r as g,x as U,z as R,E as f,K as B,G as m,N as u,H as a,O as p,Q as h,F as w,J as H,R as q,P as b,I as J,a0 as I,a2 as C,aj as K,X as W,l as X,a1 as Y,bc as Z,bp as ee,bQ as te,Y as le,Z as ae,T as F,aH as P}from"./vendor-Ba70TIw4.js";import{B as oe}from"./BackIcon-DkqwcD_b.js";import{a as se,g as ne,F as j,E as L}from"./enums-DlE-aiss.js";import{e as ie,bF as pe,bG as ue}from"./index-Bsb9uxb4.js";const de=""+new URL("../images/arrow-down-s-fill-CVQBTz9N.svg",import.meta.url).href,re={class:"fee-type-popup"},ce={class:"fee-type-popup__header px-4 py-4 text-lg text-center font-normal"},me={class:"fee-type-popup__footer px-4 py-4"},he=S({props:{modelValue:{type:Boolean},type:null},emits:["update:modelValue","confirm"],setup(o,{emit:T}){const s=o,{t:n}=Q(),l=g(s.modelValue),d=g(s.type),v=U(()=>se(n));R(()=>s.modelValue,r=>{l.value=r,r&&s.type&&(d.value=s.type)}),R(()=>l.value,r=>{T("update:modelValue",r)}),R(()=>s.type,r=>{d.value=r});const k=()=>{T("confirm",d.value),l.value=!1};return(r,x)=>{const t=f("van-radio"),y=f("van-cell"),$=f("van-cell-group"),D=f("van-radio-group"),M=f("van-button"),E=f("van-popup");return m(),B(E,{show:l.value,"onUpdate:show":x[1]||(x[1]=c=>l.value=c),position:"bottom",round:"",closeable:"","close-icon-position":"top-right"},{default:u(()=>[a("div",re,[a("div",ce,h(r.$t("shop.shippingTemplate.billingRule")),1),p(D,{modelValue:d.value,"onUpdate:modelValue":x[0]||(x[0]=c=>d.value=c),class:"fee-type-popup__content px-4"},{default:u(()=>[p($,null,{default:u(()=>[(m(!0),w(J,null,H(b(v),c=>(m(),B(y,{key:c.value,clickable:"",onClick:e=>d.value=c.value},{title:u(()=>[a("span",{class:q(["label-option opacity-100",[d.value==c.value?"text-[#FF8812] font-semibold font-sm":"text-b1 text-xs font-normal"]])},h(c.label),3)]),"right-icon":u(()=>[p(t,{name:c.value,"checked-color":"#FF8812"},null,8,["name"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["modelValue"]),a("div",me,[p(M,{block:"",round:"",type:"primary",onClick:k,class:"bg-yellow border-none text-base font-semibold"},{default:u(()=>[I(h(r.$t("common.confirm")),1)]),_:1})])])]),_:1},8,["show"])}}}),fe=z(he,[["__scopeId","data-v-0804e0d4"]]),ve=["checked","disabled"],ge=S({props:{modelValue:{type:[Boolean,String,Number],required:!0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},activeColor:{type:String,default:"#FF8812"},inactiveColor:{type:String,default:"#dcdee0"},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1}},emits:["update:modelValue"],setup(o,{emit:T}){const s=o,n=U(()=>s.modelValue===s.activeValue),l=()=>{const d=n.value?s.inactiveValue:s.activeValue;T("update:modelValue",d)};return(d,v)=>(m(),w("div",{class:q(["custom-switch",{"custom-switch--disabled":o.disabled||o.loading}]),onClick:v[0]||(v[0]=k=>!o.disabled&&!o.loading&&l())},[a("input",{type:"checkbox",checked:b(n),disabled:o.disabled||o.loading,class:"switch-checkbox"},null,8,ve),a("div",{class:"switch-background",style:W({backgroundColor:b(n)?o.activeColor:o.inactiveColor})},[a("div",{class:q(["switch-node",{"is-checked":b(n)}])},[o.loading?(m(),B(b(K),{key:0,class:"loading",size:"10px"})):C("",!0)],2)],4)],2))}}),be=z(ge,[["__scopeId","data-v-3d464496"]]),N=o=>(le("data-v-b0e5ffec"),o=o(),ae(),o),ye={class:"header-bar sticky top-0 flex font-normal justify-center text-sm items-center h-[44px] px-2.5 z-50"},_e={class:"absolute left-2.5 flex items-center gap-1 -translate-y-1/2 top-1/2"},we={class:"text-lg font-bold"},Te=N(()=>a("div",{class:"font-semibold"},null,-1)),xe={class:"h-[calc(100vh-44px-78px)] sticky top-[44px] px-3 pt-3 overflow-y-auto"},ke=N(()=>a("div",{class:"w-[93%] ml-auto mr-auto border-b border-b-[#D9D9D9]",role:"separator"},null,-1)),Ve=N(()=>a("div",{class:"w-[93%] ml-auto mr-auto border-b border-b-[#D9D9D9]",role:"separator"},null,-1)),Fe={key:0,class:"text-sm font-normal whitespace-nowrap"},$e={key:1,class:"text-sm text-b3 font-normal whitespace-nowrap"},Ce=N(()=>a("img",{src:de,class:"w-4 h-4 ml-[2px]"},null,-1)),Be={key:0,class:"w-full h-[78px] bg-white rounded-xl mt-3 py-4 px-3 flex flex-row justify-between items-center flex-nowrap"},Se={class:"text-sm font-normal text-b2 whitespace-nowrap"},Ne=["placeholder","disabled"],De={class:"text-sm font-normal text-b2 whitespace-nowrap"},Ee={key:0,class:"btn-bg flex justify-end h-[78px] py-4 px-3 z-[1] gap-3"},Re=S({name:"ShippingTemplate"});function qe(o){const T=g(!1),s=X(),n=Y(),{t:l}=Q(),{accountStore:d}=ie(),v=g(!1),k=g(null),r=()=>{y.value||(k.value=t.value.type,v.value=!0)},x=e=>{t.value.type=e||null,v.value=!1},t=g({id:null,name:null,type:null,defaultFlag:!1,threshold:0,cost:0}),y=g(!1),$=g({"Bound products cannot be deleted":l("shop.shippingTemplate.delete failed by bounded"),"There is currently a free shipping rule, which applies to all products in the store":l("shop.shippingTemplate.delete failed by repeated")}),D=U(()=>ne(l));(()=>{const e=n.query.mode;(e===L.EDIT||e===L.VIEW)&&(t.value={id:Number(n.query.id)||null,name:n.query.name||null,type:Number(n.query.type)||null,defaultFlag:n.query.defaultFlag==="true",threshold:Number(n.query.threshold)||0,cost:Number(n.query.cost)||0})})();const E=async()=>{if(!t.value.name){F.fail(l("shop.shippingTemplate.templateNameRequired"));return}if(!t.value.type){F.fail(l("shop.shippingTemplate.selectBillingRule"));return}t.value.type===j.FREE&&!t.value.threshold&&(t.value.threshold=0),T.value=!0,t.value.id||(t.value.id=null);const e=await ue(t.value);if(!e.success){console.log(e);const i=$.value[e.failMsg]||l("shop.shippingTemplate.submitFailed");P.alert({message:i,confirmButtonText:l("common.confirm-2"),confirmButtonColor:"#FEA021"});return}F.success(l("shop.shippingTemplate.submitSuccess")),s.back()},c=async()=>{const e={id:t.value.id};if(!e.id){F.fail(l("shop.shippingTemplate.selectTemplateToDelete"));return}const i=await pe(e);if(!i.success){console.log(i);const V=$.value[i.failMsg]||l("shop.shippingTemplate.deleteFailed");P.alert({message:V,confirmButtonText:l("common.confirm-2"),confirmButtonColor:"#FEA021"});return}F.success(l("shop.shippingTemplate.deleteSuccess")),setTimeout(()=>{s.back()},600)};return(e,i)=>{const V=f("van-field"),A=f("van-cell-group"),G=f("van-form"),O=f("VanButton");return m(),w("div",null,[a("section",ye,[a("div",_e,[p(oe,null,{default:u(()=>[a("span",we,h(e.$t("shop.shippingTemplate.title")),1)]),_:1})]),Te]),a("section",xe,[p(G,{class:"main-form"},{default:u(()=>[p(A,{inset:""},{default:u(()=>[p(V,{class:"text-right py-4 font-normal",modelValue:t.value.name,"onUpdate:modelValue":i[0]||(i[0]=_=>t.value.name=_),name:e.$t("shop.shippingTemplate.templateName"),label:e.$t("shop.shippingTemplate.templateName"),placeholder:e.$t("shop.shippingTemplate.templateNameLimit"),maxlength:"15",disabled:y.value,"input-align":"right","label-align":"left",rules:[{required:!0,message:e.$t("shop.shippingTemplate.templateNameRequired")}]},null,8,["modelValue","name","label","placeholder","disabled","rules"]),ke,p(V,{name:"switch",label:e.$t("shop.shippingTemplate.setDefault"),"input-align":"right","label-align":"left",disabled:y.value},{input:u(()=>[p(be,{modelValue:t.value.defaultFlag,"onUpdate:modelValue":i[1]||(i[1]=_=>t.value.defaultFlag=_),disabled:y.value},null,8,["modelValue","disabled"])]),_:1},8,["label","disabled"]),Ve,p(V,{clickable:"",name:e.$t("shop.shippingTemplate.billingRule"),label:e.$t("shop.shippingTemplate.billingRule"),"input-align":"right","label-align":"left",onClick:r,rules:[{required:!0,message:e.$t("shop.shippingTemplate.selectBillingRule")}]},{input:u(()=>[t.value.type?(m(),w("span",Fe,h(b(D)[t.value.type]),1)):(m(),w("span",$e,h(e.$t("shop.shippingTemplate.selectBillingRule")),1)),Ce]),_:1},8,["name","label","rules"])]),_:1})]),_:1}),p(te,{name:"fade"},{default:u(()=>[t.value.type===b(j).FREE?(m(),w("div",Be,[a("p",Se,h(e.$t("shop.shippingTemplate.actualPayment")),1),Z(a("input",{class:"mx-2 text-center h-[36px] w-[71%] bg-[#F5F5F5] rounded-md",type:"number",placeholder:e.$t("common.pleaseInput"),"onUpdate:modelValue":i[2]||(i[2]=_=>t.value.threshold=_),disabled:y.value},null,8,Ne),[[ee,t.value.threshold]]),a("p",De,h(e.$t("shop.shippingTemplate.freeShipping")),1)])):C("",!0)]),_:1})]),b(d).isOnlyView?C("",!0):(m(),w("div",Ee,[t.value.id?(m(),B(O,{key:0,class:"del-btn font-semibold h-[46px] w-full px-4 rounded-md text-base bg-white text-b2",onClick:c},{default:u(()=>[I(h(e.$t("common.delete")),1)]),_:1})):C("",!0),p(O,{class:"font-semibold h-[46px] w-full px-4 rounded-md text-base bg-yellow",onClick:E},{default:u(()=>[I(h(e.$t("common.save")),1)]),_:1})])),p(fe,{modelValue:v.value,"onUpdate:modelValue":i[3]||(i[3]=_=>v.value=_),type:k.value,onConfirm:x},null,8,["modelValue","type"])])}}const Ie=S({...Re,setup:qe}),Pe=z(Ie,[["__scopeId","data-v-b0e5ffec"]]);export{Pe as default};
