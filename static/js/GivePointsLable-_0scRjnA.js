import{y as I,E as V,F as i,G as a,H as S,X as $,Q as y,I as A,J as F,bc as H,K as L,R as M,bd as J,_ as N,r as d,U as K,x as T,O as C,N as P,Y as z,P as l,bz as Q,bA as U,bs as W,bB as R,bC as D,w as X,B as x,D as Y}from"./vendor-BlU_hoYl.js";import{g as Z,f as ee,d as _}from"./index-Wb-6_0W_.js";import{P as te}from"./flashSale-DDyqLyYN.js";import{S as G}from"./shop-CeqcS6K2.js";const se={class:"bg-white mt-2"},ae={class:"px-4 py-3 text-base text-b1 font-semibold text-left"},oe={key:0,class:"flex flex-col"},be=I({props:{text:null,imgs:null},setup(t){return(e,o)=>{const p=V("VanImage");return a(),i("div",se,[S("div",ae,y(e.$t("goods.product details")),1),t.imgs.length>0?(a(),i("div",oe,[(a(!0),i(A,null,F(t.imgs,n=>H((a(),L(p,{key:n,src:n,class:"w-full h-auto",fit:"cover"},null,8,["src"])),[[J,n]])),128))])):$("",!0),t.text?(a(),i("div",{key:1,class:M(["px-4 whitespace-pre-wrap break-all text-b1",t.imgs.length?"py-3":"pb-3"])},y(t.text),3)):$("",!0)])}}}),xe="/static/images/sale-people-B9j4520v.svg",ne={class:"relative"},ie={key:0,class:"absolute top-0 left-0 w-full h-full bg-black/50 z-[2]"},le={class:"w-full h-full flex items-center justify-center"},re={class:"text-white text-2xl font-bold"},ce=I({props:{imgs:null,indicatorColor:{default:"#fba923"},bgColor:{default:"#FFE3BD"},stock:{default:1},goodsTypes:{default:""}},setup(t,{expose:e}){const o=t,p=g=>{o.imgs.length===1&&!o.imgs[0]||W({images:o.imgs,closeable:!0,showIndex:!0,startPosition:g})},n=d(),m=d([R,D]),r={clickable:!0},B={delay:3e3,disableOnInteraction:!0,pauseOnMouseEnter:!0},{height:v}=K(),k=T(()=>v.value/4*3),s=d(!1),c=()=>{console.log("imgLoad"),!s.value&&(s.value=!0)},u=d(!1),h=()=>{console.log("swiperResize"),!u.value&&(u.value=!0)},f=d(null),E=g=>{f.value=g},O=()=>{m.value=[R]},j=()=>{m.value=[R,D]};return e({pauseSwiper:()=>{f.value&&f.value.autoplay.stop()},resumeSwiper:()=>{f.value&&f.value.autoplay.start()}}),(g,fe)=>{const q=V("VanImage");return a(),i("div",ne,[t.stock===0&&t.goodsTypes!=2?(a(),i("div",ie,[S("div",le,[S("div",re," ·"+y(g.$t("goods.Sold Out"))+"· ",1)])])):$("",!0),C(l(U),{ref:(w,b)=>{b.swiperGoodsRef=w,n.value=w},class:"w-full","auto-height":!0,modules:m.value,pagination:r,autoplay:B,onSwiper:E,onMouseenter:O,onMouseleave:j,onResize:h},{default:P(()=>[(a(!0),i(A,null,F(t.imgs,(w,b)=>(a(),L(l(Q),{onClick:ge=>p(b),key:b},{default:P(()=>[S("div",{class:"w-full object-contain overflow-hidden",style:z(`max-height: ${l(k)}px;`)},[C(q,{src:w||l(Z)("images/activity/boutique/squre_empty.png"),onLoad:c,class:"object-cover w-full",style:z(`${s.value?"":"min-height: 300px;"}${u.value?"":"opacity: 0;"}`),fit:"contain"},null,8,["src","style"])],4)]),_:2},1032,["onClick"]))),128))]),_:1},8,["modules"])])}}}),_e=N(ce,[["__scopeId","data-v-0e5d9563"]]),ue={class:"ship-type-tag text-[#ff8812] leading-normal"},de=I({props:{deliveryType:null},setup(t){return(e,o)=>(a(),i("div",ue,y(t.deliveryType===1?e.$t("common.send"):e.$t("goods.Buying agent")),1))}}),Se=N(de,[["__scopeId","data-v-4d64d943"]]),Te=I({props:{goods:{default:{}},activityGoods:{default:{}},showType:{default:"all"}},setup(t){const e=t,{t:o}=X(),{tradeContributeSelfRate:p}=ee(),n=d(0),m=async()=>{n.value=await p()},r=T(()=>{var h;if(e.goods.payType===2)return 0;const s=((h=e==null?void 0:e.activityGoods)==null?void 0:h.activityPrice)||0,c=+new x(new x(e.goods.discountRatio).div(100)).times(s||e.goods.price).times(n.value),u=+new x(new x(e.goods.balanceDiscountRatio).div(100)).times(s||e.goods.price).times(n.value);return e.showType==="balance"?c:e.showType==="points"?u:e.showType==="all"?e.goods.type===G.SD?c:Math.max(c,u):0}),B=T(()=>{var s;return e.showType==="balance"?o("mall.Givepoints",{num:_(r.value,2)}):e.showType==="points"?o("mall.Balance payment gift",{num:_(r.value,2)}):e.showType==="all"?e.goods.type!==G.SD&&+e.goods.balanceDiscountRatio>+((s=e.goods)==null?void 0:s.discountRatio)?o("mall.Balance payment gift",{num:_(r.value,2)}):o("mall.Givepoints",{num:_(r.value,2)}):""}),v=T(()=>{var s;return e.showType==="balance"?!1:e.showType==="points"?!0:e.showType==="all"?!(!e.goods.boutiqueFlag&&e.goods.payType!==te.POINTS_AVAILABLE||+e.goods.discountRatio>+((s=e.goods)==null?void 0:s.balanceDiscountRatio)):!1}),k=async()=>{m()};return Y(()=>{k()}),(s,c)=>(a(),i("div",{class:M([{"bg-red-002":l(v),"bg-primary ":!l(v)},"px-1 leading-normal text-white rounded text-xxs whitespace-nowrap"])},y(l(B)),3))}});export{_e as G,Se as S,be as _,xe as a,Te as b};
