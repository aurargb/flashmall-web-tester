import{_ as Q,y as H,E as R,K as D,G as o,N as z,H as t,F as r,J as ee,a1 as A,Q as u,P as l,I as te,O as g,Z as se,$ as oe,X as p,be as U,r as m,D as xe,a3 as ye,a4 as K,R as $e,bs as Ae,a2 as ke,w as be,l as Ie,x as ne,bt as Se,bc as Ce,T as N,U as He,bK as Me,bo as Ee,Y as Ne,a0 as Pe,z as we,bj as Ve,n as Ue}from"./vendor-BlU_hoYl.js";import{_ as Ke}from"./auth-icon-Bx5iOxx7.js";import{_ as Xe}from"./member-CkdtKF8y.js";import{b as Qe,_ as We,g as E,e as de,br as Ye,a7 as Ze,a9 as Je,a8 as et,r as Te,u as tt,bs as st,aE as ot,bt as nt,W as re,bu as at,X as lt,aL as it,bv as ct,T as rt}from"./index-Wb-6_0W_.js";import{R as J}from"./rangking-soiwLY3n.js";import{_ as ut,M as dt}from"./MetaKeyTag-D6RyTOcl.js";import{_ as mt}from"./ExpressMinutesTag-aSSq9bxY.js";import{R as Be}from"./RatioBox-X84r5IHu.js";import{_ as ft}from"./ApproveInfo-D_ZwrT8E.js";import{B as ht}from"./BoutiqueLabelInLogo-BBB_wfVh.js";import{q as vt}from"./beiRanking-D-gBo-nx.js";import{_ as pt}from"./MCOIN-BOqZVkND.js";import{_ as gt}from"./ImgBoutiqueLable-BIio6fYG.js";import{C as yt}from"./CommonVanProvider-CDfGVWR4.js";import{_ as wt}from"./logo-JjZ15zkW.js";import{c as _t,i as xt,s as $t}from"./convertToImage-onRGZMbC.js";import{M as kt}from"./MallTabBar-DDeQjGp3.js";import{R as bt}from"./RemovedShelves-j33id_1b.js";import{b as _e}from"./mall-BWu47CdE.js";import{s as It}from"./useOrderStatus-D1Cw0BRr.js";import{O as St,c as Ct}from"./offlineGoods-DvT2Go6q.js";import"./shop-CeqcS6K2.js";import"./BackIcon-8hcEjDKb.js";import"./browser-DFlSdkZC.js";import"./upload-fNWojfp2.js";const Tt="/static/images/kefu-D_Ko4rIY.svg",Bt="/static/images/collect-oXqS1C1N.png",Dt="/static/images/collected-BX-G0Q8O.png",Lt="/static/images/share-tVl568Cu.svg",qt="/static/images/governance-BAxxHEE2.svg",Ft=e=>(se("data-v-754a2b67"),e=e(),oe(),e),zt={class:"py-8 text-base text-center text-black"},Rt={class:"flex flex-wrap items-center justify-center flex-1 gap-x-4 gap-y-1"},Gt={class:"w-[30px] flex-center bg-[#FED73A] rounded-3xl ml-1"},Ot=Ft(()=>t("img",{src:Xe,class:"w-2.5 h-2.5"},null,-1)),jt={class:"text-xs"},At={class:"mt-5"},Ht={class:"flex justify-center"},Mt=H({props:{show:{type:Boolean},list:{default:()=>[]}},emits:["close"],setup(e,{emit:d}){return(h,i)=>{const a=R("van-button");return o(),D(We,{width:"90%",show:e.show,name:h.$t("shop.Service Guarantee"),teleport:"body",onClose:i[1]||(i[1]=()=>{d("close")})},{default:z(()=>[t("div",zt,[t("div",Rt,[(o(!0),r(te,null,ee(e.list,k=>(o(),r("div",{class:"flex items-center text-sm",key:k},[A(u(k.address&&l(Qe)(k.address,"....",4,3))+" ",1),t("div",Gt,[Ot,t("span",jt,"v"+u(k.memberLevel),1)])]))),128))]),t("div",At,u(h.$t("shop.Already guaranteed for this store")),1)]),t("div",Ht,[g(a,{class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:i[0]||(i[0]=k=>d("close"))},{default:z(()=>[A(u(h.$t("common.confirm")),1)]),_:1})])]),_:1},8,["show","name"])}}}),Et=Q(Mt,[["__scopeId","data-v-754a2b67"]]),Nt={key:0,class:"flex items-center min-w-fit"},Pt=["src"],Vt={class:"bg-[#FFF1D6] rounded-2xl text-xs font-normal py-0.5 px-1.5 pl-3.5"},Ut=H({props:{rankNum:null,type:{default:J.SR},showHelpButton:{type:Boolean,default:!1},isLogin:{type:Boolean,default:!1}},emits:["help"],setup(e){return(d,h)=>+e.rankNum>0?(o(),r("div",Nt,[t("img",{src:l(E)(`images/shop/rank${e.rankNum>3?4:e.rankNum}.png`),class:"inline-block w-[14px] h-[16px] -mr-2.5 z-10"},null,8,Pt),t("div",Vt,[A(u(e.type===l(J).EBR?d.$t("ranking.store boost",{num:e.rankNum}):d.$t("ranking.recently hot sales",{num:e.rankNum}))+" ",1),e.showHelpButton&&e.isLogin?(o(),r("span",{key:0,onClick:h[0]||(h[0]=i=>d.$emit("help")),class:"ml-1 text-newOrigin text-xs font-normal cursor-pointer text-left"},u(e.type===l(J).EBR?d.$t("ranking.power_to"):d.$t("mall.Help TA")),1)):p("",!0)])])):p("",!0)}}),Kt=e=>(se("data-v-054950fa"),e=e(),oe(),e),Xt={class:"relative"},Qt={class:"py-3 z-[999]"},Wt={class:"w-full flex justify-start items-center px-2.5"},Yt={class:"w-10 h-10 rounded-[4px] overflow-hidden flex-shrink-0 relative"},Zt=["src"],Jt={class:"absolute right-0 top-0"},es={class:"ml-2 flex flex-col justify-between items-start"},ts={key:0,src:qt,class:"w-4 mr-1 align-text-top"},ss={class:"flex items-center bg-[#FED73A] rounded-xl py-[0.20rem] px-1.5"},os=Kt(()=>t("img",{src:Ke,class:"inline-block w-3 h-3 mr-0.5"},null,-1)),ns={class:"text-xxs text-default"},as={class:"flex items-center text-sm text-primary"},ls={class:"ml-1"},is={class:"h-10 flex flex-col justify-start items-center ml-auto flex-shrink-0"},cs={class:"w-full flex justify-start items-center mt-2 gap-1.5 overflow-x-auto px-2.5"},rs={class:"mt-3 overflow-x-auto px-2.5"},us={key:0,class:"flex"},ds=["onClick"],ms=["src"],fs={key:1,class:"flex"},hs={class:"flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]"},vs=["src"],ps=H({props:{info:null,list:{default:()=>[]},authorizeInfo:null},emits:["handleTo"],setup(e,{expose:d,emit:h}){const i=e,{accountStore:a}=de(),[k,L]=U(!1),[b,F]=U(!1),C=m({}),I=async()=>{var v,y,w,T,S;if(!((v=i.info)!=null&&v.id))return;const{success:x,data:c}=await vt({shopId:(y=i.info)==null?void 0:y.id,month:Ye()});!x||(c==null?void 0:c.status)!==1||(C.value={...c,mai:c.allMai,type:2,id:c.rankingId,avatar:(w=i.info)==null?void 0:w.logo,nickname:(T=i.info)==null?void 0:T.storeName,address:(S=i.info)==null?void 0:S.merchant})},O=x=>{const c=i.info.scenery.split(",")||[];Ae({images:c,startPosition:x||0,loop:!1,closeOnPopstate:!0})};return xe(()=>{I()}),d({getMyRanking:I}),(x,c)=>{var y,w,T;const v=R("van-rate");return o(),r("div",Xt,[t("div",Qt,[t("div",Wt,[t("div",Yt,[t("img",{src:e.info.logo||e.info.scenery&&e.info.scenery.split(",")[0]||l(E)("images/goods/defaultImg.png"),class:"w-10 h-full object-cover"},null,8,Zt),t("div",Jt,[g(ht,{type:e.info.type},null,8,["type"])])]),t("div",es,[t("div",{class:"text-base font-semibold text-black line-clamp-1 max-w-max leading-[22px] inline-flex",onClick:c[1]||(c[1]=K(S=>e.list&&e.list.length>0?l(F)(!0):null,["stop"]))},[e.list&&e.list.length>0?(o(),r("img",ts)):p("",!0),A(" "+u(e.info.storeName)+" ",1),(y=e.authorizeInfo)!=null&&y.authorizeAddress?(o(),r("div",{key:1,onClick:c[0]||(c[0]=K(()=>{l(L)(!0)},["stop"])),class:"inline-block ml-1.5 lex-shrink-0 align-text-bottom"},[t("div",ss,[os,t("span",ns,u(x.$t("ecology.authorized")),1)])])):p("",!0)]),t("div",as,[g(v,{class:"flex-shrink-0",readonly:"","allow-half":"",modelValue:e.info.star,"onUpdate:modelValue":c[2]||(c[2]=S=>e.info.star=S),size:16,gutter:"0",color:"#FEA021"},null,8,["modelValue"]),t("span",ls,u(e.info.star),1)])]),t("div",is,[g(Be,{tag:x.$t("common.rebate"),ratio:e.info.discountRatio||0},null,8,["tag","ratio"])])]),t("div",cs,[(w=C.value)!=null&&w.sort?(o(),D(Ut,{key:0,"rank-num":(T=C.value)==null?void 0:T.sort,type:l(J).EBR,"show-help-button":!0,"is-login":l(a).isLogin,onHelp:c[3]||(c[3]=S=>h("handleTo",`/talentRanking/rankingShop?shopId=${e.info.id}`))},null,8,["rank-num","type","is-login"])):p("",!0),ye(x.$slots,"like",{},void 0,!0),g(ut,{type:e.info.buyFlag?1:e.info.watchFlag?2:e.info.followFlag?3:0},null,8,["type"]),e.info.recentExpressSeconds?(o(),D(mt,{key:1,time:e.info.recentExpressSeconds},null,8,["time"])):p("",!0),e.info.metakeyFlag?(o(),D(dt,{key:2})):p("",!0)]),t("div",rs,[e.info.scenery?(o(),r("div",us,[(o(!0),r(te,null,ee(e.info.scenery.split(","),(S,G)=>(o(),r("div",{key:S,class:$e(["flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]",e.info.scenery.split(",").length-1===G?"":"mr-2"]),onClick:M=>O(G)},[t("img",{src:S||l(E)("images/goods/defaultImg.png"),class:"object-cover w-full h-full aspect-square rounded-xl",alt:""},null,8,ms)],10,ds))),128))])):(o(),r("div",fs,[t("div",hs,[t("img",{src:e.info.logo||l(E)("images/goods/defaultImg.png"),class:"w-full h-full aspect-square rounded-xl object-cover"},null,8,vs)])]))]),ye(x.$slots,"default",{},void 0,!0)]),g(Et,{list:e.list,show:l(b),onClose:c[4]||(c[4]=S=>l(F)(!1))},null,8,["list","show"]),l(k)&&e.authorizeInfo?(o(),D(ft,{key:0,show:l(k),info:e.authorizeInfo,onClose:c[5]||(c[5]=S=>l(L)(!1))},null,8,["show","info"])):p("",!0)])}}}),gs=Q(ps,[["__scopeId","data-v-054950fa"]]),ys="/static/images/plus-DOIrZp3k.png",ws={key:0,class:"bg-white rounded-xl p-3 my-3"},_s={class:"text-base font-semibold"},xs=["onClick"],$s={class:"relative w-[80px] h-[80px] flex-shrink-0 bg-b5 overflow-hidden rounded-lg"},ks={class:"object-cover w-full h-full aspect-square",fit:"cover"},bs={class:"w-full min-h-[80px] flex flex-col justify-between ml-2"},Is={class:"text-b1 font-semibold line-clamp-1"},Ss={class:"text-b3 font-normal line-clamp-1"},Cs={class:"text-b3 font-normal"},Ts={class:"flex justify-between items-center"},Bs={class:"flex-start"},Ds=t("img",{class:"w-4 h-4 mr-1",src:pt},null,-1),Ls={class:"font-semibold mr-1"},qs=["onClick"],Fs=t("img",{src:ys,class:"w-5 h-5"},null,-1),zs=[Fs],Rs={key:0},Gs={key:1},Os=H({props:{merchantAddress:null},setup(e,{expose:d}){const h=e,i=ke(),{t:a}=be(),k=Ie(),L=Ze(),b=m([]),F=m(!1),C=m(!1),I=m(0),O=m(10),x=m(0),[c,v]=U(!1),y=()=>{v(!c.value)},w=f=>{k.push(`/goodsDetail?id=${f.id}`)},T=async()=>{F.value=!0,I.value+=1,await M(),F.value=!1},S=ne(()=>{var f;return c.value?b.value:(f=b.value)==null?void 0:f.slice(0,2)}),G=m([]),M=async()=>{const f=await Je({page:I.value,size:O.value,isActivity:1,boutiqueTop:!0,merchantAddress:h.merchantAddress});if(F.value=!1,!f.success){C.value=!0;return}if(!f.data||!f.total){C.value=!0;return}x.value=f.total,G.value=f.data||[],b.value=I.value===1?G.value:b.value.concat(G.value),b.value.length>=x.value&&(C.value=!0)},j=()=>{I.value=0,x.value=0,C.value=!1,b.value=[],T()},ae=async f=>{if(f.stock===0&&f.goodsTypes!==2){N(a("order.Insufficient stock"));return}N.loading({duration:0});const P={needlogin:"true",...i.query};k.replace({path:i.path,query:P});const V=await et(f.id);N.clear(),V.success&&(N(a("cart.addTips")),L.getCartCount())};return d({init:j}),(f,P)=>{const V=R("van-icon"),W=R("VanList"),le=Se("lazy");return C.value&&x.value===0?p("",!0):(o(),r("div",ws,[t("div",_s,u(f.$t("shop.curactive")),1),g(W,{loading:F.value,"onUpdate:loading":P[0]||(P[0]=$=>F.value=$),finished:C.value,"loading-text":f.$t("common.loading"),onLoad:T},{default:z(()=>[(o(!0),r(te,null,ee(l(S),$=>(o(),r("div",{class:"flex mt-3",key:$.id,onClick:Y=>w($)},[t("div",$s,[Ce(t("img",ks,null,512),[[le,$.icons&&$.icons.split(",")[0]||l(E)("images/goods/defaultImg.png")]]),g(gt,{activity:!0,type:2})]),t("div",bs,[t("section",null,[t("div",Is,u($.goodsName),1),t("div",Ss,u($==null?void 0:$.goodsDesc),1),t("div",Cs,u(f.$t("mall.15th sale",{salesVolume:$.volume15})),1)]),t("div",Ts,[t("div",Bs,[Ds,t("span",Ls,u($.price),1),g(Be,{tag:f.$t("common.rebate"),ratio:$.discountRatio||0},null,8,["tag","ratio"])]),t("div",{onClick:K(Y=>ae($),["stop"])},zs,8,qs)])])],8,xs))),128)),b.value.length>2?(o(),r("div",{key:0,onClick:y,class:"text-xs text-b3 font-normal text-center mt-3.5"},[l(S).length==2?(o(),r("div",Rs,[A(u(f.$t("shop.chakanhuodongshsangpin"))+" ",1),g(V,{name:"arrow-down"})])):(o(),r("div",Gs,[A(u(f.$t("refund.put way"))+" ",1),g(V,{name:"arrow-up"})]))])):p("",!0)]),_:1},8,["loading","finished","loading-text"])]))}}}),js={class:"bg-white rounded-xl my-3 py-3"},As={class:"flex-center-bw px-3"},Hs={class:"text-base font-semibold"},Ms={class:"pl-3 pt-3"},Es=["onClick"],Ns={class:"object-cover w-full h-full aspect-square",fit:"cover"},Ps=H({props:{boutiqueGoods:null,title:null,type:null},emits:["toMore","toDetail"],setup(e,{emit:d}){const h=e,i=()=>{d("toMore",h.type)};return(a,k)=>{const L=R("van-icon"),b=R("van-swipe-item"),F=R("van-swipe"),C=Se("lazy");return o(),r("div",js,[t("div",As,[t("div",Hs,u(e.title),1),t("div",{class:"text-xs text-b3 whitespace-nowrap",onClick:i},[A(u(a.$t("common.check more")),1),g(L,{name:"arrow"})])]),t("div",Ms,[g(F,{class:"flex-start",loop:!1,width:126,"show-indicators":!1},{default:z(()=>[(o(!0),r(te,null,ee(e.boutiqueGoods,(I,O)=>(o(),D(b,{class:"flex",key:I.id},{default:z(()=>[t("div",{class:$e(["flex-1 w-full",{"mr-4":O<e.boutiqueGoods.length-1}])},[t("div",{onClick:()=>d("toDetail",I),class:"relative w-[110px] h-[110px] flex-shrink-0 bg-black-100 overflow-hidden rounded-lg"},[Ce(t("img",Ns,null,512),[[C,I&&I.goods&&I.goods.icons&&I.goods.icons.split(",")[0]||l(E)("images/goods/defaultImg.png")]])],8,Es)],2)]),_:2},1024))),128))]),_:1})])])}}}),ue=Q(Ps,[["__scopeId","data-v-9f70f930"]]),Vs="/static/images/shop-zan-CIPmIHxz.svg",Us={class:"bg-[#FFF1D6] rounded-2xl text-xs py-0.5 px-1.5 flex items-center gap-x-1 min-w-fit"},Ks=t("img",{src:Vs,class:"w-[14px] h-[14px]"},null,-1),Xs=H({props:{likeFlag:{type:Boolean,default:!0},likeCount:{default:0},isLogin:{type:Boolean,default:!1}},emits:["onLike"],setup(e){return(d,h)=>(o(),r("div",Us,[Ks,t("span",null,u(e.likeCount),1),!e.likeFlag&&e.isLogin?(o(),r("span",{key:0,onClick:h[0]||(h[0]=i=>d.$emit("onLike")),class:"text-newOrigin text-xs cursor-pointer text-left"},u(d.$t("shop.like")),1)):p("",!0)]))}}),Qs={class:"flex items-center justify-between text-b3 text-xs mt-3"},Ws={class:"w-[70%] flex items-center"},Ys={key:0,class:"shrink-0"},Zs={class:"w-fit line-clamp-1 truncate"},Js={key:1,class:"shrink-0"},eo={class:"shrink-0 flex items-center whitespace-nowrap ml-3"},to=H({props:{commentReview:null,commentTotal:null},setup(e){const d=e,h=ne(()=>{var i;return!!((i=d.commentReview)!=null&&i.commentContent)});return(i,a)=>{const k=R("van-icon");return o(),r("div",Qs,[t("div",Ws,[l(h)?(o(),r("div",Ys,"“")):p("",!0),t("div",Zs,u(e.commentReview.commentContent),1),l(h)?(o(),r("div",Js,"”")):p("",!0)]),t("div",eo,[t("span",null,u(i.$t("offline.shop_evaluate_num",{num:e.commentTotal||0})),1),g(k,{name:"arrow",class:"text-xxs text-[#666] ml-1"})])])}}}),De=e=>(se("data-v-2bfae1a2"),e=e(),oe(),e),so={class:"w-full h-[190px] overflow-hidden"},oo=["src"],no={key:0,class:"absolute left-0 w-full px-3 flex-center-bw top-3"},ao={class:"ml-1 text-sm"},lo={class:"mt-[-45px]"},io={class:"border-4 rounded-2xl border-solid border-[#FFF] drop-shadow-lg w-[90px] h-[90px] bg-[#D9D9D9] m-auto"},co=["src"],ro={class:"text-[#2E2008] font-medium text-lg text-center mt-5"},uo={class:"flex items-center justify-between px-5 pt-10 pb-5"},mo={class:"flex items-center"},fo={class:"border border-solid border-[#D9D9D9] p-1"},ho={class:"text-[#2E2008] opacity-80 ml-3"},vo=De(()=>t("br",null,null,-1)),po=De(()=>t("img",{src:wt,class:"w-[60px] h-[60px] object-contain"},null,-1)),go=H({props:{show:{type:Boolean},shopInfo:null},emits:["close","onSuceess"],setup(e,{emit:d}){const{shopInfo:h,show:i}=e,{width:a,height:k}=He(),L=m(null),b=m(100);Me(L,y=>{const w=y[0],{height:T}=w.contentRect;b.value=T||100});const F=ne(()=>window.location.origin+"/#/category?deliveryType=1&init=1&shopId="+h.id),{loadingToggle:C}=Te(),[I,O]=U(!1),x=()=>{d("close")},c=()=>{O(!0),C(!0),document.getElementById("saveHtml")?setTimeout(()=>{v()},200):setTimeout(()=>{v()},3e3)},v=async()=>{let y=document.getElementById("saveHtml");y.style.display="block";const w=await _t(y);await xt(w)&&(y.style.display="none",$t(w,h.storeName||""),x(),y.style.display="block",O(!1),C(!1),d("onSuceess"))};return(y,w)=>{const T=R("van-icon"),S=R("VanButton"),G=R("van-popup");return o(),D(G,{show:e.show,"onUpdate:show":w[1]||(w[1]=M=>Pe(i)?i.value=M:null),onClickOverlay:x,class:"w-full h-full bg-default/20",style:Ne({paddingLeft:`${(l(a)-300)/2}px`,paddingTop:`${(l(k)-b.value)/2}px`}),onClick:x},{default:z(()=>[t("div",{class:"w-[300px] rounded-lg overflow-hidden",onClick:w[0]||(w[0]=K(()=>{},["stop"]))},[t("div",{class:"w-[300px] relative bg-white",id:"saveHtml",ref:(M,j)=>{j.saveHtml=M,L.value=M}},[t("div",so,[t("img",{src:(e.shopInfo.shareImg||e.shopInfo.scenery||l(E)("images/shop/shop_bg.png"))+"?"+new Date().getTime(),class:"object-cover w-full",alt:"",crossOrigin:"anonymous"},null,8,oo)]),l(I)?p("",!0):(o(),r("div",no,[g(S,{class:"text-sm h-[30px] min-w-[65px] rounded-2xl text-white share-btn",onClick:c},{default:z(()=>[g(T,{name:"back-top",class:"rotate-180",size:"18"}),t("span",ao,u(y.$t("common.save")),1)]),_:1}),t("div",{class:"share-btn w-[30px] h-[30px] rounded-full flex justify-center items-center text-white text-lg",onClick:x},[g(T,{name:"cross"})])])),t("div",lo,[t("div",io,[t("img",{src:(e.shopInfo.logo||l(E)("images/goods/defaultImg.png"))+"?"+new Date().getTime(),class:"h-[82px] aspect-square rounded-xl object-fill",crossOrigin:"anonymous"},null,8,co)]),t("div",ro,u(e.shopInfo.storeName||"-"),1),t("div",uo,[t("div",mo,[t("div",fo,[g(Ee,{value:l(F),size:60,level:"H"},null,8,["value"])]),t("div",ho,[A(u(y.$t("common.new found")),1),vo,A(u(y.$t("common.share you")),1)])]),po])])],512)])]),_:1},8,["show","style"])}}}),yo=Q(go,[["__scopeId","data-v-2bfae1a2"]]),Le=e=>(se("data-v-1a226120"),e=e(),oe(),e),wo={class:"flex items-center gap-4"},_o=Le(()=>t("img",{class:"w-5 h-5",src:Tt},null,-1)),xo=[_o],$o={key:0,class:"w-5 h-5",src:Bt},ko={key:1,class:"w-5 h-5",src:Dt},bo=Le(()=>t("img",{class:"w-5 h-5",src:Lt},null,-1)),Io=[bo],So={key:0,class:"px-3 safe-body overflow-y-scroll"},Co={class:"px-2.5"},To=H({name:"Shop"});function Bo(e){const{orderGoodsStore:d}=de(),{t:h}=be(),{loadingToggle:i}=Te(),a=m({}),k=ke(),L=Ie(),b=m(null),{login:F}=tt(),[C,I]=U(!1),[O,x]=U(!1),c=m(),v=ne(()=>k.query.shopId),y=()=>{var s,n;(s=a.value)!=null&&s.merchant&&j(`/shopInfo?address=${(n=a.value)==null?void 0:n.merchant}`)},w=s=>{s===2?L.push(`category?shopId=${+v.value}&deliveryType=1`):s===3?L.push(`category?shopId=${+v.value}&deliveryType=2`):L.push(`boutique-goods?shopId=${+v.value}`)},T=m(null),S=m(null);we(v,async s=>{var n,B;s&&s!==S.value&&(i(!0),S.value=s,b.value&&(b.value.list=[]),await fe(),b.value&&b.value.resetData(),c.value&&((n=c.value)==null||n.getMyRanking()),T.value&&((B=T.value)==null||B.init()),i(!1))});const G=m(null),M=async()=>{const s=await rt(a.value.merchant);s.success&&s.data&&(G.value=s.data)},j=s=>{L.push(s)},ae=async()=>{const s=await lt(v.value);!s.success||!s.data||(a.value=s.data,await Ue(),ze())},f=async s=>{i(!0);const{success:n}=await nt({shopIds:[s.id],type:s.isFollow?2:1});i(!1),n&&(s.isFollow=!s.isFollow,s.isFollow?N({message:"收藏成功",icon:re("toast-success.svg"),duration:3e3}):N({message:"取消收藏",icon:re("toast-success.svg"),duration:3e3}))},P=()=>{N({message:h("common.Saved successfully"),icon:re("toast-success.svg"),duration:3e3})},V=()=>{d.changeOfflineInfo({shop:a.value});const s={key:v.value,orderType:St.STORE};L.push({path:"/offlineSubmit",query:s})},W=m([]),le=async()=>{var n,B,q;if(!((n=a.value)!=null&&n.type))return;const s=await _e({merchant:(B=a.value)==null?void 0:B.merchant,status:1,page:1,size:12,type:(q=a.value)==null?void 0:q.type,sortType:3,orderBy:1});s.success&&(W.value=s.data)},$=m(null),Y=async()=>{var n;$.value=[];const s=await _e({merchant:(n=a.value)==null?void 0:n.merchant,status:1,page:1,size:12,deliveryType:1});s.success&&($.value=s.data)},ie=m([]),qe=async()=>{if(!v.value)return;$.value=[];const{success:s,data:n}=await it({shopId:Number(v.value),goodsStatus:Ct.Published,page:1,size:12,sortBy:"desc|goods_sales_volume",distinctFlag:!0});s&&(ie.value=(n.records||[]).map(B=>({...B,goods:{icons:(B==null?void 0:B.goodsIcons)||""}})))},me=m([]),Fe=async()=>{const{success:s,data:n}=await ct({page:1,size:10,shopId:k.query.shopId});s&&(me.value=n&&n[0].guaranteeList||[])},fe=async()=>{await ae(),le(),Y(),qe(),Fe(),M()},he=m(null),ze=()=>{he.value&&he.value.addEventListener("scroll",Ge)},Re=m(1),ve=m([]),Ge=s=>{const{scrollTop:n}=s.target,{length:B}=ve.value;for(let q=0;q<B;q++)if(n<ve.value[q].offsetTop){Re.value=q+1;break}},{accountStore:pe}=de(),Oe=async()=>{if(!pe.isLogin)return x(!0);a.value.likeFlag||(at({shopId:v.value}),a.value.likeCount++,a.value.likeFlag=!0)};we(()=>{var s;return(s=a.value)==null?void 0:s.merchant},async s=>{s&&await Y()});const ge=m(0),Z=m(null),je=async()=>{var B,q,X,_;const s={page:1,size:1,shopId:v.value,sortBy:"desc|comment_time",havePicsFlag:null,commentStatus:1},n=await ot(s);n.success?(B=n.data)!=null&&B.records&&((q=n.data)==null?void 0:q.records.length)>0&&(Z.value=(X=n.data)==null?void 0:X.records[0],ge.value=((_=n.data)==null?void 0:_.total)||0):Z.value=null};return xe(async()=>{i(!0),await fe(),await je(),i(!1)}),Ve(()=>{$.value=[]}),(s,n)=>{const B=R("VanButton");return o(),D(yt,{class:"h-full font-Puhui font-normal safe-bottom-page relative",style:{background:"linear-gradient(180deg, #fed73a 0%, #f2f0ef 50%)"},title:s.$t("shop.Shop Details"),themeVars:{navBarBackgroundColor:"transparent"}},{right:z(()=>[t("div",wo,[t("div",{onClick:y},xo),t("div",{onClick:n[0]||(n[0]=q=>f(a.value))},[a.value.isFollow?(o(),r("img",ko)):(o(),r("img",$o))]),t("div",{onClick:n[1]||(n[1]=K(q=>l(I)(!0),["stop"]))},Io)])]),default:z(()=>{var q,X;return[a.value&&Object.keys(a.value).length!==0&&a.value.status==1?(o(),r("div",So,[a.value&&Object.keys(a.value).length!==0?(o(),D(gs,{key:0,ref:(_,ce)=>{ce.shopHeader=_,c.value=_},info:a.value,list:me.value,authorizeInfo:G.value,onHandleTo:n[3]||(n[3]=_=>j(_)),onFollowShop:f,class:"bg-white rounded-xl"},{like:z(()=>{var _;return[g(Xs,{"like-flag":a.value.likeFlag,"like-count":(_=a.value)==null?void 0:_.likeCount,"is-login":l(pe).isLogin,onOnLike:Oe},null,8,["like-flag","like-count","is-login"])]}),default:z(()=>[t("div",Co,[g(B,{round:"",class:"w-full text-b1 h-[46px] px-[1.125rem] bg-yellow text-base font-semibold mt-3",onClick:V},{default:z(()=>[A(u(s.$t("common.payBill")),1)]),_:1}),Z.value?(o(),D(to,{key:0,commentTotal:+ge.value,commentReview:Z.value,onClick:n[2]||(n[2]=K(_=>j("/offline-evaluate-home?shopId="+l(v)),["stop"]))},null,8,["commentTotal","commentReview"])):p("",!0)])]),_:1},8,["info","list","authorizeInfo"])):p("",!0),g(Os,{ref:(_,ce)=>{ce.shopActivity=_,T.value=_},merchantAddress:(q=a.value)==null?void 0:q.merchant},null,8,["merchantAddress"]),a.value.type?(o(),D(ue,{key:1,boutiqueGoods:W.value,title:s.$t("shop.Main Store")+l(It)(a.value.type),onToMore:w,onToDetail:n[4]||(n[4]=_=>j(`/goodsDetail?id=${_.goods.id}`))},null,8,["boutiqueGoods","title"])):p("",!0),g(ue,{boutiqueGoods:$.value,type:2,onToMore:w,title:s.$t("shop.our_products"),onToDetail:n[5]||(n[5]=_=>j(`/goodsDetail?id=${_.goods.id}`))},null,8,["boutiqueGoods","title"]),(ie.value||[]).length?(o(),D(ue,{key:2,boutiqueGoods:ie.value,type:3,onToMore:w,title:s.$t("shop.offline_services"),onToDetail:n[6]||(n[6]=_=>j(`/offlineGoodsDetail?goodsId=${_.goodsId}`))},null,8,["boutiqueGoods","title"])):p("",!0)])):a.value&&Object.keys(a.value).length!==0?(o(),D(bt,{key:1,type:"shop"})):p("",!0),l(C)?(o(),D(yo,{key:2,show:l(C),shopInfo:a.value,onClose:n[7]||(n[7]=_=>l(I)(!1)),onOnSuceess:P},null,8,["show","shopInfo"])):p("",!0),l(v)?(o(),D(kt,{key:3,shopId:+l(v),shopType:(X=a.value)==null?void 0:X.type},null,8,["shopId","shopType"])):p("",!0),l(O)?(o(),D(st,{key:4,onLogin:l(F)},null,8,["onLogin"])):p("",!0)]}),_:1},8,["title"])}}const Do=H({...To,setup:Bo}),sn=Q(Do,[["__scopeId","data-v-1a226120"]]);export{sn as default};
