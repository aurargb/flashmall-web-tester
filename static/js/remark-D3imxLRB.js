import{y as G,l as W,E as V,F as n,G as r,H as t,a3 as q,a4 as D,P as o,Q as s,I as P,J as H,X as h,O as z,a1 as p,B as u,w as L,r as N,x as T,D as J,R as Q}from"./vendor-BlU_hoYl.js";import{_ as X}from"./credit-0laLclE7.js";import{_ as w}from"./MCOIN-BOqZVkND.js";import{u as K,p as M}from"./useOrderStatus-D1Cw0BRr.js";import{P as R}from"./order-H59PKTFP.js";import{d as m,f as Y,s as Z,q as tt,l as et,h as I}from"./index-Wb-6_0W_.js";import{P as O}from"./flashSale-DDyqLyYN.js";import{u as st}from"./useShipTemplate-C35bKCd2.js";import{a as E}from"./useRefund-CagomE1G.js";import{d as ot}from"./default-avatar-DfqlD94j.js";import{_ as F}from"./USDT-CNsbs3BR.js";import{_ as nt}from"./FMCP-yoa9RTPy.js";import{_ as U}from"./copy-w-Dr8nkqKW.js";const rt={class:"p-3 bg-white rounded-xl font-Puhui"},it={class:"flex justify-between"},lt={class:"flex items-center overflow-hidden"},at=["src"],ct={class:"text-sm font-semibold text-b1 line-clamp-1 ml-1"},dt={class:"font-semibold text-[#FF8812] text-sm line-clamp-1 ml-auto"},mt={key:0},ut={key:0},ht={key:1},ft={key:2},xt={class:"flex w-full gap-2"},yt={class:"flex-1 flex flex-col min-h-[5rem] justify-between"},_t={class:"w-full font-semibold"},vt={class:"text-sm text-b1 font-semibold line-clamp-1 leading-5 flex items-center gap-1"},bt={class:"line-clamp-1 truncate"},pt={key:0,class:"flex-shrink-0 flex items-center text-xs text-[#34C2A9]"},$t=t("img",{src:X,class:"w-5 h-5"},null,-1),wt={class:"flex items-center gap-1"},At={class:"text-sm text-b3 font-normal"},kt={class:"flex items-center text-b3 font-normal"},gt=t("div",{class:"w-full h-[18px]"},null,-1),jt={class:"flex justify-between mt-[2px]"},St={class:"text-b3 text-sm font-normal"},Tt={class:"flex items-center"},Rt={key:0,class:"text-sm text-b3 line-clamp-1 min-w-fit font-normal"},Ct=t("div",{class:"flex-shrink-0"},[t("img",{class:"w-[17px] h-[17px]",src:w})],-1),Bt={class:"text-b1 text-sm font-semibold ml-1"},Pt={key:0,class:"text-b3 text-sm font-semibold ml-1 line-through"},Nt={key:0,class:"flex justify-between mt-2"},Ot={class:"text-sm font-normal text-b3 line-clamp-1"},It={key:0},Dt={key:1},Et={class:"text-[#FF8812] text-sm font-normal font-Puhui"},Lt={key:0},Mt={key:0},Ft={key:1},Ut={key:1},Gt={key:0},Wt={key:1},Vt=p(") "),bs=G({props:{order:null,isList:{type:Boolean},showPrice:{type:Boolean,default:!0},showShippingTemplate:{type:Boolean,default:!1}},setup(e){const c=e,A=W(),_=K(c.order),f=i=>{const v=new u(i.price).minus(new u(i.goodsActivityReduceAmount||0).div(i.number)).plus(new u(i.goodsAdjustChangeAmount||0).div(i.number)).toNumber();return m(v||0)},$=i=>(i==null?void 0:i.goodsActivityReduceAmount)||(i==null?void 0:i.goodsAdjustChangeAmount),b=i=>new u(i.price).toNumber(),x=i=>{A.push(i)},{getExpressTypeText:k}=st();return(i,v)=>{const C=V("VanImage");return r(),n("div",rt,[t("div",it,[t("div",{class:"flex-start flex items-center w-full",onClick:v[0]||(v[0]=D(a=>x(`/category?deliveryType=1&shopId=${e.order.stores.id}`),["stop"]))},[t("div",lt,[t("img",{src:e.order.stores.logo||o(ot),class:"w-6 h-6 rounded-[4px] object-cover"},null,8,at),t("div",ct,s(e.order.stores.storeName||"--"),1)]),t("div",dt,[o(E)(e.order).available?(r(),n("span",mt,s(o(E)(e.order).label),1)):(r(),n(P,{key:1},[e.order.status==-1?(r(),n("span",ut,s(i.$t("order.canceled")),1)):e.order.status===0&&e.order.hash?(r(),n("span",ht,s(i.$t("order.wait block chain")),1)):(r(),n("span",ft,s(o(_)[e.order.status+""]),1))],64))])])]),(r(!0),n(P,null,H(e.order.orderGoods,a=>{var g,j,B;return r(),n("div",{class:"mt-3",key:a.goodsName},[t("div",null,[t("div",xt,[z(C,{onClick:D(l=>x(`/buyerOrderList/detail?id=${a.goodsId}`),["stop"]),src:(a.icons||"").split(",")[0],class:"w-20 h-20 overflow-hidden rounded-[8px]",alt:"",fit:"cover"},null,8,["onClick","src"]),t("div",yt,[t("div",_t,[t("div",vt,[t("span",bt,s(a.goodsName),1),e.order.creditFlag?(r(),n("span",pt,[$t,p(" "+s(i.$t("order.Credit Collection")),1)])):h("",!0)]),t("div",wt,[t("div",At,s(i.$t("order.quantity",{number:a.number||0})),1),t("div",kt,s(o(k)(a)),1)]),gt,t("div",jt,[t("p",St,s(i.$t("common.total"))+": ",1),t("div",Tt,[e.order.payType===o(O).STORE_CARD?(r(),n("span",Rt,s(a.cardPrice||0)+s((g=e.order.fmStoredCard)==null?void 0:g.symbol),1)):(r(),n(P,{key:1},[Ct,t("div",null,[t("span",Bt,s(f(a)),1)]),$(a)?(r(),n("div",Pt,s(o(m)(b(a))),1)):h("",!0)],64))])])])])])]),e.showPrice?(r(),n("div",Nt,[t("span",Ot,[e.order.paySource?(r(),n("span",It,s(o(M)(+e.order.paySource)),1)):(r(),n("span",Dt,s(i.$t("order.payAmount"))+" :",1))]),t("div",Et,[+e.order.paySource!==o(R).USDT_WALLET?(r(),n("div",Lt,[e.order.payType===o(O).STORE_CARD?(r(),n("span",Mt,s(o(m)(+new o(u)(a.cardPrice).times(a.number??1)||0))+" "+s((j=e.order.fmStoredCard)==null?void 0:j.symbol),1)):(r(),n("span",Ft,s(o(m)(+new o(u)(a.price).times(a.number??1).minus(a.goodsActivityReduceAmount||0)||0))+" Mcoin",1))])):(r(),n("div",Ut,[p(s(o(m)(e.order.totalUsdt))+"USDT(",1),e.order.payType===o(O).STORE_CARD?(r(),n("span",Gt,s(o(m)(+new o(u)(a.cardPrice).times(a.number??1)||0))+" "+s((B=e.order.fmStoredCard)==null?void 0:B.symbol),1)):(r(),n("span",Wt,s(o(m)(+new o(u)(a.price).times(a.number??1).minus(a.goodsActivityReduceAmount||0)||0))+" Mcoin",1)),Vt]))])])):h("",!0)])}),128)),q(i.$slots,"default")])}}}),qt={class:"title text-b1 text-sm font-semibold"},Ht={class:"content"},zt={key:0,class:"flex justify-between items-center h-[44px]"},Jt={class:"text-b3 text-sm font-normal"},Qt={class:"text-b1 text-sm font-normal text-right"},Xt={key:0,class:"text-right"},Kt={class:"flex items-center justify-end gap-1"},Yt=t("img",{src:F,class:"w-4 h-4 inline-block"},null,-1),Zt={class:"text-xxs text-b3"},te=t("span",null,"（",-1),ee=t("span",null,"）",-1),se={key:1,class:"flex items-center justify-end gap-1"},oe=t("img",{src:w,class:"w-4 h-4 inline-block"},null,-1),ne={key:1,class:"flex justify-between items-center h-[44px]"},re={class:"text-b3 text-sm font-normal"},ie={class:"text-b1 text-sm font-normal text-right flex items-center justify-end gap-1"},le=t("img",{src:w,class:"w-4 h-4 inline-block"},null,-1),ae={class:"text-sm text-b1 font-semibold"},ce={key:2,class:"flex justify-between items-center h-[44px]"},de={class:"text-b3 text-sm font-normal"},me={class:"text-b1 text-sm font-normal text-right"},ue={key:3,class:"flex justify-between items-center h-[44px]"},he={class:"text-b3 text-sm font-normal line-clamp-1 max-w-[100px]"},fe={class:"text-b1 text-sm font-normal text-right flex items-center justify-end gap-1"},xe=t("img",{src:w,class:"w-4 h-4 inline-block"},null,-1),ye={class:"text-sm text-b1 font-semibold text-right"},_e={key:4,class:"flex justify-between items-center h-[44px]"},ve={class:"text-b3 text-sm font-normal"},be={class:"text-b1 text-sm font-normal text-right flex items-center justify-end gap-1"},pe=t("img",{src:w,class:"w-4 h-4 inline-block"},null,-1),$e={class:"text-sm text-b1 font-semibold text-right"},we=t("div",{class:"divider h-[1px] bg-b4"},null,-1),Ae={key:5,class:"flex justify-between items-center h-[44px]"},ke={class:"text-b3 text-sm font-normal"},ge={class:"text-b1 text-sm font-normal text-right"},je={class:"flex items-center justify-end gap-1"},Se={key:0,class:"flex items-center justify-end gap-1"},Te=t("img",{src:F,class:"w-4 h-4 inline-block"},null,-1),Re={key:1,class:"flex items-center justify-end gap-1"},Ce=t("img",{src:w,class:"w-4 h-4"},null,-1),Be=p(" + "),Pe=t("img",{src:nt,class:"w-4 h-4"},null,-1),Ne={class:"text-xxs text-b3 font-normal"},Oe={key:6,class:"flex justify-between items-center h-[44px]"},Ie={class:"text-b3 text-sm font-normal"},De={class:"text-b1 text-sm font-normal text-right"},Ee={class:"flex items-center justify-end gap-1"},Le={class:"flex items-center justify-end gap-1"},Me=t("img",{src:w,class:"w-4 h-4"},null,-1),ps={props:{order:{type:Object,required:!0},isBuyer:{type:Boolean,default:!1}},setup(e){const c=e,{t:A}=L(),_=N(1),{tradeContributeSelfRate:f,mcoinRate:$}=Y(),b=N(null),x=T(()=>1/b.value),k=async()=>{b.value=await $(),console.log("pointRate.value",b.value)},i=T(()=>{var l;return!((l=c.order)!=null&&l.totalAmount)||!x.value?0:new u(c.order.totalAmountOriginal).times(x.value).toNumber()}),v=T(()=>{var l;return!((l=c.order)!=null&&l.totalAmount)||!x.value?0:new u(c.order.totalAmount).times(x.value).toNumber()}),C=async()=>{_.value=await f()},a=T(()=>{var y;if(!((y=c.order)!=null&&y.orderGoods))return 0;let l=new u(0);return c.order.orderGoods.forEach(d=>{if(+c.order.payType==1&&+d.payType==3||+d.payType!=2&&+d.payType!=3){const S=new u(d.price).times(d.number).minus(d.goodsActivityReduceAmount||0).plus(d.goodsAdjustChangeAmount||0).times(new u(d.discountRatio||0).div(100));l=l.plus(S)}}),l.times(_.value).toNumber()}),g=N(0),j=T(()=>{var S;if(!((S=c.order)!=null&&S.orderGoods)||g.value<=0)return 0;const l=a.value||0,y=_.value;let d=0;return c.isBuyer?d=Math.min(g.value,new u(l).div(y).times(.5).toNumber()):d=Math.min(c.order.voucherAmount,new u(l).div(y).times(.5).toNumber()),d}),B=T(()=>{var d;const l=new u(((d=c.order)==null?void 0:d.totalAmount)||0),y=new u(j.value||0);return l.minus(c.order.paySource==R.WITHDRAW_POINTS?y:0).toNumber()});return J(async()=>{g.value=await Z(tt.FMCP).balanceOf(),await C(),await k()}),(l,y)=>{var d;return r(),n("div",{class:"p-3 pb-0 break-all bg-white rounded-xl",onScroll:y[0]||(y[0]=(...S)=>l.handleScroll&&l.handleScroll(...S))},[t("div",qt,s(l.$t("order.totalPriceDetail")),1),t("div",Ht,[e.isBuyer?(r(),n("div",zt,[t("div",Jt,s(l.$t("order.total price detail")),1),t("div",Qt,[+e.order.paySource===o(R).USDT_WALLET?(r(),n("div",Xt,[t("span",Kt,[Yt,p(" "+s(o(m)(o(i))),1)]),t("span",Zt,[te,t("span",null,s(o(m)(o(i)))+" USDT",1),t("span",null,s(l.$t("common.willAutoExchange")),1),t("span",null,s(o(m)(e.order.totalAmountOriginal))+" Mcoin",1),ee])])):(r(),n("div",se,[oe,t("span",null,s(o(m)(e.order.totalAmountOriginal)),1)]))])])):h("",!0),e.isBuyer?h("",!0):(r(),n("div",ne,[t("div",re,s(l.$t("order.total")),1),t("div",ie,[le,t("p",ae,s(o(m)(e.order.totalAmountOriginal)),1)])])),e.isBuyer?(r(),n("div",ce,[t("div",de,s(l.$t("common.pay type method")),1),t("div",me,s(o(M)(+e.order.paySource)),1)])):h("",!0),e.order.fmGeneralActivity&&e.order.activityReduceAmount?(r(),n("div",ue,[t("div",he,s(((d=e.order.fmGeneralActivity)==null?void 0:d.name)||"-"),1),t("div",fe,[xe,t("p",ye,[t("span",null,s(e.order.activityReduceAmount||0),1)])])])):h("",!0),e.order.merchantAdjustAmount?(r(),n("div",_e,[t("div",ve,s(l.$t("order.merchant_modify_price")),1),t("div",be,[t("span",null,s(e.order.merchantAdjustAmount>0?"+":"-"),1),pe,t("p",$e,[t("span",null,s(Math.abs(e.order.merchantAdjustAmount)||0),1)])])])):h("",!0),we,e.isBuyer?(r(),n("div",Ae,[t("div",ke,s(l.$t("order.actual payment")),1),t("div",ge,[t("div",je,[+e.order.paySource===o(R).USDT_WALLET?(r(),n("div",Se,[Te,p(" "+s(o(m)(o(v))),1)])):(r(),n("div",Re,[Ce,t("span",null,s(o(m)(o(B))),1)])),o(j)>0&&e.order.paySource==o(R).WITHDRAW_POINTS?(r(),n(P,{key:2},[Be,Pe,p(" "+s(o(m)(o(j))),1)],64)):h("",!0)]),t("div",Ne,s(l.$t("order.getContribution",{num:o(m)(o(a))})),1)])])):h("",!0),e.isBuyer?h("",!0):(r(),n("div",Oe,[t("div",Ie,s(l.$t("order.total price actual")),1),t("div",De,[t("div",Ee,[t("div",Le,[Me,t("span",null,s(o(m)(e.order.totalAmount)),1)])])])]))])],32)}}},Fe={class:"p-3 break-all bg-white rounded-xl"},Ue={class:"title text-b1 text-sm font-semibold"},Ge={class:"content"},We={class:"flex justify-between items-center mt-[16px]"},Ve={class:"text-b3 text-sm font-normal"},qe={class:"text-b1 text-sm font-normal text-right"},He={class:"flex justify-between mt-[16px]"},ze={class:"text-sm font-normal text-b3"},Je={class:"text-sm text-b1 font-normal flex justify-end items-center"},Qe=t("img",{src:U,class:"w-5 h-5"},null,-1),Xe=[Qe],$s={props:{order:{type:Object,required:!0}},setup(e){return(c,A)=>(r(),n("div",Fe,[t("div",Ue,[t("span",null,s(c.$t("order.orderInfo")),1)]),t("div",Ge,[t("div",We,[t("div",Ve,s(c.$t("order.createTime")),1),t("div",qe,s(o(et)(e.order.createTime)),1)]),t("div",He,[t("div",ze,s(c.$t("order.orderNumber")),1),t("div",Je,[p(s(e.order.id)+" ",1),t("div",{class:"ml-1",onClick:A[0]||(A[0]=(..._)=>o(I)&&o(I)(..._))},Xe)])])])]))}},Ke={class:"flex justify-between"},Ye={class:"text-sm font-semibold w-full"},Ze={key:0,class:"text-b3 font-normal"},ts={key:1,class:"text-b1 font-semibold w-full flex flex-row items-center justify-between"},es=t("img",{src:U,class:"w-5 h-5",alt:""},null,-1),ss=[es],os={key:0,class:"text-sm text-b3 font-normal min-w-max"},ns={key:0,class:"text-sm text-b3 font-normal mt-2 flex items-center"},rs={class:"w-full break-all"},ws={props:{order:{type:Object,required:!0},arrow:{type:Boolean,default:!1},isBuyer:{type:Boolean,default:!1}},setup(e){const c=e,{t:A}=L(),_=()=>{var $;const f=(($=c.order.userAddress)==null?void 0:$.postscript)||"--";I(f)};return(f,$)=>{var b,x,k,i,v;return r(),n("div",{class:Q(["p-3 break-all bg-white rounded-xl",[(b=e.order.userAddress)!=null&&b.postscript?"py-3":"py-4"]])},[t("div",Ke,[t("div",Ye,[(x=e.order.userAddress)!=null&&x.postscript?(r(),n("div",ts,[t("span",null,s(f.$t("order.sellerRemark")),1),t("div",{onClick:_},ss)])):(r(),n("span",Ze,s(e.isBuyer?f.$t("order.orderRemark"):f.$t("order.sellerRemark")),1))]),(k=e.order.userAddress)!=null&&k.postscript?h("",!0):(r(),n("div",os,s(f.$t("order.noRemark")),1))]),(i=e.order.userAddress)!=null&&i.postscript?(r(),n("div",ns,[t("div",rs,s(((v=e.order.userAddress)==null?void 0:v.postscript)||""),1)])):h("",!0)],2)}}};export{ws as _,bs as a,ps as b,$s as c};
