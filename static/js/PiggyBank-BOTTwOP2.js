import{_ as fe}from"./MCOIN-Bodfn-v1.js";import{_ as _e}from"./FMCP-f3k58DsE.js";import{_ as ce,y as de,U as Ie,r as _,bT as Ee,be as j,x as he,bf as xe,D as ye,a9 as Re,E as S,K as m,G as a,N as P,H as e,a2 as k,F as u,X as te,P as t,a0 as F,Q as o,I as Ve,a4 as we,$ as be,Y as $e,Z as ke,w as De,O as N,bg as Le,bN as Ne,bU as Pe,bx as Ue,bH as Te,bj as ze,R as We,l as je,T as Me,B as se,S as pe}from"./vendor-Ba70TIw4.js";import{bV as Oe,bz as Ge,q as ge,bW as He,d as w,bX as Xe,l as qe,B as re,g as Ye,c as ve}from"./index-Bsb9uxb4.js";import{P as Je}from"./PopHeader-CPr5VpPI.js";import{P as Q}from"./flashSale-DDyqLyYN.js";import{_ as Ze}from"./EmptyTipsPop-BnhhUp92.js";import{p as Ke}from"./piggyBank-DHjFTeuA.js";import{q as Qe}from"./piggyBank-DDFvWhFP.js";import{B as et}from"./BackIcon-DkqwcD_b.js";import"./close-BkqxFSX4.js";const tt=""+new URL("../images/piggy-bank-bg-B2ZN3re_.png",import.meta.url).href,st=""+new URL("../images/arrow-forward-C8bwXPR5.svg",import.meta.url).href,at=""+new URL("../images/X-GcBn2IkE.svg",import.meta.url).href,ot=""+new URL("../images/expand-BxpD5R2x.webp",import.meta.url).href,ee=r=>($e("data-v-5436a953"),r=r(),ke(),r),nt={key:0,class:"success-text"},lt=ee(()=>e("div",{class:"text-b6 text-xl mb-3"},"恭喜获得",-1)),it={class:"text-2xl text-b6"},rt={class:"text-[#FEA527] font-bold"},ct=F("抵用券 "),dt=ee(()=>e("div",{class:"text-b6 text-xl mb-3"},"开始膨胀",-1)),ut={class:"text-[#F15965] h-[52px] flex items-center justify-center gap-x-1"},mt=ee(()=>e("span",{class:"text-[26px] font-black leading-[52px]"},"X",-1)),pt={class:"text-[44px] font-normal leading-[52px] font-BebasNeue"},gt=["src"],vt={key:1,class:"center-card text-b1"},ft=ee(()=>e("div",{class:"text-center text-xs text-[#FE7E66]"},"膨胀倍数",-1)),_t={class:"container relative"},ht={id:"original",class:"center-text text-[#F15965] h-[52px] pt-1 flex items-center justify-center gap-x-1"},xt=ee(()=>e("span",{class:"text-[24px] font-[900]"},[e("img",{src:at,class:"h-5 w-auto"})],-1)),yt={class:"text-[40px] font-BebasNeue leading-[52px]"},wt=F(" 确定 "),bt=de({props:{teleport:null},emits:["success"],setup(r,{expose:H,emit:U}){const{teleport:X}=r,{height:C}=Ie(),v=_(null),{top:b,height:q}=Ee(v),T=_(null),[I,h]=j(!1),[c,E]=j(!1),[z,x]=j(!1),Y=he(()=>C.value>811?1:811/C.value),l=xe({grow:null,amount:null,duration:100,number:0,animationStyle:"",intervalId:null}),p=async()=>{x(!0),T.value=`${ot}?t=${Date.now()}`,await Oe(T.value),x(!1)};function ae(R){return Math.random()*(R-1)+1}function J(){l.number=ae(2),l.grow?l.number=l.grow:setTimeout(()=>{J(),M()},l.duration)}function W(){l.intervalId=setInterval(J,l.duration)}function M(){l.intervalId&&(clearInterval(l.intervalId),l.intervalId=null)}const O=async()=>{E(!0),await He(500);const y=document.getElementById("original").cloneNode(!0);y.id="cloned-animation",y.classList.add("animated-div"),document.querySelector(".container").appendChild(y)},g=async R=>{if(R){l.grow=null,l.amount=null,l.number=1;try{h(!0),W();const y=await R.wait(),f=Ge(y.logs,ge.voucherGrow,ge.FMCP);l.grow=f==null?void 0:f.grow,l.amount=f==null?void 0:f.amount,M(),U("success"),O()}catch{h(!1)}}},Z=()=>{h(!1),setTimeout(()=>{E(!1),p()},1e3),M()};return ye(()=>{p()}),Re(()=>{h(!1),setTimeout(()=>{E(!1)},1e3),M()}),H({setAnimationShow:h,handleAnimation:g}),(R,y)=>{const f=S("VanLoading"),oe=S("VanButton"),ne=S("VanPopup");return a(),m(ne,{show:t(I),"onUpdate:show":y[0]||(y[0]=A=>be(I)?I.value=A:null),teleport:r.teleport,class:"!bg-transparent font-Puhui !w-full !max-w-[375px]",onClickOverlay:Z,onClick:Z,"overlay-style":{backgroundColor:"rgba(0, 0, 0, 0.8)"}},{default:P(()=>[e("div",{ref:(A,V)=>{V.wrapperRef=A},class:"!w-full overflow-hidden relative -mt-[25px]",style:te({height:`${t(C)}px`})},[e("div",{class:"w-full text-center absolute",style:te({top:`${t(b)-115}px`})},[t(c)?(a(),u("div",nt,[lt,e("div",it,[e("span",rt,o(t(l).amount),1),ct])])):(a(),u(Ve,{key:1},[dt,e("div",ut,[mt,e("span",pt,o(t(l).number.toFixed(3)),1)])],64))],4),e("div",{ref:(A,V)=>{V.imgWrapper=A,v.value=A},class:"center-card opacity-0",style:te({height:` ${t(C)*.26*t(Y)}px`})},null,4),t(z)?(a(),m(f,{key:0,vertical:"",type:"spinner",color:"#FEA527",class:"center-card"})):k("",!0),e("img",{src:T.value,class:"w-full h-full object-cover relative z-[1]"},null,8,gt),t(c)?(a(),u("div",vt,[ft,e("div",_t,[e("div",ht,[xt,e("span",yt,o(t(l).grow),1)])])])):k("",!0),t(c)?(a(),m(oe,{key:2,class:"success-text confirm-btn !font-semibold",style:te({top:`${t(b)+t(q)+50}px`}),onClick:we(Z,["stop"])},{default:P(()=>[wt]),_:1},8,["style","onClick"])):k("",!0)],4)]),_:1},8,["show","teleport","overlay-style"])}}}),$t=ce(bt,[["__scopeId","data-v-5436a953"]]),kt={class:"w-[85vw] max-w-[375px] px-5 py-6 bg-popBg"},Bt={class:"gap-1 mt-5 mb-3 text-xs flex-start"},St={key:0,src:fe,class:"w-4",alt:""},Ct={key:1,src:_e,class:"w-4",alt:""},At={class:"font-semibold"},Ft={class:"flex-start bg-[#FFF8EC] p-[6px] rounded-lg"},It=de({props:{show:{type:Boolean},balance:null,loading:{type:Boolean}},emits:["close","handleWithdraw"],setup(r,{expose:H,emit:U}){const{show:X}=r,{t:C}=De(),v=_(null),b=_(Q.MC),q=he(()=>[{text:"Mcoin",value:Q.MC},{text:C("voucher.voucher"),value:Q.VOUCHER}]),T=h=>{b.value=Number(h)},I=()=>{U("handleWithdraw",v.value,b.value===Q.VOUCHER)};return H({amount:v}),(h,c)=>{const E=S("van-dropdown-item"),z=S("van-dropdown-menu"),x=S("VanField"),Y=S("VanButton"),l=S("VanPopup");return a(),m(l,{show:r.show,"onUpdate:show":c[4]||(c[4]=p=>be(X)?X.value=p:null),round:"","close-on-click-overlay":!0,onClickOverlay:c[5]||(c[5]=we(()=>U("close"),["stop"]))},{default:P(()=>[e("div",kt,[N(Je,{onClick:c[0]||(c[0]=p=>U("close"))},{default:P(()=>[e("span",null,o(h.$t("maiPledge.Income to be collected")),1)]),_:1}),e("div",Bt,[b.value===t(Q).MC?(a(),u("img",St)):(a(),u("img",Ct)),N(z,{overlay:!1,duration:0,"active-color":"#FEA021",class:"mr-2"},{default:P(()=>[N(E,{onChange:T,modelValue:b.value,"onUpdate:modelValue":c[1]||(c[1]=p=>b.value=p),options:t(q)},null,8,["modelValue","options"])]),_:1}),e("span",At,o(t(w)(r.balance||0,4)),1)]),e("div",Ft,[N(x,{type:"number",modelValue:v.value,"onUpdate:modelValue":c[2]||(c[2]=p=>v.value=p),formatter:t(Xe),placeholder:t(w)(r.balance||0,4).toString()},null,8,["modelValue","formatter","placeholder"]),e("div",{class:"bg-[#fed73a] max-border text-[#FEA021] py-1 px-2 rounded-lg",onClick:c[3]||(c[3]=()=>{v.value=t(w)(r.balance,4)})}," MAX ")]),N(Y,{class:"w-full mt-5 font-semibold text-white btn-orange",loading:r.loading,disabled:v.value<=0||+v.value>+r.balance,onClick:I},{default:P(()=>[F(o(h.$t("common.claim")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}}),Et=ce(It,[["__scopeId","data-v-f83d25b2"]]),G=r=>($e("data-v-7d99f09c"),r=r(),ke(),r),Rt={class:"px-3 bg-[#f2f0ef] relative font-normal pb-2",id:"piggyBank"},Vt=G(()=>e("img",{class:"absolute top-0 left-0 w-full",src:tt,alt:"",srcset:""},null,-1)),Dt={class:"relative z-20"},Lt={class:"gap-2 mt-2 flex-start"},Nt={class:"mt-4"},Pt={class:"bg-white p-4 rounded-xl text-[#2E2008]"},Ut={class:"flex items-center justify-between"},Tt=["src"],zt={class:"text-oriange1"},Wt={class:"flex items-baseline"},jt={key:0,class:"text-sm self-end mb-0.5"},Mt={key:1,class:"text-3xl font-bold"},Ot={key:1},Gt={key:2,class:"text-sm self-end ml-1.5 mb-0.5"},Ht={key:3,class:"text-3xl font-bold"},Xt={class:"text-xs flex-center text-black-400"},qt=G(()=>e("img",{class:"self-center w-4 h-4 ml-auto",src:st,alt:"",srcset:""},null,-1)),Yt={class:"mt-5 bg-[#F9F9F9] rounded-md grid grid-cols-2 p-2.5 text-left"},Jt={class:"flex flex-col justify-center"},Zt={class:"gap-1 text-xs flex-start"},Kt={class:"opacity-60"},Qt={class:"mt-1.5 text-sm"},es={key:1},ts={class:"flex flex-col justify-center"},ss={class:"gap-1 text-xs flex-start"},as={class:"opacity-60"},os={class:"mt-1.5 text-sm"},ns={key:1},ls={class:"left"},is={class:"gap-1 text-xs flex-start"},rs={class:"opacity-60"},cs=G(()=>e("img",{src:fe,class:"w-4 h-4"},null,-1)),ds=G(()=>e("img",{src:_e,class:"w-4 h-4"},null,-1)),us={class:"text-[#E88F17] text-sm font-medium"},ms={key:1},ps={class:"flex mt-5 text-base font-medium text-center"},gs=G(()=>e("div",{class:"w-6"},null,-1)),vs={class:"bg-white py-2.5 rounded-xl text-[#2E2008] mt-2.5 relative flex items-center justify-between text-xs"},fs={class:"pl-2.5"},_s={class:"text-xs text-[#2E2008] opacity-60 mb-2.5"},hs={class:"flex items-center"},xs={class:"text-[#14D8A9] text-sm font-bold flex items-center"},ys={key:1},ws=F("%"),bs={key:1,class:"text-[#14D8A9] text-xs font-bold"},$s={class:"pr-2.5 text-right"},ks={class:"text-xs text-[#2E2008] opacity-60 text-left mb-2.5"},Bs={class:"flex items-center"},Ss={key:1,class:"text-[#14D8A9] text-sm font-bold"},Cs={key:3,class:"text-[#14D8A9] text-xs font-bold"},As={class:"bg-white p-4 rounded-xl text-[#2E2008] mt-2.5 relative",style:{"padding-right":"0"}},Fs={class:"flex items-center justify-between pr-4 mt-1.5"},Is=G(()=>e("div",{id:"line-echarts"},null,-1)),Es=de({setup(r){Le(()=>{ie()},1e4);const H=je(),{userIds:U,pending:X,total:C,earnings:v,nextFloatAwardAmount:b,today:q,DAY:T,dayAwardAmounts:I,userRewardPending:h,userRewardWithdraw:c}=Ke(),E=s=>{H.push(s)},z=_("0"),x=Ne("showBalance",!1),Y=()=>{x.value=!x.value},l=xe({tooltip:{trigger:"axis",valueFormatter:s=>`${s}%`},grid:{left:"0%",right:"8%",bottom:"0%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",showSymbol:!1,lineStyle:{color:"#674c37"},areaStyle:{color:new Pe(0,0,0,1,[{offset:0,color:"rgba(254, 215, 58, 0.60)"},{offset:1,color:"rgba(254, 215, 58, 0.00)"}])}}]}),p=_(null),ae=s=>{l.xAxis.data=s.dates.reverse(),l.series[0].data=s.values.reverse(),p.value.setOption(l),y(!1)},J=_(0),W=_("0"),M=async()=>{const s=await U();J.value=s;const n=await X(s.toString());let i=0;n.fixs.forEach(L=>{i+=+re(L)||0});let D=0;n.floats.forEach(L=>{D+=+re(L)||0});let d=0;n.records.forEach(L=>{d+=+re(L.amount)||0});const $=await h(s.toString());z.value=d.toFixed(18),W.value=se(D).plus(i).plus($).toFixed(18)},O=_(["0","0"]),g=_([0,0,0,0]),Z=async()=>{Qe().then(n=>{if(!n.success)return Me.clear();O.value[0]=n.data.allAmount||0}),g.value[0]=+await v(0),g.value[1]=+await b(),g.value[2]=+await C(),g.value[3]=+await v(7);const s=g.value[1]/g.value[2]+g.value[0];O.value[1]=w(se(z.value||0).times(s).toFixed(18),2).toString()},[R,y]=j(!1),f=_([0,0]),oe=async()=>{y(!0);let s=localStorage.getItem("taday")||"",n=localStorage.getItem("echartData")||"";const i=+await q(),D=await T();let d={dates:[],values:[]};if(s&&+s==+i&&n){d=JSON.parse(n);let $=await I(i);$=w(se($||0).times(100).times(365).times(g.value[3]).toFixed(18),2),d.values[0]=$}else{localStorage.setItem("taday",i.toString());for(let $=0;$<7;$++){let L=i-$*D,Ae=await I(L),me=qe((L-D)*1e3),Fe=w(se(Ae||0).times(100).times(365).times(g.value[3]).toFixed(18),2);d.dates.push(me.split(" ")[0].split("-")[1]+"-"+me.split(" ")[0].split("-")[2]),d.values.push(Fe)}}localStorage.setItem("echartData",JSON.stringify(d)),f.value[1]=d.values[0],ae(d)},ne=async()=>{const s=+await b(),n=+await C();f.value[0]=s/n*100},[A,V]=j(!1),[Be,K]=j(!1),[Se,le]=j(!1),ue=_(null),Ce=async(s,n)=>{K(!0);try{let i=await c(s,n);if(!i.success)return K(!1);if(i=i.result,!n){try{await i.wait(),V(!1),ie(),le(!0),setTimeout(()=>{le(!1)},2e3);return}catch{K(!1)}finally{K(!1)}return}V(!1),ue.value.handleAnimation(i)}finally{K(!1)}},B=_(!1),ie=async()=>{await M(),ne()};return ye(async()=>{p.value=Ue(Te(document.getElementById("line-echarts"))),B.value=!0,await Promise.all([ie(),await Z(),oe()]),B.value=!1}),ze(()=>{p.value&&p.value.dispose()}),(s,n)=>{const i=S("van-loading"),D=S("VanLoading");return a(),u("div",Rt,[Vt,e("div",Dt,[e("div",Lt,[N(et),e("div",null,o(s.$t("piggy.Yu_Bao_details")),1)]),e("div",Nt,[e("div",Pt,[e("div",Ut,[e("div",{class:"flex items-center",onClick:Y},[e("span",null,o(s.$t("piggy.lump_sum")),1),e("img",{class:"w-4 h-4 ml-1.5",src:t(Ye)(`images/ecology/${t(x)?"hideen.svg":"show.svg"}`),alt:"",srcset:""},null,8,Tt)]),J.value?(a(),m(t(pe),{key:0,to:"/piggySettingAdmin"},{default:P(()=>[e("div",zt,o(s.$t("piggy.setting admin address")),1)]),_:1})):k("",!0)]),N(t(pe),{to:"/piggyBank-balanceDetail",class:"flex justify-between mt-2.5"},{default:P(()=>[e("div",Wt,[t(x)?(a(),u("span",jt,"≈")):k("",!0),t(x)?(a(),u("span",Mt,[B.value?(a(),m(i,{key:0,size:"28px"})):(a(),u("span",Ot,o(t(w)(z.value,2)),1))])):k("",!0),t(x)?(a(),u("span",Gt,"MCOIN")):k("",!0),t(x)?k("",!0):(a(),u("span",Ht," ******"))]),e("div",Xt,[F(o(s.$t("piggy.detail_record"))+" ",1),qt])]),_:1}),e("div",Yt,[e("div",Jt,[e("div",Zt,[e("span",Kt,o(s.$t("piggy.Cumulative_income")),1)]),e("div",Qt,[B.value?(a(),m(i,{key:0,size:"14px"})):(a(),u("span",es,o(t(ve)(O.value[0])),1))])]),e("div",ts,[e("div",ss,[e("span",as,o(s.$t("piggy.tommor_earns")),1)]),e("div",os,[B.value?(a(),m(i,{key:0,size:"14px"})):(a(),u("span",ns,o(t(ve)(O.value[1])),1))])]),e("div",{class:"mt-2.5 p-2.5 col-span-2 bg-white flex-center-bw border border-solid border-primary-001 rounded-md",onClick:n[0]||(n[0]=d=>+W.value>0?t(V)(!0):"")},[e("div",ls,[e("div",is,[e("span",rs,o(s.$t("maiPledge.Income to be collected")),1),cs,e("span",null,o(s.$t("common.or")),1),ds]),e("div",us,[B.value?(a(),m(i,{key:0,color:"#E88F17",size:"14px"})):(a(),u("span",ms,o(t(w)(W.value,2)),1))])]),e("div",{class:We(["relative px-4 py-1 ml-2 text-white rounded-md bg-primary-001",{"opacity-50":!W.value}])},o(s.$t("common.claim")),3)])]),e("div",ps,[e("div",{class:"flex-1 py-3 bg-[#F9F1D3] rounded-[1.75rem] text-[#7D6810]",onClick:n[1]||(n[1]=d=>E("/piggyBank-transferOut"))},o(s.$t("piggy.transfer_out_principal")),1),gs,e("div",{class:"flex-1 py-3 bg-[#FED73A] rounded-[1.75rem]",onClick:n[2]||(n[2]=d=>E("/piggyBank-transferIn"))},o(s.$t("piggy.transfer_in_principal")),1)])]),e("div",vs,[e("div",fs,[e("div",_s,o(s.$t("piggy.todayannualizedRateReturn")),1),e("div",hs,[e("span",xs,[B.value?(a(),m(i,{key:0,color:"#14D8A9",size:"14px"})):(a(),u("span",ys,o(t(w)(g.value[0]*100*365,2)),1)),ws]),F(o(s.$t("piggy.base"))+" + ",1),B.value?(a(),m(i,{key:0,color:"#14D8A9",size:"14px"})):(a(),u("span",bs,o(t(w)(f.value[0]*365*g.value[3],2))+"%",1)),F(o(s.$t("piggy.float")),1)])]),e("div",$s,[e("div",ks,o(s.$t("piggy.yesannualizedRateReturn")),1),e("div",Bs,[B.value?(a(),m(i,{key:0,color:"#14D8A9",size:"14px"})):(a(),u("span",Ss,o(t(w)(g.value[0]*100*365,2))+"%",1)),F(o(s.$t("piggy.base"))+" + ",1),B.value?(a(),m(i,{key:2,color:"#14D8A9",size:"14px"})):(a(),u("span",Cs,o(t(w)(f.value[1]))+"%",1)),F(o(s.$t("piggy.float")),1)])])]),e("div",As,[e("div",Fs,[e("span",null,o(s.$t("piggy.SystemGistoricalDynamicIncome")),1)]),Is,t(R)?(a(),m(D,{key:0,color:"#674c37",class:"loading-box",vertical:""})):k("",!0)])])]),t(A)?(a(),m(Et,{key:0,show:t(A),balance:W.value,loading:t(Be),onClose:n[3]||(n[3]=d=>t(V)(!1)),onHandleWithdraw:Ce},null,8,["show","balance","loading"])):k("",!0),t(Se)?(a(),m(Ze,{key:1,onClose:n[4]||(n[4]=d=>t(le)(!1)),text:s.$t("common.claim successful")},null,8,["text"])):k("",!0),N($t,{ref:(d,$)=>{$.voucherLottieRef=d,ue.value=d}},null,512)])}}}),Ms=ce(Es,[["__scopeId","data-v-7d99f09c"]]);export{Ms as default};
