import{_ as T,a as B,b as te,c as se}from"./recharge-DFjlsSoA.js";import{_ as E}from"./checked-CkJ-Z4or.js";import{_ as oe,y as ae,be as le,x as ne,r as f,bf as D,D as ce,F as i,G as r,H as e,O as h,Q as o,X as m,P as a,N as F,E as x,a2 as ie,Z as re,$ as de,a1 as ue}from"./vendor-BlU_hoYl.js";import{B as me}from"./BackIcon-8hcEjDKb.js";import{r as _e,q as S,s as ve,g as M,d as y,b0 as pe}from"./index-Wb-6_0W_.js";import{o as fe}from"./OTCContract-DbwE8IHR.js";import{o as he}from"./OtcAgent-CsLQYMsu.js";const _=g=>(re("data-v-e12b07d6"),g=g(),de(),g),ge={class:"relative w-full h-full linear-bg px-2.5 safe-bottom-page"},be={class:"flex items-center justify-between sticky top-0 z-50 bg-[#FFEFD6] py-2.5"},we={class:"flex flex-wrap items-center font-semibold"},xe={class:"ml-2 font-normal"},ye={class:"flex items-center px-4 py-5 bg-white rounded-xl"},Ae={class:"flex-1 text-sm text-[#2E2008]"},ke={key:0,class:"flex items-center"},De=_(()=>e("img",{class:"w-4 h-4",src:B},null,-1)),Fe={class:"ml-2 mr-4 text-[#8D8D8D]"},Me={key:1,class:"w-2.5 h-2.5 my-2",src:T},Ce={class:"flex items-center"},$e=_(()=>e("img",{class:"w-4 h-4",src:te},null,-1)),Ie={class:"ml-2 mr-4 text-[#8D8D8D]"},Se={key:2,class:"w-2.5 h-2.5 my-2",src:T},Te={key:3,class:"flex items-center"},Be=_(()=>e("img",{class:"w-4 h-4",src:B},null,-1)),Ee={class:"ml-2 mr-4 text-[#8D8D8D]"},Ve=_(()=>e("img",{class:"w-5 h-5",src:se},null,-1)),Ue=[Ve],Ne={class:"bg-white rounded-xl p-4 pb-12 w-full mt-2.5"},Re={class:"bg-[#FFF8EC] rounded-xl p-2.5 flex items-center w-full relative"},Oe=["src"],qe={class:"w-full px-4 bg-white rounded-xl"},je=["src"],Le=_(()=>e("span",null,"MAI",-1)),Pe={key:0,class:"ml-auto w-3.5 h-3.5",src:E,alt:""},Xe=["src"],ze=_(()=>e("span",null,"MUSD",-1)),Ge={key:0,class:"ml-auto w-3.5 h-3.5",src:E,alt:""},He={class:"mt-1.5 text-[0.65rem] text-[#2E2008] opacity-60"},Qe={key:0},We={key:1},Ze={class:"bg-[#FFF8EC] rounded-xl px-0.5 pr-2.5 pt-2.5 pb-3 mt-5 flex justify-between items-end w-full"},Je={class:"mt-1.5 text-[0.65rem] text-[#2E2008] opacity-60"},Ke={class:"flex flex-col items-center justify-center mt-28"},Ye=ae({setup(g){const{mai:V,musd:U,balances:N}=fe(),{withdraw:R,deposit:O}=he(),{loadingToggle:A}=_e(),C=ie(),[q,b]=le(!1),j=ne(()=>l.value===1?n.value>p[t.value]:n.value>v[t.value]),n=f(null),t=f("MAI"),L=f(null),$=f(null),I=s=>{t.value=s,$.value.toggle(),w()},l=f(1),P=()=>{l.value===1?l.value=2:l.value=1},d=D({MAI:"",MUSD:""}),v=D({MAI:0,MUSD:0}),p=D({MAI:0,MUSD:0}),X=async()=>{d.MUSD=await U(),d.MAI=await V()},z=async()=>{const s=await N(d[t.value],S.otcAgent);v[t.value]=s},G=async()=>{const s=await(await ve(d[t.value])).balanceOf(S.otcAgent);p[t.value]=+s},H=()=>{l.value===1?n.value=p[t.value]||0:n.value=v[t.value]||0},Q=async()=>{l.value===1?(b(!0),await O(d[t.value],n.value),w(),b(!1)):(b(!0),await R(d[t.value],n.value),w(),b(!1)),Z()},W=()=>{C.query.type&&(C.query.type==="buy"?t.value="MUSD":t.value="MAI")},Z=()=>{n.value=0},w=async()=>{A(!0),await Promise.all([z(),G()]),A(!1)};return ce(async()=>{A(!0),W(),await X(),w()}),(s,u)=>{const J=x("van-dropdown-item"),K=x("van-dropdown-menu"),Y=x("VanField"),ee=x("VanButton");return r(),i("div",ge,[e("header",be,[e("div",we,[h(me),e("div",xe,o(s.$t("otc.Recharge")),1)])]),e("div",ye,[e("div",Ae,[l.value==2?(r(),i("div",ke,[De,e("div",Fe,o(s.$t("otc.from")),1),e("div",null,o(s.$t("otc.OTCAccount")),1)])):m("",!0),l.value==2?(r(),i("img",Me)):m("",!0),e("div",Ce,[$e,e("div",Ie,o(l.value==1?s.$t("otc.from"):s.$t("otc.to")),1),e("div",null,o(s.$t("otc.walletaccount")),1)]),l.value==1?(r(),i("img",Se)):m("",!0),l.value==1?(r(),i("div",Te,[Be,e("div",Ee,o(s.$t("otc.to")),1),e("div",null,o(s.$t("otc.OTCAccount")),1)])):m("",!0)]),e("div",{onClick:P},Ue)]),e("div",Ne,[e("div",Re,[e("img",{class:"w-6 h-6 mr-1.5",src:a(M)(`images/tokens/${t.value}.png`),alt:"",srcset:""},null,8,Oe),h(K,{class:"w-full",ref:(c,k)=>{k.menuRef=c,L.value=c},"active-color":"#FEA021",overlay:!1},{default:F(()=>[h(J,{title:t.value,ref:(c,k)=>{k.itemRef=c,$.value=c}},{default:F(()=>[e("div",qe,[e("div",{class:"py-5 flex items-center border-b-[1px] border-[#e5e5e5] border-solid",onClick:u[0]||(u[0]=c=>I("MAI"))},[e("img",{class:"w-6 h-6 mr-1.5",src:a(M)("images/tokens/MAI.png"),alt:"",srcset:""},null,8,je),Le,t.value=="MAI"?(r(),i("img",Pe)):m("",!0)]),e("div",{class:"flex items-center py-5",onClick:u[1]||(u[1]=c=>I("MUSD"))},[e("img",{class:"w-6 h-6 mr-1.5",src:a(M)("images/tokens/MUSD.png"),alt:"",srcset:""},null,8,Xe),ze,t.value=="MUSD"?(r(),i("img",Ge)):m("",!0)])])]),_:1},8,["title"])]),_:1},512)]),e("div",He,[l.value===2?(r(),i("span",Qe,o(s.$t("otc.wallectblance"))+o(a(y)(a(p)[t.value]))+" "+o(t.value),1)):(r(),i("span",We,o(s.$t("common.balance",{token:"OTC"}))+"ï¼š"+o(a(y)(a(v)[t.value]))+" "+o(t.value),1))]),e("div",Ze,[h(Y,{class:"flex-1 bg-[#FFF8EC] text-3xl font-bold text-[#2E2008]",modelValue:n.value,"onUpdate:modelValue":u[2]||(u[2]=c=>n.value=c),type:"number",placeholder:"0",formatter:a(pe)},null,8,["modelValue","formatter"]),e("div",{class:"px-1.5 py-1 border-[1px] border-[#FBA923] border-solid rounded text-xs text-[#FBA923] font-medium",onClick:H}," MAX ")]),e("div",Je,o(s.$t("otc.canuse"))+o(l.value===2?a(y)(a(v)[t.value]):a(y)(a(p)[t.value]))+" "+o(t.value),1),e("div",Ke,[h(ee,{loading:a(q),disabled:!n.value||+n.value<=0||a(j),class:"font-semibold btn h-[38px] min-w-[130px] px-4 rounded-3xl text-base",onClick:Q},{default:F(()=>[ue(o(s.$t("common.submit")),1)]),_:1},8,["loading","disabled"])])])])}}}),ct=oe(Ye,[["__scopeId","data-v-e12b07d6"]]);export{ct as default};
