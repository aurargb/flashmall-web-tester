import{_ as k,y,l as I,a2 as F,r,bf as G,D as R,E as D,F as h,G as f,H as s,O as i,N as _,X as E,Q as v,P as d,Z as L,$ as T}from"./vendor-BlU_hoYl.js";import{B as $}from"./BackIcon-8hcEjDKb.js";import{F as V}from"./FlashSaleGoods-DYr6Aw4u.js";import{c as z}from"./category-5QTDC8Db.js";import"./index-Clz0Qna-.js";import"./flashSale-DDyqLyYN.js";import"./RatioBox-CfBlBgLi.js";import"./luckyShopContract-CJeOPTQq.js";import"./shop-CeqcS6K2.js";const H=""+new URL("../images/search-CDTd2ms1.svg",import.meta.url).href,K=t=>(L("data-v-d9a4bc78"),t=t(),T(),t),O={class:"px-3 top-0 right-0 left-0 bg-gray1 min-h-screen absolute z-50 h-full overflow-y-auto safe-bottom-page"},P={class:"sticky top-0 z-50 bg-gray1"},U={class:"flex-center-bw gap-1 pt-3"},j={key:0,class:"border border-solid rounded-lg px-2 py-0.5 text-xs text-primary"},q=K(()=>s("img",{src:H,class:"w-5 h-5"},null,-1)),A=[q],M=y({name:"FlashSaleSearch"});function Q(t){const u=I(),g=F(),c=r(),l=r(null),n=G({title:"",pageKey:"flashSale"}),S=e=>{e.code==="Enter"&&l.value.handleSearch(n)},x=()=>{l.value.handleSearch(n)},p=r([]),b=async()=>{const e=[{id:null,type:1,name:"精选",cnName:"精選",jpName:"おすすめ",enName:"Featured"}],o=await z();o.success&&(p.value=[...e,...o.data])},C=e=>{m(`/saleGoodDetail?id=${e.id}`)},m=e=>{u.push(e)},N=async()=>{c.value=g.query.className||null,b()};return R(()=>{N()}),(e,o)=>{const w=D("van-field");return f(),h("div",O,[s("section",P,[s("section",U,[i($),i(w,{"model-value":d(n).title,"onUpdate:model-value":o[0]||(o[0]=a=>d(n).title=a),clearable:"",class:"rounded-3xl flex-1",onKeypress:S},{"left-icon":_(()=>[c.value?(f(),h("view",j,v(c.value),1)):E("",!0)]),"right-icon":_(()=>[s("div",{onClick:x},A)]),_:1},8,["model-value"]),s("div",{class:"opacity-50",onClick:o[1]||(o[1]=a=>d(u).go(-1))},v(e.$t("common.cancel")),1)])]),i(V,{onHandleTo:m,ref:(a,B)=>{B.saleGoodsRef=a,l.value=a},class:"mt-4",categoryList:p.value,onRushToBuy:C},null,8,["categoryList"])])}}const X=y({...M,setup:Q}),ne=k(X,[["__scopeId","data-v-d9a4bc78"]]);export{ne as default};
