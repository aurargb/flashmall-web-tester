import{u as ne,b as ae,h as le,Z as ie,$ as ce,i as re,q as R,f as ue,a0 as de}from"./index-UgIL2Smv.js";import{_ as pe}from"./close-Dwemq2UR.js";import{_ as T,y as E,x as N,E as L,K as k,G as a,N as m,H as e,Q as o,O as C,P as i,bo as me,a1 as p,a0 as Z,Z as K,$ as q,r as w,be as H,D as G,F as d,X as A,I as $,w as ve,R as U,Y as fe,T as he}from"./vendor-BlU_hoYl.js";import{P as ge}from"./PopHeader-D-bxM_g2.js";import{_ as _e}from"./TokenBalance-DP3bGP3b.js";import{l as we,u as be}from"./level-CPXhzITj.js";const Q=t=>(K("data-v-4b3dd004"),t=t(),q(),t),xe=Q(()=>e("div",{class:"-mb-[28px] flex justify-center"},[e("div",{class:"relative"},[e("img",{src:ie,class:"w-[105px] h-auto"}),e("img",{src:ce,class:"w-[26px] z-50 absolute right-[23px] bottom-[20px]"})])],-1)),ye={class:"w-[85vw] max-w-[375px] px-5 py-6 bg-popBg rounded-[10px] z-10 relative"},$e={class:"pb-5 flex-center-bw"},ke={class:"flex-start"},Ce=Q(()=>e("img",{src:pe,class:"w-[10px] h-[10px]",alt:""},null,-1)),Ie=[Ce],Ve={class:"mt-5 text-xs text-center"},Be={class:"text-default opacity-60"},Le={class:"font-bold"},Me=E({props:{show:{type:Boolean}},emits:["close"],setup(t,{emit:r}){const{show:v}=t,{getCurrentAccount:I}=ne(),f=N(()=>window.location.origin+"/#/home?invite="+I());return(h,l)=>{const b=L("VanButton"),x=L("VanPopup");return a(),k(x,{show:t.show,"onUpdate:show":l[2]||(l[2]=g=>Z(v)?v.value=g:null),style:{background:"transparent"},onClickOverlay:l[3]||(l[3]=()=>r("close"))},{default:m(()=>[xe,e("div",ye,[e("div",$e,[e("div",ke,[e("span",null,o(h.$t("home.inviteRegister")),1)]),e("div",{onClick:l[0]||(l[0]=g=>r("close"))},Ie)]),e("div",null,[C(me,{value:i(f),size:200,level:"H",class:"mx-auto"},null,8,["value"]),e("div",Ve,[e("div",Be,[e("span",Le,o(h.$t("home.inviteLink")),1),e("span",null,o(i(ae)(i(f),"...",15,4)),1)]),C(b,{class:"btn-orange w-[150px] h-10 text-white mt-5",onClick:l[1]||(l[1]=g=>i(le)(i(f)))},{default:m(()=>[p(o(h.$t("common.copy")),1)]),_:1})])])])]),_:1},8,["show"])}}}),_t=T(Me,[["__scopeId","data-v-4b3dd004"]]),Fe="/static/images/level_header-B9ZxcF0Z.svg",Pe="/static/images/level_tip-CloZu7KO.svg",Y="/static/images/yes-Dk7kJjiI.svg",J="/static/images/no-KmhKFik8.svg",D="/static/images/level_bottom-BIkYLWqS.svg",Se={class:"gap-4 mt-3 font-semibold text-white flex-center"},ze={class:"whitespace-nowrap"},Ae={class:"flex items-center justify-center mt-2 text-xs opacity-50"},Te=E({props:{openFee:null,buyMember:null},emits:["close","getIsVip"],setup(t,{emit:r}){const v=t,I=re(),f=w(0),[h,l]=H(!1),b=N(()=>f.value>v.openFee),x=async()=>{const n=await(await I).allowance(R.flashMall);f.value=n.result},g=async()=>{l(!0),(await(await I).approve(R.flashMall)).success&&await x(),l(!1)},M=async()=>{l(!0);const n=await v.buyMember();l(!1),n.success&&r("getIsVip")},y=async()=>{await x()};return G(()=>{y()}),(n,V)=>{const _=L("VanButton");return a(),d($,null,[C(ge,{onClick:V[0]||(V[0]=u=>r("close"))},{default:m(()=>[p(o(n.$t("home.openVip")),1)]),_:1}),e("div",Se,[i(b)?A("",!0):(a(),k(_,{key:0,class:"btn-orange btn-shadow h-[35px] min-w-[120px] px-4",loading:i(h),onClick:g},{default:m(()=>[p(o(n.$t("assets.auth")),1)]),_:1},8,["loading"])),C(_,{class:"btn-orange btn-shadow h-[35px] min-w-[120px] px-4",loading:i(h),disabled:!i(b),onClick:M},{default:m(()=>[e("span",ze,o(n.$t("home.toOpenVip",{fee:t.openFee})),1)]),_:1},8,["loading","disabled"])]),e("div",Ae,[p(" MCOIN"+o(n.$t("assets.balance"))+" ",1),C(_e,{token:"MCOIN",tokenName:!1})])],64)}}}),Ee=T(Te,[["__scopeId","data-v-4112668c"]]),P=t=>(K("data-v-a9031166"),t=t(),q(),t),Ne={class:"relative"},je=P(()=>e("div",{class:"bg-popBg h-8 absolute bottom-[-2px] w-full"},null,-1)),Oe=P(()=>e("img",{class:"relative z-10 w-full",src:Fe,alt:"",srcset:""},null,-1)),Re={class:"mx-1 font-bold"},Ue=P(()=>e("div",{class:"z-10 mr-1"},[e("img",{class:"w-4 h-4 align-middle",src:Pe,alt:""})],-1)),De={class:"px-5 bg-popBg"},Ze={class:"pt-5 flex-center-bw"},Ke={class:"text-gray3"},qe={class:"font-bold text-[#2E2008]"},He={class:"mt-5 flex-center-bw"},Ge={class:"text-gray3"},Qe={class:"font-bold text-[#2E2008]"},Ye={class:"mt-5 flex-center-bw text-gray3"},Je={class:"font-bold text-[#2E2008]"},We=p(" 已满级 "),Xe={class:"mt-5 flex-center-bw"},et={class:"text-gray3"},tt={class:"font-bold text-primary"},st={key:0,src:Y,class:"w-[14px]",alt:""},ot={key:1,src:J,class:"w-[14px]",alt:""},nt={class:"mt-5 flex-center-bw"},at={class:"text-gray3"},lt={class:"font-bold text-primary"},it={key:0,src:Y,class:"w-[14px]",alt:""},ct={key:1,src:J,class:"w-[14px]",alt:""},rt={class:"relative z-10 flex justify-center items-center gap-4 pb-6 mt-6"},ut=P(()=>e("div",{class:"absolute bottom-0 flex justify-center"},[e("img",{class:"w-32 mr-2.5",src:D,alt:"",srcset:""}),e("img",{class:"w-32 ml-2.5",src:D,alt:"",srcset:""})],-1)),dt=E({props:{show:{type:Boolean},userInfo:null},emits:["close","invite","handleTo"],setup(t,{emit:r}){const{show:v,userInfo:I}=t,{t:f}=ve(),{members:h,memberPrice:l,buyMember:b,memberLevels:x}=ue(),[g,M]=H(!1),y=w(!1),n=w(0),V=w(0),_=w([]),u=w({id:1,one:1e5,two:1e5}),F=w({address:"",agentAmount:.001,majorAmount:.002}),j=async()=>{y.value=await h()},W=async()=>{V.value=+await l()},X=async()=>{n.value=await x()},ee=async()=>{const s=await we();s.success&&(_.value=s.data||[],te())},te=()=>{if(n.value<=0)return;const s=_.value.length,c=n.value||0;u.value=c>=s+1?_.value[s-1]:_.value[c-1]},se=async()=>{const s=await be();s.success&&(F.value=s.data)},S=N(()=>{const s=_.value.length;return(n.value||0)>=s+1}),O=async()=>{if(!F.value.address)return;M(!0);const s=await de(F.value.address,F.value.agentAmount.toString());M(!1),s.success&&(he(f("home.upgradeTips")),setTimeout(()=>{r("close")},1500))};return G(async()=>{j(),W(),se(),await X(),ee()}),(s,c)=>{const z=L("VanButton"),oe=L("VanPopup");return a(),k(oe,{show:t.show,"onUpdate:show":c[3]||(c[3]=B=>Z(v)?v.value=B:null),round:"",onClose:c[4]||(c[4]=B=>r("close")),style:fe(y.value?"background-color: rgba(0, 0, 0, 0)":"")},{default:m(()=>[e("div",{class:U(["w-[85vw] max-w-[375px]",{"px-5 py-6":!y.value}])},[y.value?(a(),d($,{key:0},[e("div",Ne,[je,Oe,e("div",{onClick:c[0]||(c[0]=B=>r("handleTo","/levelPointsDetail")),class:"absolute bottom-3 left-4 z-50 level-bg justify-center h-9 min-w-[8rem] text-base text-white flex items-center"},[e("span",null,o(s.$t("home.level")),1),e("span",Re,"V"+o(n.value||0),1),Ue])]),e("div",De,[e("div",null,[e("div",Ze,[e("div",Ke,o(s.$t("home.score")),1),e("div",qe,o(t.userInfo.contribute||0),1)]),e("div",He,[e("div",Ge,o(s.$t("home.deductScore")),1),e("div",Qe,o(t.userInfo.totalContribute||0),1)]),e("div",Ye,[p(o(s.$t("home.nextLevel"))+" ",1),e("span",Je,[i(S)?(a(),d($,{key:1},[We],64)):(a(),d($,{key:0},[p(" V"+o((n.value||0)+1),1)],64))])]),n.value>0&&!i(S)?(a(),d($,{key:0},[e("div",Xe,[e("div",et,o(s.$t("home.keepScore",{num:u.value.one||0})),1),e("div",tt,[(+t.userInfo.contribute||0)>=+u.value.one?(a(),d("img",st)):(a(),d("img",ot))])]),e("div",nt,[e("div",at,o(s.$t("home.deductScore",{num:u.value.two||0})),1),e("div",lt,[(+t.userInfo.totalContribute||0)>=+u.value.two?(a(),d("img",it)):(a(),d("img",ct))])])],64)):A("",!0)]),e("div",rt,[C(z,{class:"w-full font-bold text-white btn h-9 btn-orange",round:"",onClick:c[1]||(c[1]=B=>r("invite"))},{default:m(()=>[p(o(s.$t("home.inviteRegister")),1)]),_:1}),i(S)?A("",!0):(a(),d($,{key:0},[n.value>0?(a(),k(z,{key:0,class:U(["w-full font-bold text-white h-9",+u.value.one>+t.userInfo.contribute||+u.value.two>+t.userInfo.totalContribute?"btn-disabled":"btn-orange"]),disabled:+u.value.one>+t.userInfo.contribute||+u.value.two>+t.userInfo.totalContribute,loading:i(g),onClick:O},{default:m(()=>[p(o(s.$t("home.upgrade")),1)]),_:1},8,["disabled","class","loading"])):(a(),k(z,{key:1,class:"w-full font-bold text-white h-9 btn-orange",loading:i(g),onClick:O},{default:m(()=>[p(o(s.$t("home.upgrade")),1)]),_:1},8,["loading"]))],64))]),ut])],64)):(a(),k(Ee,{key:1,openFee:V.value,buyMember:i(b),onClose:c[2]||(c[2]=B=>r("close")),onGetIsVip:j},null,8,["openFee","buyMember"]))],2)]),_:1},8,["show","style"])}}}),wt=T(dt,[["__scopeId","data-v-a9031166"]]);export{_t as I,wt as L};
