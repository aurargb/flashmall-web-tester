import{_ as M,y as G,w as Y,be as R,r as l,x as Z,bf as X,E as C,K as z,G as _,N as w,H as n,Q as p,O as f,a4 as A,R as P,P as r,$ as U,F as H,J as K,a0 as N,I as O,Y as J,Z as Q,a1 as ee}from"./vendor-Ba70TIw4.js";import{E as te}from"./Item-jUXbH4f2.js";import{ab as $,N as se,q as oe}from"./index-DiRx6UeW.js";import{B as ne}from"./BackIcon-DkqwcD_b.js";import{h as le}from"./otc-B7eWfgeg.js";const ae=""+new URL("../images/filter-BdP5HjSE.svg",import.meta.url).href,ie=i=>(J("data-v-1b9ed6a7"),i=i(),Q(),i),re={class:"text-center"},de={class:"py-6 flex-start"},ue=ie(()=>n("div",{class:"mx-3"},"-",-1)),me={class:"flex items-center justify-start gap-3 py-6"},ce={class:"pt-3 flex-center-bw"},pe=G({props:{show:{type:Boolean}},emits:["close","filter"],setup(i,{emit:F}){const{show:k}=i,{t:h}=Y(),[u,m]=R(!1),[g,c]=R(!1),v=l(),b=l(),L=l(new Date(new Date("2020/1/1").getTime())),S=l(),E=Z(()=>[{id:0,label:h("common.all")},{id:1,label:h("common.buy filter")},{id:2,label:h("common.sale filter")}]),t=X({startTime:null,endTime:null}),V=()=>{t.endTime=null,t.startTime=null,T.value=0,x.value=0},T=l(0),B=e=>{T.value=e},x=l(0),y=()=>{m(!1),c(!1),(!t.startTime||!t.endTime)&&(t.endTime=null,t.startTime=null)},q=e=>{v.value=new Date($(e)),S.value=new Date(new Date(e).getTime()),t.startTime=$(v.value),m(!1),c(!0)},I=e=>{b.value=new Date($(e)),t.startTime=$(v.value),t.endTime=$(e),c(!1)},s=()=>{const e={direct:T.value,clinch:x.value,startTime:t.startTime?t.startTime+" 00:00:00":t.startTime,endTime:t.endTime?t.endTime+" 23:59:59":t.endTime};F("filter",e)};return(e,o)=>{const d=C("van-datetime-picker"),D=C("van-popup"),j=C("VanButton"),W=C("VanPopup");return _(),z(W,{show:i.show,"onUpdate:show":o[6]||(o[6]=a=>U(k)?k.value=a:null),position:"bottom",round:"",class:"p-5",teleport:"body",closeable:"",style:{minHeight:"60vh"},"close-on-click-overlay":"",onClose:o[7]||(o[7]=()=>{F("close")})},{default:w(()=>[n("div",null,[n("div",re,p(e.$t("common.filter")),1)]),n("div",null,p(e.$t("common.Time")),1),n("div",de,[n("div",{class:"rounded bg-[#F5F5F5] h-[35px] van-cell flex justify-center items-center",onClick:o[0]||(o[0]=A(a=>r(m)(!0),["stop"]))},[n("div",{class:P({"opacity-30":!r(t).startTime})},p(r(t).startTime||e.$t("goods.selectStartTime")),3)]),f(D,{show:r(u),"onUpdate:show":o[2]||(o[2]=a=>U(u)?u.value=a:null),position:"bottom",round:"",teleport:"body",style:{height:"50%"},"close-on-click-overlay":!1},{default:w(()=>[f(d,{modelValue:v.value,"onUpdate:modelValue":o[1]||(o[1]=a=>v.value=a),"min-date":L.value,type:"date",title:e.$t("goods.selectStartTime"),onCancel:y,onConfirm:q},null,8,["modelValue","min-date","title"])]),_:1},8,["show"]),ue,n("div",{class:"rounded bg-[#F5F5F5] h-[35px] van-cell flex justify-center items-center",onClick:o[3]||(o[3]=A(a=>r(m)(!0),["stop"]))},[n("div",{class:P({"opacity-30":!r(t).endTime})},p(r(t).endTime||e.$t("goods.selectEndTime")),3)]),f(D,{show:r(g),"onUpdate:show":o[5]||(o[5]=a=>U(g)?g.value=a:null),position:"bottom",round:"",teleport:"body",style:{height:"50%"},"close-on-click-overlay":!1},{default:w(()=>[f(d,{modelValue:b.value,"onUpdate:modelValue":o[4]||(o[4]=a=>b.value=a),onConfirm:I,"min-date":S.value,onCancel:y,type:"date",title:e.$t("goods.selectEndTime")},null,8,["modelValue","min-date","title"])]),_:1},8,["show"])]),n("div",null,p(e.$t("common.direction")),1),n("div",me,[(_(!0),H(O,null,K(r(E),a=>(_(),z(j,{class:P(["rounded text-sm px-3 h-[35px]",T.value===a.id?"bg-[#FEA021] text-white":"bg-[#F5F5F5] text-black"]),key:a.id,onClick:Ce=>B(a.id)},{default:w(()=>[N(p(a.label),1)]),_:2},1032,["class","onClick"]))),128))]),n("div",ce,[f(j,{class:"border-orange bg-[#fff] rounded-3xl text-[#FEA021] w-[150px] h-[40px]",onClick:V},{default:w(()=>[N(p(e.$t("common.reset")),1)]),_:1}),f(j,{class:"btn-orange rounded-3xl text-white w-[150px] h-[40px]",onClick:s},{default:w(()=>[N(p(e.$t("common.confirm")),1)]),_:1})])]),_:1},8,["show"])}}}),fe=M(pe,[["__scopeId","data-v-1b9ed6a7"]]),ve=i=>se("GET","/wmaiKline/tradeList",i),Te=i=>(J("data-v-7871899c"),i=i(),Q(),i),ye={class:"relative h-full bg-[#F5F5F5] font-Puhui safe-bottom-page"},he={class:"sticky top-[0rem] z-50 w-full h-[3.125rem] px-[1rem] bg-[#FFFFFF] flex items-center"},we={class:"relative w-full flex justify-between items-center"},ge={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[18.75rem] flex justify-center items-center"},be={class:"text-[#2E2008] text-[1.125rem] not-italic font-bold leading-[1.625rem] text-center"},xe=Te(()=>n("img",{src:ae,class:"w-[20px] h-[20px]"},null,-1)),_e=[xe],Fe={class:"relative mx-[0.75rem] my-[0.75rem] overflow-hidden"},$e=G({setup(i){const F=ee(),[k,h]=R(!1),u=l(!1),m=l(!1),g=l(0),c=l(0),v=l(10),b=l(0),L=l(null),S=1,E=l(""),t=l(""),V=F.query.key,T=F.query.type,B=async()=>{u.value=!0,c.value+=1,await q(),u.value=!1},x=l([]),y=l([]),q=async()=>{const s={type:g.value,startTime:E.value,endTime:t.value,userAddress:oe[`otc${V}`]};s.type===0&&delete s.type,s.startTime||delete s.startTime,s.endTime||delete s.endTime,V||delete s.userAddress;let e={queryStartTime:null,queryEndTime:null,type:null};Number(T)===2&&(e.queryStartTime=s.startTime,e.queryEndTime=s.endTime,e.type=s.type),e.queryStartTime||delete e.queryStartTime,e.queryEndTime||delete e.queryEndTime,e.type||delete e.type;const d=await(+T==2?ve({...e,page:c.value,size:v.value}):le({page:c.value,size:v.value},{...s}));if(u.value=!1,!d.success){m.value=!0;return}b.value=d.total,x.value=d.data,y.value=c.value===1?x.value:y.value.concat(x.value),y.value.length>=b.value?m.value=!0:m.value=!1},I=s=>{c.value=1,g.value=s.direct,L.value=s.clinch,E.value=s.startTime,t.value=s.endTime,h(!1),y.value=[],q()};return(s,e)=>{const o=C("VanList");return _(),H("div",ye,[n("div",he,[n("div",we,[f(ne),n("div",ge,[n("span",be,p(s.$t("common.Historical transactions")),1)]),n("div",{onClick:e[0]||(e[0]=d=>r(h)(!0))},_e)])]),n("div",Fe,[f(o,{loading:u.value,"onUpdate:loading":e[1]||(e[1]=d=>u.value=d),finished:m.value,"finished-text":s.$t("common.noMore"),"loading-text":s.$t("common.loading"),onLoad:B},{default:w(()=>[(_(!0),H(O,null,K(y.value,(d,D)=>(_(),z(te,{key:D,type:S,routerType:+r(T),info:d},null,8,["routerType","info"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),f(fe,{show:r(k),onClose:e[2]||(e[2]=d=>r(h)(!1)),onFilter:I},null,8,["show"])])}}}),De=M($e,[["__scopeId","data-v-7871899c"]]);export{De as default};
