import{y as j,be as oe,E as x,F as w,G as y,H as t,O as v,P as o,N as S,I as z,J as H,R as le,a1 as I,K,X as O,Q as l,a0 as ce,_ as ie,w as re,r as k,x as T,bf as de,D as ue,T as pe,Z as me,$ as _e,n as ye}from"./vendor-BlU_hoYl.js";import{v as fe,w as be,bO as he,A as d,D as $,E as L,F as D,G as M,H as V,r as ge,q as A,B as ve,s as xe,d as R,bN as U}from"./index-Clz0Qna-.js";import{_ as we}from"./LinkAddress-BHzawPiX.js";import{n as Fe}from"./nftContract-DYv6lLO5.js";const ke=""+new URL("../images/tip-icon-BgBW1BFB.svg",import.meta.url).href,Ce=""+new URL("../images/lang-Koz5IXIg.svg",import.meta.url).href,Ee={id:"lan",class:"text-black"},Be=t("img",{class:"w-8 h-8",src:Ce,alt:""},null,-1),$e=[Be],Le={class:"w-[150px] mt-20 ml-auto bg-[#f9f9f9] rounded-xl box-1 px-4"},De=["onClick"],Me=j({setup(i){const{langs:r,currentLocale:p,changeLocale:C}=fe(),[f,F]=oe(!1),E=a=>{be(a),C(a),F(!1)};return(a,s)=>{const b=x("van-icon"),e=x("VanPopup");return y(),w("div",Ee,[t("div",{onClick:s[0]||(s[0]=c=>o(F)(!o(f)))},$e),v(e,{show:o(f),"onUpdate:show":s[1]||(s[1]=c=>ce(f)?f.value=c:null),position:"top",style:{background:"transparent",width:"80%","min-width":"300px","max-width":"335px"}},{default:S(()=>[t("div",Le,[(y(!0),w(z,null,H(o(r),c=>(y(),w("div",{key:c.key,class:le(["font-Silom py-1 leading-10 border-b border-solid border-[#D9D9D9] flex justify-between items-center",{"text-[#FEA021]":o(p)===c.key}]),onClick:B=>E(c.key)},[I(l(c.text)+" ",1),o(p)===c.key?(y(),K(b,{key:0,name:"success",alt:""})):O("",!0)],10,De))),128))])]),_:1},8,["show"])])}}}),Ve=()=>{const i=he(),r=i==null?void 0:i.cns,p=i==null?void 0:i.address;return{buy:async a=>{try{const s=await r.estimateGas.buy(d(a)),e=await(await r.buy(d(a),{gasLimit:L(s,1e3),...$})).wait();return D(e)}catch(s){return M(s),V(s,p,"buy",{coin:d(a)})}},donate:async a=>{try{const s=await r.estimateGas.donate(d(a)),e=await(await r.donate(d(a),{gasLimit:L(s,1e3),...$})).wait();return D(e)}catch(s){return M(s),V(s,p,"donate",{amount:d(a)})}},sell:async a=>{try{const s=await r.estimateGas.sell(d(a)),e=await(await r.sell(d(a),{gasLimit:L(s,1e3),...$})).wait();return D(e)}catch(s){return M(s),V(s,p,"sell",{coin:d(a)})}},reduceCoin:async a=>{try{const s=await r.estimateGas.reduceCoin(d(a)),e=await(await r.reduceCoin(d(a),{gasLimit:L(s,1e3),...$})).wait();return D(e)}catch(s){return M(s),V(s,p,"reduceCoin",{coin:d(a)})}}}},Se=i=>(me("data-v-8f0ba03e"),i=i(),_e(),i),Te={class:"w-full h-full container-bg"},Ie={class:"sticky top-0 z-10 flex items-center justify-between px-3 pt-3 mb-6 text-lg text-white"},Ne={class:"text-xl font-semibold text-[#2E2008]"},Pe={class:"flex"},Ge={class:"px-3"},Ae={class:"px-3 pt-3 rounded-xl bg-[#FFFDF8]"},Re={class:"rounded-md bg-[#FFF8EC] px-4 pt-5"},Ue={class:"text-shadow mb-7"},je={class:"flex justify-between mb-5"},ze={class:"text-sm font-semibold"},He={class:"text-[#928D84]"},Ke={class:"flex justify-between pb-6"},Oe={class:"text-sm font-semibold"},We={class:"text-[#928D84]"},Xe={class:"px-4 pt-5"},qe={class:"flex justify-between mb-5"},Je={class:"text-sm font-semibold"},Qe={class:"text-[#928D84]"},Ze={class:"flex justify-between pb-5"},Ye={class:"text-sm font-semibold"},et={class:"text-[#928D84]"},tt={class:"rounded-xl bg-[#FFFDF8] px-3 mt-5"},st={class:"text-[#2E2008] text-sm font-semibold mt-5"},at={class:"mt-4 px-4 py-5 bg-[#FFF8EC] rounded-xl"},nt={class:"py-5 text-center"},ot={key:0,class:"flex justify-center text-xs text-[#483535] pb-5"},lt=Se(()=>t("img",{class:"w-4 h-4",src:ke,alt:""},null,-1)),ct=j({setup(i){const{coinPool:r,tokenPrice:p,tokenPool:C,payToken:f,userList:F}=Fe(),{buy:E,donate:a,sell:s,reduceCoin:b}=Ve(),{t:e}=re(),{loadingToggle:c}=ge(),B=k("0"),u=k(null),N=k("0"),P=k("0"),g=k(1),W=T(()=>({1:e("common.buy"),2:e("admin.sell"),3:e("nft.donate energy"),4:e("nft.donate MC")})),X=T(()=>m.systemMc*.8/+B.value||0),q=T(()=>[{label:e("nft.purchase energy"),type:1,coin:null,title:e("admin.purchase-energy-input"),placeholder:e("admin.purchase-energy-placeholder",{num:parseFloat(X.value.toFixed(2))})},{label:e("nft.sell energy"),type:2,coin:null,title:e("admin.sell-energy-input"),placeholder:e("admin.sell-energy-placeholder",{num:parseFloat(m.systemEnergy.toFixed(2))})},{label:e("nft.donate energy"),type:3,coin:null,title:e("admin.donate-energy-input"),placeholder:e("admin.donate-energy-placeholder",{num:parseFloat(m.systemEnergy.toFixed(2))})},{label:e("nft.donate MC"),type:4,coin:null,title:e("admin.donate-MC-input"),placeholder:e("admin.donate-MC-placeholder",{num:parseFloat(m.systemMc.toFixed(2))})}]),m=de({systemEnergy:0,systemMc:0}),J=async()=>{c(!0);let n;if(u.value&&u.value>0)switch(g.value){case 1:n=await E(u.value);break;case 2:n=await s(u.value);break;case 3:n=await b(u.value);break;case 4:n=await a(u.value);break}else return;c(!1),n.success&&(pe(e("admin.Successful-operation")),G())},Q=n=>{ye(()=>{u.value=n>=0?n:0})},Z=async()=>{const{success:n,result:_}=await F(0,A.gold);n&&(m.systemEnergy=+ve(_.coin))},Y=async()=>{const{balanceOf:n}=xe(await f()),_=await n(A.gold);m.systemMc=+_},G=async()=>{u.value=null,c(!0),B.value=await p(),N.value=await r(),P.value=await C(),Z(),Y(),c(!1)};return ue(async()=>{G()}),(n,_)=>{const ee=x("van-field"),te=x("van-tab"),se=x("van-tabs"),ae=x("VanButton");return y(),w("div",Te,[t("div",Ie,[t("div",Ne,l(o(e)("admin.title")),1),t("div",Pe,[v(Me,{class:"mr-2.5"}),v(we)])]),t("div",Ge,[t("div",Ae,[t("div",Re,[t("div",Ue,l(o(R)(B.value||0))+" MC",1),t("div",je,[t("span",ze,l(n.$t("nft.Total Supply")),1),t("span",He,l(o(U)(o(R)(N.value,6))),1)]),t("div",Ke,[t("span",Oe,l(n.$t("nft.Pool Balance")),1),t("span",We,l(o(U)(+P.value))+" Â Mcoin",1)])]),t("div",Xe,[t("div",qe,[t("span",Je,l(n.$t("nft.system energy value")),1),t("span",Qe,l(parseFloat(o(m).systemEnergy.toFixed(2))),1)]),t("div",Ze,[t("span",Ye,l(n.$t("nft.system mc balance")),1),t("span",et,l(parseFloat(o(m).systemMc.toFixed(2))),1)])])]),t("div",tt,[v(se,{active:g.value,"onUpdate:active":_[1]||(_[1]=h=>g.value=h),"title-active-color":"#2E2008","title-inactive-color":"#ADA9A2","line-width":"3.6rem",background:"#FFFDF8",ellipsis:!1,swipeable:""},{default:S(()=>[(y(!0),w(z,null,H(o(q),h=>(y(),K(te,{"title-style":"font-weight: 600",title:h.label,name:h.type,key:h.label},{default:S(()=>[t("div",st,l(h.title),1),t("div",at,[v(ee,{"onUpdate:modelValue":[Q,_[0]||(_[0]=ne=>u.value=ne)],modelValue:u.value,type:"number",min:0,placeholder:h.placeholder,style:{"background-color":"#fff8ec"}},null,8,["modelValue","placeholder"])])]),_:2},1032,["title","name"]))),128))]),_:1},8,["active"]),t("div",nt,[v(ae,{disabled:!u.value,class:"w-1/2 font-semibold text-white btn-bg rounded-xl",onClick:J},{default:S(()=>[I(l(o(W)[g.value]||o(e)("common.buy")),1)]),_:1},8,["disabled"])]),g.value==1||g.value==2?(y(),w("div",ot,[lt,I(" "+l(n.$t("nft.Executededuction")),1)])):O("",!0)])])])}}}),pt=ie(ct,[["__scopeId","data-v-8f0ba03e"]]);export{pt as default};
