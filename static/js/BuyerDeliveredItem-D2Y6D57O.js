import{y as $,l as B,r as j,x as b,B as c,D as I,E as O,F as o,G as n,H as e,a3 as D,a4 as v,P as i,Q as a,I as w,J as E,X as k,O as F}from"./vendor-BlU_hoYl.js";import{_ as A}from"./MCOIN-BOqZVkND.js";import{_ as L}from"./USDT-CNsbs3BR.js";import{u as M,p as V}from"./useOrderStatus-D1Cw0BRr.js";import{P as U}from"./order-H59PKTFP.js";import{d,f as G}from"./index-UgIL2Smv.js";import{P}from"./flashSale-DDyqLyYN.js";import{u as q}from"./useShipTemplate-C35bKCd2.js";import{a as T}from"./useRefund-CagomE1G.js";import{d as H}from"./default-avatar-DfqlD94j.js";const J={class:"p-3 mt-3 bg-white rounded-xl font-Puhui"},Q={class:"flex justify-between"},W={class:"flex items-center overflow-hidden"},X=["src"],z={class:"text-base font-semibold text-b1 line-clamp-1 ml-1"},K={class:"font-semibold text-[#FF8812] text-sm line-clamp-1"},Y={key:0},Z={key:0},ee={key:1},te={key:2},se={class:"flex w-full gap-3"},oe={class:"w-[calc(100%-40px-60px)] flex-1 flex flex-col min-h-[5rem] justify-between"},ne={class:"flex items-baseline justify-between font-semibold"},ae={class:"text-base text-b1 font-semibold line-clamp-1 text-ellipsis"},re={class:"text-sm text-b3 font-normal mt-1"},ie={key:0,class:"flex justify-between mt-2"},le={class:"text-sm font-normal text-b3 line-clamp-1"},ce={key:0},de={key:1},me={class:"text-[#FF8812] text-sm font-normal font-Puhui"},ue={key:0},fe={key:0},he={key:1,class:"text-b1 text-sm flex-start gap-1"},pe=e("img",{src:A,class:"w-4 h-4 mr-[3px]",alt:"MCOIN"},null,-1),ye={class:"font-semibold"},xe={key:1,class:"flex items-center flex-nowrap"},_e={class:"text-b1 text-sm flex-start gap-1"},be=e("img",{src:L,class:"w-4 h-4 mr-[3px]",alt:"USDT"},null,-1),ve={class:"font-semibold"},we={key:0},ke={key:1,class:"text-b1 text-sm flex-start gap-1 flex-nowrap"},Pe=e("span",null,"(",-1),Te=e("img",{src:A,class:"w-4 h-4 mr-[3px]",alt:"MCOIN"},null,-1),Ae={class:"font-semibold"},Se=e("span",null,")",-1),Ce={key:0,class:"mt-1 flex-center-bw"},ge={class:"text-sm font-normal text-b3 line-clamp-1"},Ne={class:"flex items-center text-sm font-normal text-b3 line-clamp-1"},Ve=$({props:{order:null,isList:{type:Boolean},showPrice:{type:Boolean,default:!0},showShippingTemplate:{type:Boolean,default:!1}},setup(s){const m=s,S=B(),C=M(m.order),h=j(null),u=b(()=>1/h.value),g=async()=>{const{mcoinRate:t}=G();h.value=await t()};b(()=>{var t;return!((t=m.order)!=null&&t.totalAmount)||!u.value?0:new c(m.order.totalAmount).times(u.value).toNumber()});const p=t=>{S.push(t)},{getExpressTypeText:N}=q(),y=t=>{const l=new c(t.price).times(t.number).minus(t.goodsActivityReduceAmount||0).plus(t.goodsAdjustChangeAmount||0).toNumber();return d(l||0)},R=t=>{const l=new c(t.price).times(t.number).minus(t.goodsActivityReduceAmount||0).plus(t.goodsAdjustChangeAmount||0).times(u.value).toNumber();return d(l||0)};return I(async()=>{await g()}),(t,l)=>{const f=O("VanImage");return n(),o("div",J,[e("div",Q,[e("div",{class:"flex-start",onClick:l[0]||(l[0]=v(r=>p(`/category?deliveryType=1&shopId=${s.order.stores.id}`),["stop"]))},[e("div",W,[e("img",{src:s.order.stores.logo||i(H),class:"flex-shrink-0 w-[30px] h-[30px] rounded-full object-cover"},null,8,X),e("div",z,a(s.order.stores.storeName||"--"),1)])]),e("div",K,[i(T)(s.order).available?(n(),o("span",Y,a(i(T)(s.order).label),1)):(n(),o(w,{key:1},[s.order.status==-1?(n(),o("span",Z,a(t.$t("order.canceled")),1)):s.order.status===0&&s.order.hash?(n(),o("span",ee,a(t.$t("order.wait block chain")),1)):(n(),o("span",te,a(i(C)[s.order.status+""]),1))],64))])]),(n(!0),o(w,null,E(s.order.orderGoods,r=>{var x,_;return n(),o("div",{class:"mt-4",key:r.goodsName},[e("div",null,[e("div",se,[F(f,{onClick:v(Re=>p(`/buyerOrderList/detail?id=${r.goodsId}`),["stop"]),src:(r.icons||"").split(",")[0],class:"shrink-0 w-20 h-20 overflow-hidden rounded-[8px]",alt:"",fit:"cover"},null,8,["onClick","src"]),e("div",oe,[e("div",null,[e("div",ne,[e("div",ae,a(r.goodsName),1)]),e("div",re,a(t.$t("order.quantity",{number:r.number||0})),1)]),s.showPrice?(n(),o("div",ie,[e("span",le,[s.order.paySource?(n(),o("span",ce,a(i(V)(+s.order.paySource)),1)):(n(),o("span",de,a(t.$t("order.payAmount"))+" :",1))]),e("div",me,[+s.order.paySource!==i(U).USDT_WALLET?(n(),o("div",ue,[s.order.payType===i(P).STORE_CARD?(n(),o("span",fe,a(i(d)(+new i(c)(r.cardPrice).times(r.number??1)||0))+" "+a((x=s.order.fmStoredCard)==null?void 0:x.symbol),1)):(n(),o("span",he,[pe,e("span",ye,a(y(r)),1)]))])):(n(),o("div",xe,[e("span",_e,[be,e("span",ve,a(R(r)),1)]),s.order.payType===i(P).STORE_CARD?(n(),o("span",we," ("+a(i(d)(+new i(c)(r.cardPrice)||0))+" "+a((_=s.order.fmStoredCard)==null?void 0:_.symbol)+") ",1)):(n(),o("span",ke,[Pe,Te,e("span",Ae,a(y(r)),1),Se]))]))])])):k("",!0)])]),s.showShippingTemplate&&r.shippingTemplateType?(n(),o("div",Ce,[e("div",ge,a(t.$t("order.expressPrice")),1),e("div",Ne,a(i(N)(r)),1)])):k("",!0)])])}),128)),D(t.$slots,"default")])}}});export{Ve as _};
