import{_ as W,y as M,E as G,K as D,G as o,N as z,H as t,F as r,J as ee,a0 as j,Q as u,P as a,I as te,O as y,Y as se,Z as oe,a2 as g,be as X,r as m,D as xe,a3 as ye,a4 as K,R as $e,bs as Me,a1 as ke,w as be,l as Ie,x as ne,bt as Se,bc as Ce,T as V,U as Ae,bM as He,bo as Ee,X as Ne,$ as Pe,z as we,bj as Ve,n as Ue}from"./vendor-Ba70TIw4.js";import{_ as Xe}from"./auth-icon-QCWqqJ9q.js";import{_ as Ke}from"./member-BZWba7V1.js";import{b as Qe,_ as We,g as E,e as ue,bp as Ye,a7 as Ze,r as Te,u as Je,bq as et,aG as tt,br as st,W as ce,bs as ot,X as nt,aF as lt,bt as at,T as it}from"./index-Bsb9uxb4.js";import{R as J}from"./rangking-soiwLY3n.js";import{_ as ct,M as rt}from"./MetaKeyTag-DSSf9cM_.js";import{_ as ut}from"./ExpressMinutesTag-fPnBfgtt.js";import{R as Le}from"./RatioBox-Q-7JJrFz.js";import{_ as dt}from"./ApproveInfo-Cb3k8FrI.js";import{B as mt}from"./BoutiqueLabelInLogo-BUC1vRQ4.js";import{q as ft}from"./beiRanking-tv2uu_jO.js";import{_ as ht}from"./MCOIN-Bodfn-v1.js";import{_ as pt}from"./ImgBoutiqueLable-BMjuak4g.js";import{q as vt}from"./cart-0_V967CA.js";import{C as gt}from"./CommonVanProvider-CqQk6UpZ.js";import{_ as yt}from"./logo-D1FnEJzd.js";import{c as wt,i as _t,s as xt}from"./convertToImage-m1jYF5Hn.js";import{M as $t}from"./MallTabBar-BhgX0E7E.js";import{R as kt}from"./RemovedShelves-UlwtpV4L.js";import{b as _e}from"./mall-BukQeouS.js";import{s as bt}from"./useOrderStatus-eiwKm5Dv.js";import{O as It,c as St}from"./offlineGoods-DvT2Go6q.js";import"./shop-CeqcS6K2.js";import"./BackIcon-DkqwcD_b.js";import"./browser-DFlSdkZC.js";import"./upload-5NCXgND6.js";const Ct=""+new URL("../images/kefu-D_Ko4rIY.svg",import.meta.url).href,Tt=""+new URL("../images/collect-oXqS1C1N.png",import.meta.url).href,Lt=""+new URL("../images/collected-BX-G0Q8O.png",import.meta.url).href,Bt=""+new URL("../images/share-tVl568Cu.svg",import.meta.url).href,Dt=""+new URL("../images/governance-BAxxHEE2.svg",import.meta.url).href,Rt=e=>(se("data-v-754a2b67"),e=e(),oe(),e),qt={class:"py-8 text-base text-center text-black"},Ft={class:"flex flex-wrap items-center justify-center flex-1 gap-x-4 gap-y-1"},zt={class:"w-[30px] flex-center bg-[#FED73A] rounded-3xl ml-1"},Gt=Rt(()=>t("img",{src:Ke,class:"w-2.5 h-2.5"},null,-1)),Ot={class:"text-xs"},jt={class:"mt-5"},Mt={class:"flex justify-center"},At=M({props:{show:{type:Boolean},list:{default:()=>[]}},emits:["close"],setup(e,{emit:d}){return(f,i)=>{const l=G("van-button");return o(),D(We,{width:"90%",show:e.show,name:f.$t("shop.Service Guarantee"),teleport:"body",onClose:i[1]||(i[1]=()=>{d("close")})},{default:z(()=>[t("div",qt,[t("div",Ft,[(o(!0),r(te,null,ee(e.list,k=>(o(),r("div",{class:"flex items-center text-sm",key:k},[j(u(k.address&&a(Qe)(k.address,"....",4,3))+" ",1),t("div",zt,[Gt,t("span",Ot,"v"+u(k.memberLevel),1)])]))),128))]),t("div",jt,u(f.$t("shop.Already guaranteed for this store")),1)]),t("div",Mt,[y(l,{class:"w-1/2 mx-2.5 btn-orange btn-shadow text-white font-semibold",onClick:i[0]||(i[0]=k=>d("close"))},{default:z(()=>[j(u(f.$t("common.confirm")),1)]),_:1})])]),_:1},8,["show","name"])}}}),Ht=W(At,[["__scopeId","data-v-754a2b67"]]),Et={key:0,class:"flex items-center min-w-fit"},Nt=["src"],Pt={class:"bg-[#FFF1D6] rounded-2xl text-xs font-normal py-0.5 px-1.5 pl-3.5"},Vt=M({props:{rankNum:null,type:{default:J.SR},showHelpButton:{type:Boolean,default:!1},isLogin:{type:Boolean,default:!1}},emits:["help"],setup(e){return(d,f)=>+e.rankNum>0?(o(),r("div",Et,[t("img",{src:a(E)(`images/shop/rank${e.rankNum>3?4:e.rankNum}.png`),class:"inline-block w-[14px] h-[16px] -mr-2.5 z-10"},null,8,Nt),t("div",Pt,[j(u(e.type===a(J).EBR?d.$t("ranking.store boost",{num:e.rankNum}):d.$t("ranking.recently hot sales",{num:e.rankNum}))+" ",1),e.showHelpButton&&e.isLogin?(o(),r("span",{key:0,onClick:f[0]||(f[0]=i=>d.$emit("help")),class:"ml-1 text-newOrigin text-xs font-normal cursor-pointer text-left"},u(e.type===a(J).EBR?d.$t("ranking.power_to"):d.$t("mall.Help TA")),1)):g("",!0)])])):g("",!0)}}),Ut=e=>(se("data-v-054950fa"),e=e(),oe(),e),Xt={class:"relative"},Kt={class:"py-3 z-[999]"},Qt={class:"w-full flex justify-start items-center px-2.5"},Wt={class:"w-10 h-10 rounded-[4px] overflow-hidden flex-shrink-0 relative"},Yt=["src"],Zt={class:"absolute right-0 top-0"},Jt={class:"ml-2 flex flex-col justify-between items-start"},es={key:0,src:Dt,class:"w-4 mr-1 align-text-top"},ts={class:"flex items-center bg-[#FED73A] rounded-xl py-[0.20rem] px-1.5"},ss=Ut(()=>t("img",{src:Xe,class:"inline-block w-3 h-3 mr-0.5"},null,-1)),os={class:"text-xxs text-default"},ns={class:"flex items-center text-sm text-primary"},ls={class:"ml-1"},as={class:"h-10 flex flex-col justify-start items-center ml-auto flex-shrink-0"},is={class:"w-full flex justify-start items-center mt-2 gap-1.5 overflow-x-auto px-2.5"},cs={class:"mt-3 overflow-x-auto px-2.5"},rs={key:0,class:"flex"},us=["onClick"],ds=["src"],ms={key:1,class:"flex"},fs={class:"flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]"},hs=["src"],ps=M({props:{info:null,list:{default:()=>[]},authorizeInfo:null},emits:["handleTo"],setup(e,{expose:d,emit:f}){const i=e,{accountStore:l}=ue(),[k,w]=X(!1),[I,R]=X(!1),T=m({}),L=async()=>{var h,_,v,S,$;if(!((h=i.info)!=null&&h.id))return;const{success:b,data:c}=await ft({shopId:(_=i.info)==null?void 0:_.id,month:Ye()});!b||(c==null?void 0:c.status)!==1||(T.value={...c,mai:c.allMai,type:2,id:c.rankingId,avatar:(v=i.info)==null?void 0:v.logo,nickname:(S=i.info)==null?void 0:S.storeName,address:($=i.info)==null?void 0:$.merchant})},F=b=>{const c=i.info.scenery.split(",")||[];Me({images:c,startPosition:b||0,loop:!1,closeOnPopstate:!0})};return xe(()=>{L()}),d({getMyRanking:L}),(b,c)=>{var _,v,S;const h=G("van-rate");return o(),r("div",Xt,[t("div",Kt,[t("div",Qt,[t("div",Wt,[t("img",{src:e.info.logo||e.info.scenery&&e.info.scenery.split(",")[0]||a(E)("images/goods/defaultImg.png"),class:"w-10 h-full object-cover"},null,8,Yt),t("div",Zt,[y(mt,{type:e.info.type},null,8,["type"])])]),t("div",Jt,[t("div",{class:"text-base font-semibold text-black line-clamp-1 max-w-max leading-[22px] inline-flex",onClick:c[1]||(c[1]=K($=>e.list&&e.list.length>0?a(R)(!0):null,["stop"]))},[e.list&&e.list.length>0?(o(),r("img",es)):g("",!0),j(" "+u(e.info.storeName)+" ",1),(_=e.authorizeInfo)!=null&&_.authorizeAddress?(o(),r("div",{key:1,onClick:c[0]||(c[0]=K(()=>{a(w)(!0)},["stop"])),class:"inline-block ml-1.5 lex-shrink-0 align-text-bottom"},[t("div",ts,[ss,t("span",os,u(b.$t("ecology.authorized")),1)])])):g("",!0)]),t("div",ns,[y(h,{class:"flex-shrink-0",readonly:"","allow-half":"",modelValue:e.info.star,"onUpdate:modelValue":c[2]||(c[2]=$=>e.info.star=$),size:16,gutter:"0",color:"#FEA021"},null,8,["modelValue"]),t("span",ls,u(e.info.star),1)])]),t("div",as,[y(Le,{tag:b.$t("common.rebate"),ratio:e.info.discountRatio||0},null,8,["tag","ratio"])])]),t("div",is,[(v=T.value)!=null&&v.sort?(o(),D(Vt,{key:0,"rank-num":(S=T.value)==null?void 0:S.sort,type:a(J).EBR,"show-help-button":!0,"is-login":a(l).isLogin,onHelp:c[3]||(c[3]=$=>f("handleTo",`/talentRanking/rankingShop?shopId=${e.info.id}`))},null,8,["rank-num","type","is-login"])):g("",!0),ye(b.$slots,"like",{},void 0,!0),y(ct,{type:e.info.buyFlag?1:e.info.watchFlag?2:e.info.followFlag?3:0},null,8,["type"]),e.info.recentExpressSeconds?(o(),D(ut,{key:1,time:e.info.recentExpressSeconds},null,8,["time"])):g("",!0),e.info.metakeyFlag?(o(),D(rt,{key:2})):g("",!0)]),t("div",cs,[e.info.scenery?(o(),r("div",rs,[(o(!0),r(te,null,ee(e.info.scenery.split(","),($,A)=>(o(),r("div",{key:$,class:$e(["flex-shrink-0 w-[calc((100%-16px)/3)] h-[105px]",e.info.scenery.split(",").length-1===A?"":"mr-2"]),onClick:H=>F(A)},[t("img",{src:$||a(E)("images/goods/defaultImg.png"),class:"object-cover w-full h-full aspect-square rounded-xl",alt:""},null,8,ds)],10,us))),128))])):(o(),r("div",ms,[t("div",fs,[t("img",{src:e.info.logo||a(E)("images/goods/defaultImg.png"),class:"w-full h-full aspect-square rounded-xl object-cover"},null,8,hs)])]))]),ye(b.$slots,"default",{},void 0,!0)]),y(Ht,{list:e.list,show:a(I),onClose:c[4]||(c[4]=$=>a(R)(!1))},null,8,["list","show"]),a(k)&&e.authorizeInfo?(o(),D(dt,{key:0,show:a(k),info:e.authorizeInfo,onClose:c[5]||(c[5]=$=>a(w)(!1))},null,8,["show","info"])):g("",!0)])}}}),vs=W(ps,[["__scopeId","data-v-054950fa"]]),gs=""+new URL("../images/plus-DOIrZp3k.png",import.meta.url).href,ys={key:0,class:"bg-white rounded-xl p-3 my-3"},ws={class:"text-base font-semibold"},_s=["onClick"],xs={class:"relative w-[80px] h-[80px] flex-shrink-0 bg-b5 overflow-hidden rounded-lg"},$s={class:"object-cover w-full h-full aspect-square",fit:"cover"},ks={class:"w-full min-h-[80px] flex flex-col justify-between ml-2"},bs={class:"text-b1 font-semibold line-clamp-1"},Is={class:"text-b3 font-normal line-clamp-1"},Ss={class:"text-b3 font-normal"},Cs={class:"flex justify-between items-center"},Ts={class:"flex-start"},Ls=t("img",{class:"w-4 h-4 mr-1",src:ht},null,-1),Bs={class:"font-semibold mr-1"},Ds=["onClick"],Rs=t("img",{src:gs,class:"w-5 h-5"},null,-1),qs=[Rs],Fs={key:0},zs={key:1},Gs=M({props:{merchantAddress:null},setup(e,{expose:d}){const f=e,i=ke(),{t:l}=be(),k=Ie(),w=m([]),I=m(!1),R=m(!1),T=m(0),L=m(10),F=m(0),[b,c]=X(!1),h=()=>{c(!b.value)},_=p=>{k.push(`/goodsDetail?id=${p.id}`)},v=async()=>{I.value=!0,T.value+=1,await A(),I.value=!1},S=ne(()=>{var p;return b.value?w.value:(p=w.value)==null?void 0:p.slice(0,2)}),$=m([]),A=async()=>{const p=await Ze({page:T.value,size:L.value,isActivity:1,boutiqueTop:!0,merchantAddress:f.merchantAddress});if(I.value=!1,!p.success){R.value=!0;return}if(!p.data||!p.total){R.value=!0;return}F.value=p.total,$.value=p.data||[],w.value=T.value===1?$.value:w.value.concat($.value),w.value.length>=F.value&&(R.value=!0)},H=()=>{T.value=0,F.value=0,R.value=!1,w.value=[],v()},O=async p=>{if(p.stock===0&&p.goodsTypes!==2){V(l("order.Insufficient stock"));return}V.loading({duration:0});const N={needlogin:"true",...i.query};k.replace({path:i.path,query:N});const U=await vt(p.id);V.clear(),U.success&&V(l("cart.addTips"))};return d({init:H}),(p,N)=>{const U=G("van-icon"),le=G("VanList"),Y=Se("lazy");return R.value&&F.value===0?g("",!0):(o(),r("div",ys,[t("div",ws,u(p.$t("shop.curactive")),1),y(le,{loading:I.value,"onUpdate:loading":N[0]||(N[0]=B=>I.value=B),finished:R.value,"loading-text":p.$t("common.loading"),onLoad:v},{default:z(()=>[(o(!0),r(te,null,ee(a(S),B=>(o(),r("div",{class:"flex mt-3",key:B.id,onClick:P=>_(B)},[t("div",xs,[Ce(t("img",$s,null,512),[[Y,B.icons&&B.icons.split(",")[0]||a(E)("images/goods/defaultImg.png")]]),y(pt,{activity:!0,type:2})]),t("div",ks,[t("section",null,[t("div",bs,u(B.goodsName),1),t("div",Is,u(B==null?void 0:B.goodsDesc),1),t("div",Ss,u(p.$t("mall.15th sale",{salesVolume:B.volume15})),1)]),t("div",Cs,[t("div",Ts,[Ls,t("span",Bs,u(B.price),1),y(Le,{tag:p.$t("common.rebate"),ratio:B.discountRatio||0},null,8,["tag","ratio"])]),t("div",{onClick:K(P=>O(B),["stop"])},qs,8,Ds)])])],8,_s))),128)),w.value.length>2?(o(),r("div",{key:0,onClick:h,class:"text-xs text-b3 font-normal text-center mt-3.5"},[a(S).length==2?(o(),r("div",Fs,[j(u(p.$t("shop.chakanhuodongshsangpin"))+" ",1),y(U,{name:"arrow-down"})])):(o(),r("div",zs,[j(u(p.$t("refund.put way"))+" ",1),y(U,{name:"arrow-up"})]))])):g("",!0)]),_:1},8,["loading","finished","loading-text"])]))}}}),Os={class:"bg-white rounded-xl my-3 py-3"},js={class:"flex-center-bw px-3"},Ms={class:"text-base font-semibold"},As={class:"pl-3 pt-3"},Hs=["onClick"],Es={class:"object-cover w-full h-full aspect-square",fit:"cover"},Ns=M({props:{boutiqueGoods:null,title:null,type:null},emits:["toMore","toDetail"],setup(e,{emit:d}){const f=e,i=()=>{d("toMore",f.type)};return(l,k)=>{const w=G("van-icon"),I=G("van-swipe-item"),R=G("van-swipe"),T=Se("lazy");return o(),r("div",Os,[t("div",js,[t("div",Ms,u(e.title),1),t("div",{class:"text-xs text-b3 whitespace-nowrap",onClick:i},[j(u(l.$t("common.check more")),1),y(w,{name:"arrow"})])]),t("div",As,[y(R,{class:"flex-start",loop:!1,width:126,"show-indicators":!1},{default:z(()=>[(o(!0),r(te,null,ee(e.boutiqueGoods,(L,F)=>(o(),D(I,{class:"flex",key:L.id},{default:z(()=>[t("div",{class:$e(["flex-1 w-full",{"mr-4":F<e.boutiqueGoods.length-1}])},[t("div",{onClick:()=>d("toDetail",L),class:"relative w-[110px] h-[110px] flex-shrink-0 bg-black-100 overflow-hidden rounded-lg"},[Ce(t("img",Es,null,512),[[T,L&&L.goods&&L.goods.icons&&L.goods.icons.split(",")[0]||a(E)("images/goods/defaultImg.png")]])],8,Hs)],2)]),_:2},1024))),128))]),_:1})])])}}}),re=W(Ns,[["__scopeId","data-v-9f70f930"]]),Ps=""+new URL("../images/shop-zan-CIPmIHxz.svg",import.meta.url).href,Vs={class:"bg-[#FFF1D6] rounded-2xl text-xs py-0.5 px-1.5 flex items-center gap-x-1 min-w-fit"},Us=t("img",{src:Ps,class:"w-[14px] h-[14px]"},null,-1),Xs=M({props:{likeFlag:{type:Boolean,default:!0},likeCount:{default:0},isLogin:{type:Boolean,default:!1}},emits:["onLike"],setup(e){return(d,f)=>(o(),r("div",Vs,[Us,t("span",null,u(e.likeCount),1),!e.likeFlag&&e.isLogin?(o(),r("span",{key:0,onClick:f[0]||(f[0]=i=>d.$emit("onLike")),class:"text-newOrigin text-xs cursor-pointer text-left"},u(d.$t("shop.like")),1)):g("",!0)]))}}),Ks={class:"flex items-center justify-between text-b3 text-xs mt-3"},Qs={class:"w-[70%] flex items-center"},Ws={key:0,class:"shrink-0"},Ys={class:"w-fit line-clamp-1 truncate"},Zs={key:1,class:"shrink-0"},Js={class:"shrink-0 flex items-center whitespace-nowrap ml-3"},eo=M({props:{commentReview:null,commentTotal:null},setup(e){const d=e,f=ne(()=>{var i;return!!((i=d.commentReview)!=null&&i.commentContent)});return(i,l)=>{const k=G("van-icon");return o(),r("div",Ks,[t("div",Qs,[a(f)?(o(),r("div",Ws,"“")):g("",!0),t("div",Ys,u(e.commentReview.commentContent),1),a(f)?(o(),r("div",Zs,"”")):g("",!0)]),t("div",Js,[t("span",null,u(i.$t("offline.shop_evaluate_num",{num:e.commentTotal||0})),1),y(k,{name:"arrow",class:"text-xxs text-[#666] ml-1"})])])}}}),Be=e=>(se("data-v-2bfae1a2"),e=e(),oe(),e),to={class:"w-full h-[190px] overflow-hidden"},so=["src"],oo={key:0,class:"absolute left-0 w-full px-3 flex-center-bw top-3"},no={class:"ml-1 text-sm"},lo={class:"mt-[-45px]"},ao={class:"border-4 rounded-2xl border-solid border-[#FFF] drop-shadow-lg w-[90px] h-[90px] bg-[#D9D9D9] m-auto"},io=["src"],co={class:"text-[#2E2008] font-medium text-lg text-center mt-5"},ro={class:"flex items-center justify-between px-5 pt-10 pb-5"},uo={class:"flex items-center"},mo={class:"border border-solid border-[#D9D9D9] p-1"},fo={class:"text-[#2E2008] opacity-80 ml-3"},ho=Be(()=>t("br",null,null,-1)),po=Be(()=>t("img",{src:yt,class:"w-[60px] h-[60px] object-contain"},null,-1)),vo=M({props:{show:{type:Boolean},shopInfo:null},emits:["close","onSuceess"],setup(e,{emit:d}){const{shopInfo:f,show:i}=e,{width:l,height:k}=Ae(),w=m(null),I=m(100);He(w,_=>{const v=_[0],{height:S}=v.contentRect;I.value=S||100});const R=ne(()=>window.location.origin+"/#/category?deliveryType=1&init=1&shopId="+f.id),{loadingToggle:T}=Te(),[L,F]=X(!1),b=()=>{d("close")},c=()=>{F(!0),T(!0),document.getElementById("saveHtml")?setTimeout(()=>{h()},200):setTimeout(()=>{h()},3e3)},h=async()=>{let _=document.getElementById("saveHtml");_.style.display="block";const v=await wt(_);await _t(v)&&(_.style.display="none",xt(v,f.storeName||""),b(),_.style.display="block",F(!1),T(!1),d("onSuceess"))};return(_,v)=>{const S=G("van-icon"),$=G("VanButton"),A=G("van-popup");return o(),D(A,{show:e.show,"onUpdate:show":v[1]||(v[1]=H=>Pe(i)?i.value=H:null),onClickOverlay:b,class:"w-full h-full bg-default/20",style:Ne({paddingLeft:`${(a(l)-300)/2}px`,paddingTop:`${(a(k)-I.value)/2}px`}),onClick:b},{default:z(()=>[t("div",{class:"w-[300px] rounded-lg overflow-hidden",onClick:v[0]||(v[0]=K(()=>{},["stop"]))},[t("div",{class:"w-[300px] relative bg-white",id:"saveHtml",ref:(H,O)=>{O.saveHtml=H,w.value=H}},[t("div",to,[t("img",{src:(e.shopInfo.shareImg||e.shopInfo.scenery||a(E)("images/shop/shop_bg.png"))+"?"+new Date().getTime(),class:"object-cover w-full",alt:"",crossOrigin:"anonymous"},null,8,so)]),a(L)?g("",!0):(o(),r("div",oo,[y($,{class:"text-sm h-[30px] min-w-[65px] rounded-2xl text-white share-btn",onClick:c},{default:z(()=>[y(S,{name:"back-top",class:"rotate-180",size:"18"}),t("span",no,u(_.$t("common.save")),1)]),_:1}),t("div",{class:"share-btn w-[30px] h-[30px] rounded-full flex justify-center items-center text-white text-lg",onClick:b},[y(S,{name:"cross"})])])),t("div",lo,[t("div",ao,[t("img",{src:(e.shopInfo.logo||a(E)("images/goods/defaultImg.png"))+"?"+new Date().getTime(),class:"h-[82px] aspect-square rounded-xl object-fill",crossOrigin:"anonymous"},null,8,io)]),t("div",co,u(e.shopInfo.storeName||"-"),1),t("div",ro,[t("div",uo,[t("div",mo,[y(Ee,{value:a(R),size:60,level:"H"},null,8,["value"])]),t("div",fo,[j(u(_.$t("common.new found")),1),ho,j(u(_.$t("common.share you")),1)])]),po])])],512)])]),_:1},8,["show","style"])}}}),go=W(vo,[["__scopeId","data-v-2bfae1a2"]]),De=e=>(se("data-v-7b57c345"),e=e(),oe(),e),yo={class:"flex items-center gap-4"},wo=De(()=>t("img",{class:"w-5 h-5",src:Ct},null,-1)),_o=[wo],xo={key:0,class:"w-5 h-5",src:Tt},$o={key:1,class:"w-5 h-5",src:Lt},ko=De(()=>t("img",{class:"w-5 h-5",src:Bt},null,-1)),bo=[ko],Io={key:0,class:"px-3 safe-body overflow-y-scroll"},So={class:"px-2.5"},Co=M({name:"Shop"});function To(e){const{orderGoodsStore:d}=ue(),{t:f}=be(),{loadingToggle:i}=Te(),l=m({}),k=ke(),w=Ie(),I=m(null),{login:R}=Je(),[T,L]=X(!1),[F,b]=X(!1),c=m(),h=ne(()=>k.query.shopId),_=()=>{var s,n;(s=l.value)!=null&&s.merchant&&O(`/shopInfo?address=${(n=l.value)==null?void 0:n.merchant}`)},v=s=>{s===2?w.push(`category?shopId=${+h.value}&deliveryType=1`):s===3?w.push(`category?shopId=${+h.value}&deliveryType=2`):w.push(`boutique-goods?shopId=${+h.value}`)},S=m(null),$=m(null);we(h,async s=>{var n,C;s&&s!==$.value&&(i(!0),$.value=s,I.value&&(I.value.list=[]),await fe(),I.value&&I.value.resetData(),c.value&&((n=c.value)==null||n.getMyRanking()),S.value&&((C=S.value)==null||C.init()),i(!1))});const A=m(null),H=async()=>{const s=await it(l.value.merchant);s.success&&s.data&&(A.value=s.data)},O=s=>{w.push(s)},p=async()=>{const s=await nt(h.value);!s.success||!s.data||(l.value=s.data,await Ue(),Fe())},N=async s=>{i(!0);const{success:n}=await st({shopIds:[s.id],type:s.isFollow?2:1});i(!1),n&&(s.isFollow=!s.isFollow,s.isFollow?V({message:"收藏成功",icon:ce("toast-success.svg"),duration:3e3}):V({message:"取消收藏",icon:ce("toast-success.svg"),duration:3e3}))},U=()=>{V({message:f("common.Saved successfully"),icon:ce("toast-success.svg"),duration:3e3})},le=()=>{d.changeOfflineInfo({store:l.value});const s={key:h.value,orderType:It.STORE};w.push({path:"/offlineSubmit",query:s})},Y=m([]),B=async()=>{var n,C,q;if(!((n=l.value)!=null&&n.type))return;const s=await _e({merchant:(C=l.value)==null?void 0:C.merchant,status:1,page:1,size:12,type:(q=l.value)==null?void 0:q.type,sortType:3,orderBy:1});s.success&&(Y.value=s.data)},P=m(null),de=async()=>{var n;P.value=[];const s=await _e({merchant:(n=l.value)==null?void 0:n.merchant,status:1,page:1,size:12,deliveryType:1});s.success&&(P.value=s.data)},ae=m([]),Re=async()=>{if(!h.value)return;P.value=[];const{success:s,data:n}=await lt({shopId:Number(h.value),goodsStatus:St.Published,page:1,size:12,sortBy:"desc|goods_sales_volume"});s&&(ae.value=(n.records||[]).map(C=>({...C,goods:{icons:(C==null?void 0:C.goodsIcons)||""}})))},me=m([]),qe=async()=>{const{success:s,data:n}=await at({page:1,size:10,shopId:k.query.shopId});s&&(me.value=n&&n[0].guaranteeList||[])},fe=async()=>{await p(),B(),de(),Re(),qe(),H()},he=m(null),Fe=()=>{he.value&&he.value.addEventListener("scroll",Ge)},ze=m(1),pe=m([]),Ge=s=>{const{scrollTop:n}=s.target,{length:C}=pe.value;for(let q=0;q<C;q++)if(n<pe.value[q].offsetTop){ze.value=q+1;break}},{accountStore:ve}=ue(),Oe=async()=>{if(!ve.isLogin)return b(!0);l.value.likeFlag||(ot({shopId:h.value}),l.value.likeCount++,l.value.likeFlag=!0)};we(()=>{var s;return(s=l.value)==null?void 0:s.merchant},async s=>{s&&await de()});const ge=m(0),Z=m(null),je=async()=>{var C,q,Q,x;const s={page:1,size:1,shopId:h.value,sortBy:"desc|comment_time",havePicsFlag:null,commentStatus:1},n=await tt(s);n.success?(C=n.data)!=null&&C.records&&((q=n.data)==null?void 0:q.records.length)>0&&(Z.value=(Q=n.data)==null?void 0:Q.records[0],ge.value=((x=n.data)==null?void 0:x.total)||0):Z.value=null};return xe(async()=>{i(!0),await fe(),await je(),i(!1)}),Ve(()=>{P.value=[]}),(s,n)=>{const C=G("VanButton");return o(),D(gt,{class:"h-full font-Puhui font-normal safe-bottom-page relative",style:{background:"linear-gradient(180deg, #fed73a 0%, #f2f0ef 50%)"},title:s.$t("shop.Shop Details"),themeVars:{navBarBackgroundColor:"transparent"}},{right:z(()=>[t("div",yo,[t("div",{onClick:_},_o),t("div",{onClick:n[0]||(n[0]=q=>N(l.value))},[l.value.isFollow?(o(),r("img",$o)):(o(),r("img",xo))]),t("div",{onClick:n[1]||(n[1]=K(q=>a(L)(!0),["stop"]))},bo)])]),default:z(()=>{var q,Q;return[l.value&&Object.keys(l.value).length!==0&&l.value.status==1?(o(),r("div",Io,[l.value&&Object.keys(l.value).length!==0?(o(),D(vs,{key:0,ref:(x,ie)=>{ie.shopHeader=x,c.value=x},info:l.value,list:me.value,authorizeInfo:A.value,onHandleTo:n[3]||(n[3]=x=>O(x)),onFollowShop:N,class:"bg-white rounded-xl"},{like:z(()=>{var x;return[y(Xs,{"like-flag":l.value.likeFlag,"like-count":(x=l.value)==null?void 0:x.likeCount,"is-login":a(ve).isLogin,onOnLike:Oe},null,8,["like-flag","like-count","is-login"])]}),default:z(()=>[t("div",So,[y(C,{round:"",class:"w-full text-b1 h-[46px] px-[1.125rem] bg-yellow text-base font-semibold mt-3",onClick:le},{default:z(()=>[j(u(s.$t("common.payBill")),1)]),_:1}),Z.value?(o(),D(eo,{key:0,commentTotal:+ge.value,commentReview:Z.value,onClick:n[2]||(n[2]=K(x=>O("/offline-evaluate-home?shopId="+a(h)),["stop"]))},null,8,["commentTotal","commentReview"])):g("",!0)])]),_:1},8,["info","list","authorizeInfo"])):g("",!0),y(Gs,{ref:(x,ie)=>{ie.shopActivity=x,S.value=x},merchantAddress:(q=l.value)==null?void 0:q.merchant},null,8,["merchantAddress"]),l.value.type?(o(),D(re,{key:1,boutiqueGoods:Y.value,title:s.$t("shop.Main Store")+a(bt)(l.value.type),onToMore:v,onToDetail:n[4]||(n[4]=x=>O(`/goodsDetail?id=${x.goods.id}`))},null,8,["boutiqueGoods","title"])):g("",!0),y(re,{boutiqueGoods:P.value,type:2,onToMore:v,title:s.$t("shop.our_products"),onToDetail:n[5]||(n[5]=x=>O(`/goodsDetail?id=${x.goods.id}`))},null,8,["boutiqueGoods","title"]),(ae.value||[]).length?(o(),D(re,{key:2,boutiqueGoods:ae.value,type:3,onToMore:v,title:s.$t("shop.offline_services"),onToDetail:n[6]||(n[6]=x=>O(`/offlineGoodsDetail?goodsId=${x.goodsId}`))},null,8,["boutiqueGoods","title"])):g("",!0)])):l.value&&Object.keys(l.value).length!==0?(o(),D(kt,{key:1,type:"shop"})):g("",!0),a(T)?(o(),D(go,{key:2,show:a(T),shopInfo:l.value,onClose:n[7]||(n[7]=x=>a(L)(!1)),onOnSuceess:U},null,8,["show","shopInfo"])):g("",!0),a(h)?(o(),D($t,{key:3,shopId:+a(h),shopType:(Q=l.value)==null?void 0:Q.type},null,8,["shopId","shopType"])):g("",!0),a(F)?(o(),D(et,{key:4,onLogin:a(R)},null,8,["onLogin"])):g("",!0)]}),_:1},8,["title"])}}const Lo=M({...Co,setup:To}),sn=W(Lo,[["__scopeId","data-v-7b57c345"]]);export{sn as default};
