import{_ as D,y as q,a2 as $,l as F,r as a,x as f,D as G,E as H,F as h,G as r,H as s,O as K,Q as R,P as V,bc as j,X as M,bp as O,bD as z,K as g,N as E,I as J,J as P,Z as U,$ as Q}from"./vendor-BlU_hoYl.js";import{_ as T}from"./search-B34EARrH.js";import{_ as X}from"./delete-Dyula9w6.js";import{B as Z}from"./BackIcon-8hcEjDKb.js";/* empty css                                                               */import{H as A}from"./HomeGoodsItem-C3EQZz96.js";import{e as W,at as Y,aJ as ee}from"./index-UgIL2Smv.js";import"./MCOIN-BOqZVkND.js";import"./store-CbLb3G6E.js";import"./useCityMap-CU72MCNW.js";import"./RatioBox-CBosZpIg.js";import"./ImgBoutiqueLable-BIio6fYG.js";import"./shop-CeqcS6K2.js";const y=d=>(U("data-v-39008406"),d=d(),Q(),d),se={class:"font-Puhui font-normal relative pb-20 app-container sm:w-[375px]"},oe={class:"header__wrap w-full h-[50px]"},te={class:"header__title h-full van-nav-bar__content"},ae={class:"van-nav-bar__left van-haptics-feedback"},ne={class:"van-nav-bar__title van-ellipsis text-b1 text-lg font-bold"},le={class:"search__wrap w-full h-[48px] px-3 pb-3"},re={class:"search__input w-full h-full bg-white rounded-3xl flex items-center justify-center px-3 py-2.5"},ie=y(()=>s("div",{class:"search__icon flex-shrink-0"},[s("img",{src:T,class:"w-4 h-4"})],-1)),ce=["onKeyup"],de=y(()=>s("img",{src:X,class:"w-4 h-4",alt:""},null,-1)),ue=[de],_e=y(()=>s("span",{class:"text-[#FF8812] text-sm font-semibold whitespace-nowrap"}," 搜索 ",-1)),pe=[_e],ve={class:"list__wrap safe-bottom"},me={class:"goods__wrap overflow-y-scroll"},fe=q({name:"OfflineHome"});function he(d){const p=$(),k=F();W();const i=a(""),n=a(!1),u=a(0),I=a(20),c=a(!1),l=a([]),w=f(()=>{var e;return((e=p.query)==null?void 0:e.storeId)||""}),C=f(()=>{var e;return((e=p.query)==null?void 0:e.shopId)||""}),N=f(()=>{var e;return((e=p.query)==null?void 0:e.shopName)||""}),L=()=>{i.value="",v()},x=a(null),v=()=>{n.value||(u.value=0,c.value=!1,l.value=[],m(),x.value.blur())},m=async()=>{n.value=!0,u.value+=1,c.value=!1,await S(),n.value=!1},S=async()=>{const{success:e,data:t}=await ee({goodsNameLike:i.value,page:u.value,size:I.value,storeId:w.value,shopId:C.value,sortBy:"desc|goods_sales_volume,asc|goods_id"});if(!e||!t||!t.total){c.value=!0;return}const _=t.records||[];l.value=u.value===1?_:[...l.value,..._],l.value.length>=t.total&&(c.value=!0)},B=e=>{k.push({path:"/offlineGoodsDetail",query:{goodsId:e.goodsId,storeId:w.value}})};return G(()=>{m()}),(e,t)=>{const _=H("van-list");return r(),h("div",se,[s("div",oe,[s("div",te,[s("div",ae,[K(Z)]),s("div",ne,R(V(N)||"门店服务"),1)])]),s("div",le,[s("div",re,[ie,j(s("input",{ref:(o,b)=>{b.searchRef=o,x.value=o},type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),class:"w-full h-full bg-transparent ml-1 font-normal",placeholder:"请输入搜索内容",onKeyup:z(v,["enter"]),enterkeyhint:"search"},null,40,ce),[[O,i.value]]),i.value?(r(),h("div",{key:0,class:"flex-shrink-0 flex items-center justify-center",onClick:L},ue)):M("",!0),s("div",{class:"search__btn ml-2 flex-shrink-0",onClick:v},pe)])]),s("div",ve,[s("div",me,[l.value.length===0&&!n.value?(r(),g(Y,{key:0,name:e.$t("common.No data yet")},null,8,["name"])):(r(),g(_,{key:1,loading:n.value,"onUpdate:loading":t[1]||(t[1]=o=>n.value=o),finished:c.value,"finished-text":e.$t("common.noMore"),onLoad:m},{default:E(()=>[(r(!0),h(J,null,P(l.value,o=>(r(),g(A,{key:o.goodsId,goods:o,class:"mb-4 :last:mb-0",onClick:b=>B(o),"show-store-name":""},null,8,["goods","onClick"]))),128))]),_:1},8,["loading","finished","finished-text"]))])])])}}const ge=Object.assign(fe,{setup:he}),$e=D(ge,[["__scopeId","data-v-39008406"]]);export{$e as default};
