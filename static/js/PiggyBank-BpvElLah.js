import{_ as ft}from"./MCOIN-BOqZVkND.js";import{_ as _t}from"./FMCP-yoa9RTPy.js";import{_ as rt,y as dt,U as It,r as _,bS as Et,be as W,x as ht,bf as xt,D as yt,a9 as Rt,E as S,K as m,G as a,N as L,H as t,X as k,F as u,Y as et,P as e,a1 as F,Q as o,I as Vt,a4 as wt,a0 as bt,Z as $t,$ as kt,w as Dt,O as N,bg as Pt,bM as Nt,bT as Lt,bx as Tt,bG as zt,bj as Ut,R as Mt,l as Wt,T as jt,B as st,S as pt}from"./vendor-BlU_hoYl.js";import{b$ as Ot,bB as Gt,q as gt,c0 as Ht,d as w,c1 as Xt,l as qt,B as ct,g as Yt,c as vt}from"./index-Wb-6_0W_.js";import{P as Jt}from"./PopHeader-D-bxM_g2.js";import{P as Q}from"./flashSale-DDyqLyYN.js";import{_ as Zt}from"./EmptyTipsPop-DGM583dh.js";import{p as Kt}from"./piggyBank-DN4hNkWq.js";import{q as Qt}from"./piggyBank-CcAx-jxz.js";import{B as te}from"./BackIcon-8hcEjDKb.js";import"./close-Dwemq2UR.js";const ee="/static/images/piggy-bank-bg-B2ZN3re_.png",se="/static/images/arrow-forward-C8bwXPR5.svg",ae="/static/images/X-GcBn2IkE.svg",oe="/static/images/expand-BxpD5R2x.webp",tt=c=>($t("data-v-5436a953"),c=c(),kt(),c),ne={key:0,class:"success-text"},le=tt(()=>t("div",{class:"text-b6 text-xl mb-3"},"恭喜获得",-1)),ie={class:"text-2xl text-b6"},ce={class:"text-[#FEA527] font-bold"},re=F("抵用券 "),de=tt(()=>t("div",{class:"text-b6 text-xl mb-3"},"开始膨胀",-1)),ue={class:"text-[#F15965] h-[52px] flex items-center justify-center gap-x-1"},me=tt(()=>t("span",{class:"text-[26px] font-black leading-[52px]"},"X",-1)),pe={class:"text-[44px] font-normal leading-[52px] font-BebasNeue"},ge=["src"],ve={key:1,class:"center-card text-b1"},fe=tt(()=>t("div",{class:"text-center text-xs text-[#FE7E66]"},"膨胀倍数",-1)),_e={class:"container relative"},he={id:"original",class:"center-text text-[#F15965] h-[52px] pt-1 flex items-center justify-center gap-x-1"},xe=tt(()=>t("span",{class:"text-[24px] font-[900]"},[t("img",{src:ae,class:"h-5 w-auto"})],-1)),ye={class:"text-[40px] font-BebasNeue leading-[52px]"},we=F(" 确定 "),be=dt({props:{teleport:null},emits:["success"],setup(c,{expose:H,emit:T}){const{teleport:X}=c,{height:C}=It(),v=_(null),{top:b,height:q}=Et(v),z=_(null),[I,h]=W(!1),[r,E]=W(!1),[U,x]=W(!1),Y=ht(()=>C.value>811?1:811/C.value),l=xt({grow:null,amount:null,duration:100,number:0,animationStyle:"",intervalId:null}),p=async()=>{x(!0),z.value=`${oe}?t=${Date.now()}`,await Ot(z.value),x(!1)};function at(R){return Math.random()*(R-1)+1}function J(){l.number=at(2),l.grow?l.number=l.grow:setTimeout(()=>{J(),j()},l.duration)}function M(){l.intervalId=setInterval(J,l.duration)}function j(){l.intervalId&&(clearInterval(l.intervalId),l.intervalId=null)}const O=async()=>{E(!0),await Ht(500);const y=document.getElementById("original").cloneNode(!0);y.id="cloned-animation",y.classList.add("animated-div"),document.querySelector(".container").appendChild(y)},g=async R=>{if(R){l.grow=null,l.amount=null,l.number=1;try{h(!0),M();const y=await R.wait(),f=Gt(y.logs,gt.voucherGrow,gt.FMCP);l.grow=f==null?void 0:f.grow,l.amount=f==null?void 0:f.amount,j(),T("success"),O()}catch{h(!1)}}},Z=()=>{h(!1),setTimeout(()=>{E(!1),p()},1e3),j()};return yt(()=>{p()}),Rt(()=>{h(!1),setTimeout(()=>{E(!1)},1e3),j()}),H({setAnimationShow:h,handleAnimation:g}),(R,y)=>{const f=S("VanLoading"),ot=S("VanButton"),nt=S("VanPopup");return a(),m(nt,{show:e(I),"onUpdate:show":y[0]||(y[0]=A=>bt(I)?I.value=A:null),teleport:c.teleport,class:"!bg-transparent font-Puhui !w-full !max-w-[375px]",onClickOverlay:Z,onClick:Z,"overlay-style":{backgroundColor:"rgba(0, 0, 0, 0.8)"}},{default:L(()=>[t("div",{ref:(A,V)=>{V.wrapperRef=A},class:"!w-full overflow-hidden relative -mt-[25px]",style:et({height:`${e(C)}px`})},[t("div",{class:"w-full text-center absolute",style:et({top:`${e(b)-115}px`})},[e(r)?(a(),u("div",ne,[le,t("div",ie,[t("span",ce,o(e(l).amount),1),re])])):(a(),u(Vt,{key:1},[de,t("div",ue,[me,t("span",pe,o(e(l).number.toFixed(3)),1)])],64))],4),t("div",{ref:(A,V)=>{V.imgWrapper=A,v.value=A},class:"center-card opacity-0",style:et({height:` ${e(C)*.26*e(Y)}px`})},null,4),e(U)?(a(),m(f,{key:0,vertical:"",type:"spinner",color:"#FEA527",class:"center-card"})):k("",!0),t("img",{src:z.value,class:"w-full h-full object-cover relative z-[1]"},null,8,ge),e(r)?(a(),u("div",ve,[fe,t("div",_e,[t("div",he,[xe,t("span",ye,o(e(l).grow),1)])])])):k("",!0),e(r)?(a(),m(ot,{key:2,class:"success-text confirm-btn !font-semibold",style:et({top:`${e(b)+e(q)+50}px`}),onClick:wt(Z,["stop"])},{default:L(()=>[we]),_:1},8,["style","onClick"])):k("",!0)],4)]),_:1},8,["show","teleport","overlay-style"])}}}),$e=rt(be,[["__scopeId","data-v-5436a953"]]),ke={class:"w-[85vw] max-w-[375px] px-5 py-6 bg-popBg"},Be={class:"gap-1 mt-5 mb-3 text-xs flex-start"},Se={key:0,src:ft,class:"w-4",alt:""},Ce={key:1,src:_t,class:"w-4",alt:""},Ae={class:"font-semibold"},Fe={class:"flex-start bg-[#FFF8EC] p-[6px] rounded-lg"},Ie=dt({props:{show:{type:Boolean},balance:null,loading:{type:Boolean}},emits:["close","handleWithdraw"],setup(c,{expose:H,emit:T}){const{show:X}=c,{t:C}=Dt(),v=_(null),b=_(Q.MC),q=ht(()=>[{text:"Mcoin",value:Q.MC},{text:C("voucher.voucher"),value:Q.VOUCHER}]),z=h=>{b.value=Number(h)},I=()=>{T("handleWithdraw",v.value,b.value===Q.VOUCHER)};return H({amount:v}),(h,r)=>{const E=S("van-dropdown-item"),U=S("van-dropdown-menu"),x=S("VanField"),Y=S("VanButton"),l=S("VanPopup");return a(),m(l,{show:c.show,"onUpdate:show":r[4]||(r[4]=p=>bt(X)?X.value=p:null),round:"","close-on-click-overlay":!0,onClickOverlay:r[5]||(r[5]=wt(()=>T("close"),["stop"]))},{default:L(()=>[t("div",ke,[N(Jt,{onClick:r[0]||(r[0]=p=>T("close"))},{default:L(()=>[t("span",null,o(h.$t("maiPledge.Income to be collected")),1)]),_:1}),t("div",Be,[b.value===e(Q).MC?(a(),u("img",Se)):(a(),u("img",Ce)),N(U,{overlay:!1,duration:0,"active-color":"#FEA021",class:"mr-2"},{default:L(()=>[N(E,{onChange:z,modelValue:b.value,"onUpdate:modelValue":r[1]||(r[1]=p=>b.value=p),options:e(q)},null,8,["modelValue","options"])]),_:1}),t("span",Ae,o(e(w)(c.balance||0,4)),1)]),t("div",Fe,[N(x,{type:"number",modelValue:v.value,"onUpdate:modelValue":r[2]||(r[2]=p=>v.value=p),formatter:e(Xt),placeholder:e(w)(c.balance||0,4).toString()},null,8,["modelValue","formatter","placeholder"]),t("div",{class:"bg-[#fed73a] max-border text-[#FEA021] py-1 px-2 rounded-lg",onClick:r[3]||(r[3]=()=>{v.value=e(w)(c.balance,4)})}," MAX ")]),N(Y,{class:"w-full mt-5 font-semibold text-white btn-orange",loading:c.loading,disabled:v.value<=0||+v.value>+c.balance,onClick:I},{default:L(()=>[F(o(h.$t("common.claim")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["show"])}}}),Ee=rt(Ie,[["__scopeId","data-v-f83d25b2"]]),G=c=>($t("data-v-7d99f09c"),c=c(),kt(),c),Re={class:"px-3 bg-[#f2f0ef] relative font-normal pb-2",id:"piggyBank"},Ve=G(()=>t("img",{class:"absolute top-0 left-0 w-full",src:ee,alt:"",srcset:""},null,-1)),De={class:"relative z-20"},Pe={class:"gap-2 mt-2 flex-start"},Ne={class:"mt-4"},Le={class:"bg-white p-4 rounded-xl text-[#2E2008]"},Te={class:"flex items-center justify-between"},ze=["src"],Ue={class:"text-oriange1"},Me={class:"flex items-baseline"},We={key:0,class:"text-sm self-end mb-0.5"},je={key:1,class:"text-3xl font-bold"},Oe={key:1},Ge={key:2,class:"text-sm self-end ml-1.5 mb-0.5"},He={key:3,class:"text-3xl font-bold"},Xe={class:"text-xs flex-center text-black-400"},qe=G(()=>t("img",{class:"self-center w-4 h-4 ml-auto",src:se,alt:"",srcset:""},null,-1)),Ye={class:"mt-5 bg-[#F9F9F9] rounded-md grid grid-cols-2 p-2.5 text-left"},Je={class:"flex flex-col justify-center"},Ze={class:"gap-1 text-xs flex-start"},Ke={class:"opacity-60"},Qe={class:"mt-1.5 text-sm"},ts={key:1},es={class:"flex flex-col justify-center"},ss={class:"gap-1 text-xs flex-start"},as={class:"opacity-60"},os={class:"mt-1.5 text-sm"},ns={key:1},ls={class:"left"},is={class:"gap-1 text-xs flex-start"},cs={class:"opacity-60"},rs=G(()=>t("img",{src:ft,class:"w-4 h-4"},null,-1)),ds=G(()=>t("img",{src:_t,class:"w-4 h-4"},null,-1)),us={class:"text-[#E88F17] text-sm font-medium"},ms={key:1},ps={class:"flex mt-5 text-base font-medium text-center"},gs=G(()=>t("div",{class:"w-6"},null,-1)),vs={class:"bg-white py-2.5 rounded-xl text-[#2E2008] mt-2.5 relative flex items-center justify-between text-xs"},fs={class:"pl-2.5"},_s={class:"text-xs text-[#2E2008] opacity-60 mb-2.5"},hs={class:"flex items-center"},xs={class:"text-[#14D8A9] text-sm font-bold flex items-center"},ys={key:1},ws=F("%"),bs={key:1,class:"text-[#14D8A9] text-xs font-bold"},$s={class:"pr-2.5 text-right"},ks={class:"text-xs text-[#2E2008] opacity-60 text-left mb-2.5"},Bs={class:"flex items-center"},Ss={key:1,class:"text-[#14D8A9] text-sm font-bold"},Cs={key:3,class:"text-[#14D8A9] text-xs font-bold"},As={class:"bg-white p-4 rounded-xl text-[#2E2008] mt-2.5 relative",style:{"padding-right":"0"}},Fs={class:"flex items-center justify-between pr-4 mt-1.5"},Is=G(()=>t("div",{id:"line-echarts"},null,-1)),Es=dt({setup(c){Pt(()=>{it()},1e4);const H=Wt(),{userIds:T,pending:X,total:C,earnings:v,nextFloatAwardAmount:b,today:q,DAY:z,dayAwardAmounts:I,userRewardPending:h,userRewardWithdraw:r}=Kt(),E=s=>{H.push(s)},U=_("0"),x=Nt("showBalance",!1),Y=()=>{x.value=!x.value},l=xt({tooltip:{trigger:"axis",valueFormatter:s=>`${s}%`},grid:{left:"0%",right:"8%",bottom:"0%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}},series:[{data:[],type:"line",showSymbol:!1,lineStyle:{color:"#674c37"},areaStyle:{color:new Lt(0,0,0,1,[{offset:0,color:"rgba(254, 215, 58, 0.60)"},{offset:1,color:"rgba(254, 215, 58, 0.00)"}])}}]}),p=_(null),at=s=>{l.xAxis.data=s.dates.reverse(),l.series[0].data=s.values.reverse(),p.value.setOption(l),y(!1)},J=_(0),M=_("0"),j=async()=>{const s=await T();J.value=s;const n=await X(s.toString());let i=0;n.fixs.forEach(P=>{i+=+ct(P)||0});let D=0;n.floats.forEach(P=>{D+=+ct(P)||0});let d=0;n.records.forEach(P=>{d+=+ct(P.amount)||0});const $=await h(s.toString());U.value=d.toFixed(18),M.value=st(D).plus(i).plus($).toFixed(18)},O=_(["0","0"]),g=_([0,0,0,0]),Z=async()=>{Qt().then(n=>{if(!n.success)return jt.clear();O.value[0]=n.data.allAmount||0}),g.value[0]=+await v(0),g.value[1]=+await b(),g.value[2]=+await C(),g.value[3]=+await v(7);const s=g.value[1]/g.value[2]+g.value[0];O.value[1]=w(st(U.value||0).times(s).toFixed(18),2).toString()},[R,y]=W(!1),f=_([0,0]),ot=async()=>{y(!0);let s=localStorage.getItem("taday")||"",n=localStorage.getItem("echartData")||"";const i=+await q(),D=await z();let d={dates:[],values:[]};if(s&&+s==+i&&n){d=JSON.parse(n);let $=await I(i);$=w(st($||0).times(100).times(365).times(g.value[3]).toFixed(18),2),d.values[0]=$}else{localStorage.setItem("taday",i.toString());for(let $=0;$<7;$++){let P=i-$*D,At=await I(P),mt=qt((P-D)*1e3),Ft=w(st(At||0).times(100).times(365).times(g.value[3]).toFixed(18),2);d.dates.push(mt.split(" ")[0].split("-")[1]+"-"+mt.split(" ")[0].split("-")[2]),d.values.push(Ft)}}localStorage.setItem("echartData",JSON.stringify(d)),f.value[1]=d.values[0],at(d)},nt=async()=>{const s=+await b(),n=+await C();f.value[0]=s/n*100},[A,V]=W(!1),[Bt,K]=W(!1),[St,lt]=W(!1),ut=_(null),Ct=async(s,n)=>{K(!0);try{let i=await r(s,n);if(!i.success)return K(!1);if(i=i.result,!n){try{await i.wait(),V(!1),it(),lt(!0),setTimeout(()=>{lt(!1)},2e3);return}catch{K(!1)}finally{K(!1)}return}V(!1),ut.value.handleAnimation(i)}finally{K(!1)}},B=_(!1),it=async()=>{await j(),nt()};return yt(async()=>{p.value=Tt(zt(document.getElementById("line-echarts"))),B.value=!0,await Promise.all([it(),await Z(),ot()]),B.value=!1}),Ut(()=>{p.value&&p.value.dispose()}),(s,n)=>{const i=S("van-loading"),D=S("VanLoading");return a(),u("div",Re,[Ve,t("div",De,[t("div",Pe,[N(te),t("div",null,o(s.$t("piggy.Yu_Bao_details")),1)]),t("div",Ne,[t("div",Le,[t("div",Te,[t("div",{class:"flex items-center",onClick:Y},[t("span",null,o(s.$t("piggy.lump_sum")),1),t("img",{class:"w-4 h-4 ml-1.5",src:e(Yt)(`images/ecology/${e(x)?"hideen.svg":"show.svg"}`),alt:"",srcset:""},null,8,ze)]),J.value?(a(),m(e(pt),{key:0,to:"/piggySettingAdmin"},{default:L(()=>[t("div",Ue,o(s.$t("piggy.setting admin address")),1)]),_:1})):k("",!0)]),N(e(pt),{to:"/piggyBank-balanceDetail",class:"flex justify-between mt-2.5"},{default:L(()=>[t("div",Me,[e(x)?(a(),u("span",We,"≈")):k("",!0),e(x)?(a(),u("span",je,[B.value?(a(),m(i,{key:0,size:"28px"})):(a(),u("span",Oe,o(e(w)(U.value,2)),1))])):k("",!0),e(x)?(a(),u("span",Ge,"MCOIN")):k("",!0),e(x)?k("",!0):(a(),u("span",He," ******"))]),t("div",Xe,[F(o(s.$t("piggy.detail_record"))+" ",1),qe])]),_:1}),t("div",Ye,[t("div",Je,[t("div",Ze,[t("span",Ke,o(s.$t("piggy.Cumulative_income")),1)]),t("div",Qe,[B.value?(a(),m(i,{key:0,size:"14px"})):(a(),u("span",ts,o(e(vt)(O.value[0])),1))])]),t("div",es,[t("div",ss,[t("span",as,o(s.$t("piggy.tommor_earns")),1)]),t("div",os,[B.value?(a(),m(i,{key:0,size:"14px"})):(a(),u("span",ns,o(e(vt)(O.value[1])),1))])]),t("div",{class:"mt-2.5 p-2.5 col-span-2 bg-white flex-center-bw border border-solid border-primary-001 rounded-md",onClick:n[0]||(n[0]=d=>+M.value>0?e(V)(!0):"")},[t("div",ls,[t("div",is,[t("span",cs,o(s.$t("maiPledge.Income to be collected")),1),rs,t("span",null,o(s.$t("common.or")),1),ds]),t("div",us,[B.value?(a(),m(i,{key:0,color:"#E88F17",size:"14px"})):(a(),u("span",ms,o(e(w)(M.value,2)),1))])]),t("div",{class:Mt(["relative px-4 py-1 ml-2 text-white rounded-md bg-primary-001",{"opacity-50":!M.value}])},o(s.$t("common.claim")),3)])]),t("div",ps,[t("div",{class:"flex-1 py-3 bg-[#F9F1D3] rounded-[1.75rem] text-[#7D6810]",onClick:n[1]||(n[1]=d=>E("/piggyBank-transferOut"))},o(s.$t("piggy.transfer_out_principal")),1),gs,t("div",{class:"flex-1 py-3 bg-[#FED73A] rounded-[1.75rem]",onClick:n[2]||(n[2]=d=>E("/piggyBank-transferIn"))},o(s.$t("piggy.transfer_in_principal")),1)])]),t("div",vs,[t("div",fs,[t("div",_s,o(s.$t("piggy.todayannualizedRateReturn")),1),t("div",hs,[t("span",xs,[B.value?(a(),m(i,{key:0,color:"#14D8A9",size:"14px"})):(a(),u("span",ys,o(e(w)(g.value[0]*100*365,2)),1)),ws]),F(o(s.$t("piggy.base"))+" + ",1),B.value?(a(),m(i,{key:0,color:"#14D8A9",size:"14px"})):(a(),u("span",bs,o(e(w)(f.value[0]*365*g.value[3],2))+"%",1)),F(o(s.$t("piggy.float")),1)])]),t("div",$s,[t("div",ks,o(s.$t("piggy.yesannualizedRateReturn")),1),t("div",Bs,[B.value?(a(),m(i,{key:0,color:"#14D8A9",size:"14px"})):(a(),u("span",Ss,o(e(w)(g.value[0]*100*365,2))+"%",1)),F(o(s.$t("piggy.base"))+" + ",1),B.value?(a(),m(i,{key:2,color:"#14D8A9",size:"14px"})):(a(),u("span",Cs,o(e(w)(f.value[1]))+"%",1)),F(o(s.$t("piggy.float")),1)])])]),t("div",As,[t("div",Fs,[t("span",null,o(s.$t("piggy.SystemGistoricalDynamicIncome")),1)]),Is,e(R)?(a(),m(D,{key:0,color:"#674c37",class:"loading-box",vertical:""})):k("",!0)])])]),e(A)?(a(),m(Ee,{key:0,show:e(A),balance:M.value,loading:e(Bt),onClose:n[3]||(n[3]=d=>e(V)(!1)),onHandleWithdraw:Ct},null,8,["show","balance","loading"])):k("",!0),e(St)?(a(),m(Zt,{key:1,onClose:n[4]||(n[4]=d=>e(lt)(!1)),text:s.$t("common.claim successful")},null,8,["text"])):k("",!0),N($e,{ref:(d,$)=>{$.voucherLottieRef=d,ut.value=d}},null,512)])}}}),js=rt(Es,[["__scopeId","data-v-7d99f09c"]]);export{js as default};
