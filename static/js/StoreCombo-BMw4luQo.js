import{_ as q,y as D,a1 as F,l as G,r as a,x as m,D as H,E as K,F as h,G as r,H as s,O as R,Q as V,P as $,bc as j,a2 as z,bp as E,bz as M,K as g,N as O,I as P,J as U,Y as J,Z as Q}from"./vendor-Ba70TIw4.js";import{_ as T}from"./search-C4fLtTfY.js";import{_ as Y}from"./delete-BlDblrKv.js";import{B as Z}from"./BackIcon-DkqwcD_b.js";/* empty css                                                               */import{H as A}from"./HomeGoodsItem-BKiiBcSj.js";import{e as W,ao as X,aE as ee}from"./index-DiRx6UeW.js";import"./MCOIN-Bodfn-v1.js";import"./store-odfdGeH-.js";import"./useCityMap-Ct9b_yYY.js";import"./RatioBox-hb9qVZol.js";import"./ImgBoutiqueLable-BMjuak4g.js";import"./shop-CeqcS6K2.js";const y=d=>(J("data-v-233cf7d8"),d=d(),Q(),d),se={class:"font-Puhui font-normal relative pb-20 app-container sm:w-[375px]"},oe={class:"header__wrap w-full h-[50px]"},te={class:"header__title h-full van-nav-bar__content"},ae={class:"van-nav-bar__left van-haptics-feedback"},ne={class:"van-nav-bar__title van-ellipsis text-b1 text-lg font-bold"},le={class:"search__wrap w-full h-[48px] px-3 pb-3"},re={class:"search__input w-full h-full bg-white rounded-3xl flex items-center justify-center px-3 py-2.5"},ie=y(()=>s("div",{class:"search__icon flex-shrink-0"},[s("img",{src:T,class:"w-4 h-4"})],-1)),ce=["onKeyup"],de=y(()=>s("img",{src:Y,class:"w-4 h-4",alt:""},null,-1)),ue=[de],_e=y(()=>s("span",{class:"text-[#FF8812] text-sm font-semibold whitespace-nowrap"}," 搜索 ",-1)),pe=[_e],ve={class:"list__wrap"},fe={class:"goods__wrap overflow-y-scroll"},me=D({name:"OfflineHome"});function he(d){const p=F(),k=G();W();const i=a(""),n=a(!1),u=a(0),I=a(20),c=a(!1),l=a([]),w=m(()=>{var e;return((e=p.query)==null?void 0:e.storeId)||""}),C=m(()=>{var e;return((e=p.query)==null?void 0:e.shopId)||""}),N=m(()=>{var e;return((e=p.query)==null?void 0:e.shopName)||""}),L=()=>{i.value="",v()},x=a(null),v=()=>{n.value||(u.value=0,c.value=!1,l.value=[],f(),x.value.blur())},f=async()=>{n.value=!0,u.value+=1,c.value=!1,await S(),n.value=!1},S=async()=>{const{success:e,data:t}=await ee({goodsNameLike:i.value,page:u.value,size:I.value,storeId:w.value,shopId:C.value,sortBy:"desc|goods_sales_volume,asc|goods_id"});if(!e||!t||!t.total){c.value=!0;return}const _=t.records||[];l.value=u.value===1?_:[...l.value,..._],l.value.length>=t.total&&(c.value=!0)},B=e=>{k.push({path:"/offlineGoodsDetail",query:{goodsId:e.goodsId,storeId:w.value}})};return H(()=>{f()}),(e,t)=>{const _=K("van-list");return r(),h("div",se,[s("div",oe,[s("div",te,[s("div",ae,[R(Z)]),s("div",ne,V($(N)||"门店服务"),1)])]),s("div",le,[s("div",re,[ie,j(s("input",{ref:(o,b)=>{b.searchRef=o,x.value=o},type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),class:"w-full h-full bg-transparent ml-1 font-normal",placeholder:"请输入搜寻关键字",onKeyup:M(v,["enter"]),enterkeyhint:"search"},null,40,ce),[[E,i.value]]),i.value?(r(),h("div",{key:0,class:"flex-shrink-0 flex items-center justify-center",onClick:L},ue)):z("",!0),s("div",{class:"search__btn ml-2 flex-shrink-0",onClick:v},pe)])]),s("div",ve,[s("div",fe,[l.value.length===0&&!n.value?(r(),g(X,{key:0,name:e.$t("common.No data yet")},null,8,["name"])):(r(),g(_,{key:1,loading:n.value,"onUpdate:loading":t[1]||(t[1]=o=>n.value=o),finished:c.value,"finished-text":e.$t("common.noMore"),onLoad:f},{default:O(()=>[(r(!0),h(P,null,U(l.value,o=>(r(),g(A,{key:o.goodsId,goods:o,class:"mb-4 :last:mb-0",onClick:b=>B(o),"show-store-name":""},null,8,["goods","onClick"]))),128))]),_:1},8,["loading","finished","finished-text"]))])])])}}const ge=Object.assign(me,{setup:he}),Fe=q(ge,[["__scopeId","data-v-233cf7d8"]]);export{Fe as default};
