import{u as E}from"./useKeyboard-C7Jit2jF.js";import{_ as v,y,E as h,F as u,G as l,O as _,N as B,a1 as C,Q as f,R as m,P as b,x as k,I as w,J as P,a2 as T,l as D,r as c,T as L}from"./vendor-BlU_hoYl.js";import{P as i,o as R}from"./payHelp-SJlQkCy7.js";import{W as H}from"./index-Clz0Qna-.js";const F=y({props:{payLink:null,btnLoading:{type:Boolean}},emits:["onClick"],setup(e,{emit:r}){const{isKeyboardVisible:t}=E();return(s,a)=>{const o=h("VanButton");return l(),u("div",{class:m(["fixed bottom-0 sm:left-1/2 sm:-translate-x-2/4 left-0 z-20 sm:w-[375px] w-full px-3 py-4 safe-btn-bottom bg-[#F2F0EF]",b(t)?"!hidden":"!fixed"])},[_(o,{type:"primary",round:"",class:"w-full h-[46px] bg-yellow !border-none text-b1 text-base font-semibold",loading:e.btnLoading,onClick:a[0]||(a[0]=p=>r("onClick"))},{default:B(()=>[C(f(e.payLink?"分享帮付":"发起帮付"),1)]),_:1},8,["loading"])],2)}}}),S=v(F,[["__scopeId","data-v-35c307d9"]]),N={class:"flex-center-bw bg-b6/80 rounded-full p-0.5 h-10"},O=["onClick"],W=y({props:{tab:null},emits:["changeTab"],setup(e,{emit:r}){const t=k(()=>[{id:i.OWNER,text:"自己买"},{id:i.OTHER,text:"他人代付"}]);return(s,a)=>(l(),u("div",N,[(l(!0),u(w,null,P(b(t),o=>(l(),u("div",{key:o.id,class:m(["flex-1 flex-center rounded-full h-full text-b3",{"bg-b1 text-b6 font-semibold":+e.tab==+o.id}]),onClick:p=>r("changeTab",o.id)},f(o.text),11,O))),128))]))}}),$={1:"/payHelpGoods",2:"/payHelpGoods"};function z(){const e=T(),r=D(),t=c(+e.query.payBy||i.OWNER),s=c(null),a=c(null);return{payBy:t,payLink:s,payHelpRef:a,changeBy:n=>{t.value!==n&&(t.value=n,r.replace({path:e.path,query:{...e.query,payBy:n}}))},generatePayLink:async n=>{var d;const{success:g,data:x}=await R(n);g&&(s.value=`${window.location.origin}/#${$[n.type||1]}?payId=${x}`,console.log(s.value),a.value&&((d=a.value)==null||d.setShow(!0)))},showChangeTip:()=>s.value&&t.value===i.OTHER?(L({message:"帮付链接已生成完毕，若订单信息需调整，可返回上一级页面重新生成",icon:H("toast-success.svg"),duration:3e3,overlay:!0,overlayClass:"toastOverlay",className:"toastCard"}),!1):!0}}export{S as P,W as _,z as u};
