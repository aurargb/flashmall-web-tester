import{y as T,E as F,F as i,G as n,H as S,X as P,Q as y,I as z,J as M,bc as q,K as N,R as V,bd as W,_ as L,r as c,z as U,U as J,x as I,O as D,N as G,Y as R,P as u,bz as K,bA as Q,bs as X,bB as C,bC as A,w as Y,B as x,D as Z}from"./vendor-BlU_hoYl.js";import{g as ee,f as te,d as _}from"./index-Clz0Qna-.js";import{P as se}from"./flashSale-DDyqLyYN.js";import{S as E}from"./shop-CeqcS6K2.js";const ae={class:"bg-white mt-2"},oe={class:"px-4 py-3 text-base text-b1 font-semibold text-left"},ne={key:0,class:"flex flex-col"},be=T({props:{text:null,imgs:null},setup(t){return(e,s)=>{const d=F("VanImage");return n(),i("div",ae,[S("div",oe,y(e.$t("goods.product details")),1),t.imgs.length>0?(n(),i("div",ne,[(n(!0),i(z,null,M(t.imgs,a=>q((n(),N(d,{key:a,src:a,class:"w-full h-auto",fit:"cover"},null,8,["src"])),[[W,a]])),128))])):P("",!0),t.text?(n(),i("div",{key:1,class:V(["px-4 whitespace-pre-wrap break-all text-b1",t.imgs.length?"py-3":"pb-3"])},y(t.text),3)):P("",!0)])}}}),xe=""+new URL("../images/sale-people-B9j4520v.svg",import.meta.url).href,le={class:"relative"},ie={key:0,class:"absolute top-0 left-0 w-full h-full bg-black/50 z-[2]"},re={class:"w-full h-full flex items-center justify-center"},ce={class:"text-white text-2xl font-bold"},ue=T({props:{imgs:null,indicatorColor:{default:"#fba923"},bgColor:{default:"#FFE3BD"},stock:{default:1},goodsTypes:{default:""}},setup(t,{expose:e}){const s=t,d=c(!1),a=c(300),f=c(!1);U(()=>s.imgs,l=>{if(l&&l.length){if(d.value)return;const h=new Image;h.src=l[0],h.onload=()=>{const k=document.getElementById("app");a.value=k.clientWidth/h.naturalWidth*h.naturalHeight,f.value=!0},d.value=!0}},{immediate:!0,deep:!0});const p=l=>{s.imgs.length===1&&!s.imgs[0]||X({images:s.imgs,closeable:!0,showIndex:!0,startPosition:l})},B=c(),m=c([C,A]),$={clickable:!0},o={delay:3e3,disableOnInteraction:!0,pauseOnMouseEnter:!0},{height:g}=J(),v=I(()=>g.value/4*3),r=c(null),O=l=>{r.value=l},j=()=>{m.value=[C]},H=()=>{m.value=[C,A]};return e({pauseSwiper:()=>{r.value&&r.value.autoplay.stop()},resumeSwiper:()=>{r.value&&r.value.autoplay.start()}}),(l,h)=>{const k=F("VanImage");return n(),i("div",le,[t.stock===0&&t.goodsTypes!=2?(n(),i("div",ie,[S("div",re,[S("div",ce," ·"+y(l.$t("goods.Sold Out"))+"· ",1)])])):P("",!0),D(u(Q),{ref:(w,b)=>{b.swiperGoodsRef=w,B.value=w},class:"w-full","auto-height":!0,modules:m.value,pagination:$,autoplay:o,onSwiper:O,onMouseenter:j,onMouseleave:H,style:R(`${f.value?"":`height: ${a.value}px;`}`)},{default:G(()=>[(n(!0),i(z,null,M(t.imgs,(w,b)=>(n(),N(u(K),{onClick:fe=>p(b),key:b},{default:G(()=>[S("div",{class:"w-full object-contain overflow-hidden",style:R(`max-height: ${u(v)}px;`)},[D(k,{src:w||u(ee)("images/activity/boutique/squre_empty.png"),class:"object-cover w-full",fit:"contain",style:R(`${f.value?"":`height: ${a.value}px;`}`)},null,8,["src","style"])],4)]),_:2},1032,["onClick"]))),128))]),_:1},8,["modules","style"])])}}}),_e=L(ue,[["__scopeId","data-v-2e3a40ed"]]),de={class:"ship-type-tag text-[#ff8812] leading-normal"},pe=T({props:{deliveryType:null},setup(t){return(e,s)=>(n(),i("div",de,y(t.deliveryType===1?e.$t("common.send"):e.$t("goods.Buying agent")),1))}}),Se=L(pe,[["__scopeId","data-v-4d64d943"]]),Ie=T({props:{goods:{default:{}},activityGoods:{default:{}},showType:{default:"all"}},setup(t){const e=t,{t:s}=Y(),{tradeContributeSelfRate:d}=te(),a=c(0),f=async()=>{a.value=await d()},p=I(()=>{var r;if(e.goods.payType===2)return 0;const o=((r=e==null?void 0:e.activityGoods)==null?void 0:r.activityPrice)||0,g=+new x(new x(e.goods.discountRatio).div(100)).times(o||e.goods.price).times(a.value),v=+new x(new x(e.goods.balanceDiscountRatio).div(100)).times(o||e.goods.price).times(a.value);return e.showType==="balance"?g:e.showType==="points"?v:e.showType==="all"?e.goods.type===E.SD?g:Math.max(g,v):0}),B=I(()=>{var o;return e.showType==="balance"?s("mall.Givepoints",{num:_(p.value,2)}):e.showType==="points"?s("mall.Balance payment gift",{num:_(p.value,2)}):e.showType==="all"?e.goods.type!==E.SD&&+e.goods.balanceDiscountRatio>+((o=e.goods)==null?void 0:o.discountRatio)?s("mall.Balance payment gift",{num:_(p.value,2)}):s("mall.Givepoints",{num:_(p.value,2)}):""}),m=I(()=>{var o;return e.showType==="balance"?!1:e.showType==="points"?!0:e.showType==="all"?!(!e.goods.boutiqueFlag&&e.goods.payType!==se.POINTS_AVAILABLE||+e.goods.discountRatio>+((o=e.goods)==null?void 0:o.balanceDiscountRatio)):!1}),$=async()=>{f()};return Z(()=>{$()}),(o,g)=>(n(),i("div",{class:V([{"bg-red-002":u(m),"bg-primary ":!u(m)},"px-1 leading-normal text-white rounded text-xxs whitespace-nowrap"])},y(u(B)),3))}});export{_e as G,Se as S,be as _,xe as a,Ie as b};
