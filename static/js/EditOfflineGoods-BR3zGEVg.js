import{y as ge,r as k,x as Z,z as he,E as I,K as A,G as h,N as c,H as s,Q as u,O as v,a4 as ee,F as N,J as Ue,X as $,R as j,P as a,I as fe,n as Ge,bf as me,D as Me,bc as po,bd as fo,a1 as K,T as W,_ as mo,w as ho,a2 as bo,l as _o,be as ne,bF as De,bE as Ne,Y as xo,Z as yo,$ as wo,bs as Ee}from"./vendor-BlU_hoYl.js";import{C as Io}from"./CommonVanProvider-CDfGVWR4.js";import{_ as $o}from"./search-B34EARrH.js";import{_ as je}from"./checked-CkJ-Z4or.js";import{_ as Co}from"./BrandSelectPop-DQejPG99.js";import{e as Ke,W as ce,au as So,u as ko,r as Bo,_ as Vo,T as Fo,Y as Do,aK as No,aa as Pe,ab as Ae,a3 as Re,q as Te,aN as Eo,bQ as Le}from"./index-Wb-6_0W_.js";import{u as Oe}from"./upload-fNWojfp2.js";import{i as ze,c as qe}from"./offlineGoods-DvT2Go6q.js";import{S as pe}from"./shop-CeqcS6K2.js";import"./BackIcon-8hcEjDKb.js";const Po={class:"w-full py-4 pl-4 pr-2 bg-b6 rounded-[10px] overflow-hidden font-Puhui"},Ao={class:"text-center felx-1 relative mr-2"},Ro={class:"text-base font-bold"},To={class:"absolute right-0 top-0 pl-2"},Lo={class:"flex-1 bg-b5 rounded-3xl mr-2 mt-4 mb-2"},Oo=s("div",null,[s("img",{src:$o,class:"w-4 h-4"})],-1),zo={class:"categoryList pr-2 mr-2 overflow-y-auto"},qo=["id","onClick"],Uo=["innerHTML"],Go={key:0,class:"w-4 h-4",src:je,alt:""},Mo=ge({props:{list:null,id:null,level:null},emits:["close","select"],setup(V,{emit:p}){const O=V,H=k(!0),R=k(""),f=Z(()=>{if(!R.value.trim())return O.list;const r=C(R.value),m=new RegExp(`(${r})`,"gi");return O.list.filter(y=>y.goodsCategoryName.match(m))}),T=r=>{if(!R.value.trim())return r;const m=C(R.value),y=new RegExp(`(${m})`,"gi");return r.replace(y,'<span class="highlight">$1</span>')},C=r=>r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=r=>{p("select",r.goodsCategoryId,r.goodsCategoryName),p("close")},z=r=>{const m=document.getElementById(r);m&&m.scrollIntoView({behavior:"smooth"})};return he(()=>O.id,async r=>{r&&(await Ge(),z(r))},{immediate:!0,deep:!0}),(r,m)=>{const y=I("van-icon"),F=I("VanField"),Q=I("VanPopup");return h(),A(Q,{teleport:"body",show:H.value,position:"bottom",round:"","close-on-click-overlay":!1,onClickOverlay:m[2]||(m[2]=_=>r.$emit("close")),"overlay-class":"categoryOverlay",class:"sm:w-[375px] sm:left-[50%] sm:translate-x-[-50%]",style:{"min-height":"50%","border-radius":"16px 16px 0 0"}},{default:c(()=>[s("div",Po,[s("header",Ao,[s("div",Ro,u([r.$t("offline.one_category"),r.$t("offline.two_category"),r.$t("offline.three_category")][(V.level||1)-1])+" （"+u((V.list||[]).length)+"） ",1),s("div",To,[v(y,{name:"cross",size:"20",onClick:m[0]||(m[0]=ee(()=>{p("close")},["stop"]))})])]),s("div",Lo,[v(F,{modelValue:R.value,"onUpdate:modelValue":m[1]||(m[1]=_=>R.value=_),placeholder:r.$t("mall.Enter search keywords"),class:"w-[100% - 20px] text-center bg-transparent items-center",clearable:""},{"left-icon":c(()=>[Oo]),_:1},8,["modelValue","placeholder"])]),s("div",zo,[(h(!0),N(fe,null,Ue(a(f),_=>(h(),N("div",{key:_.goodsCategoryId,id:_.goodsCategoryId,class:"flex flex-1 justify-between py-4 border-b border-b-b4 last:border-none",onClick:X=>o(_)},[s("span",{class:j({"text-newOrigin":_.goodsCategoryId===V.id}),innerHTML:T(_.goodsCategoryName)},null,10,Uo),_.goodsCategoryId===V.id?(h(),N("img",Go)):$("",!0)],8,qo))),128))])])]),_:1},8,["show"])}}}),jo={class:"w-full py-4 px-3 safe-bottom bg-b6 rounded-[10px] overflow-hidden font-Puhui"},Ko={class:"text-center felx-1 relative mx-1"},Ho={class:"text-base font-bold"},Qo={class:"absolute right-0 top-0 pl-2"},Xo={class:"rounded-[10px] bg-[#F5F5F5] h-[56px] w-full mt-4"},Yo={class:"flex items-center justify-start w-full h-full p-3"},Jo={class:"w-8 h-8 rounded-[4px] bg-[#D9D9D9]"},Wo={class:"ml-2"},Zo={class:"text-base font-semibold text-b1 line-clamp-1 flex-shrink-0"},et={class:"flex-1 flex items-center gap-1 text-sm"},ot={class:"flex-1"},tt={class:"text-b3 flex items-center gap-x-1"},st={class:"line-clamp-1"},at={key:0,class:"w-4 h-4",src:je,alt:""},lt={class:"flex items-center gap-x-3 pt-4"},nt={class:"text-b1 text-sm"},dt=K(u("选择分店")),rt={key:0},it=K(" 选择全分店（含增补） "),ut=ge({props:{brand:null,ids:null},emits:["close","selectStore","changeBrand","selectAllStore"],setup(V,{emit:p}){var Y,de;const O=V,{cityMapStore:H}=Ke(),R=k(!0),f=me({total:0,loading:!1,finished:!1,list:[]}),T=me({page:0,size:20,storeBrandId:(Y=O.brand)==null?void 0:Y.storeBrandId,overseasFlag:((de=H.currentActiveCity)==null?void 0:de.overseasFlag)||!1,storeNameLike:void 0}),C=k([]),o=k(null),z=Z(()=>{var l,i;return(l=f.list)!=null&&l.length?((i=f.list)==null?void 0:i.length)===C.value.length:!1}),r=()=>{o.value.toggleAll(!z.value)},m=()=>{if(!C.value.length)return Q("请选择分店");p("selectStore",f.list.filter(l=>C.value.includes(l.storeId)))},y=()=>{p("selectAllStore")},F=()=>{p("changeBrand")},Q=(l="",i="toast-warn.svg")=>{W({message:l,icon:ce(i),duration:2e3,overlay:!0,overlayClass:"toastOverlay",className:"toastCard",type:"html"})},_=l=>{const i=document.getElementById(l);i&&i.scrollIntoView({behavior:"smooth"})};he(()=>O.ids,async l=>{l!=null&&l.length&&(C.value=l,await Ge(),_(l[0]))},{immediate:!0,deep:!0});const X=async()=>{f.loading=!0,T.page+=1,await x(),f.loading=!1},x=async()=>{var M;T.storeBrandId=(M=O.brand)==null?void 0:M.storeBrandId;const{success:l,data:i}=await So(T),{records:B,total:G,current:q,pages:U}=i;if(!l){f.finished=!0;return}if(!G||!B||!(B!=null&&B.length)){f.finished=!0;return}f.total=G,f.list=T.page===1?B:f.list.concat(B),z.value&&(C.value=f.list.map(oe=>oe.storeId)),+q>=+U&&(f.finished=!0)},E=l=>{let i="";return l.storeAddress?(l.areaExtName3&&l.storeAddress.indexOf(l.areaExtName3)>-1?i=l.storeAddress:i=`${l.areaExtName3}${l.storeAddress}`,l.areaExtName2&&l.storeAddress.indexOf(l.areaExtName2)>-1?i=i:i=`${l.areaExtName2}${i}`,l.areaExtName1&&l.storeAddress.indexOf(l.areaExtName1)>-1?i=i:i=`${l.areaExtName1}${i}`,i||""):(i=`${l.areaExtName3||""}${l.areaExtName2||""}${l.areaExtName1||""}${l.storeName||""}`,i)};return Me(()=>{X()}),(l,i)=>{const B=I("van-icon"),G=I("VanImage"),q=I("Empty"),U=I("van-checkbox"),M=I("van-checkbox-group"),oe=I("VanList"),J=I("van-radio"),te=I("VanButton"),re=I("VanPopup");return h(),A(re,{teleport:"body",show:R.value,position:"bottom",round:"","close-on-click-overlay":!1,onClickOverlay:i[3]||(i[3]=P=>l.$emit("close")),"overlay-class":"categoryOverlay",class:"sm:w-[375px] sm:left-[50%] sm:translate-x-[-50%]",style:{"min-height":"50%","border-radius":"16px 16px 0 0"}},{default:c(()=>{var P,ie;return[s("div",jo,[s("header",Ko,[s("div",Ho,u(l.$t("offline.select_branch_store")),1),s("div",Qo,[v(B,{name:"cross",size:"20",onClick:i[0]||(i[0]=ee(()=>{p("close")},["stop"]))})])]),s("section",Xo,[s("div",Yo,[s("div",Jo,[v(G,{src:((P=V.brand)==null?void 0:P.storeBrandIcon)||"",radius:"4px",width:"32px",height:"32px",fit:"cover"},null,8,["src"])]),s("div",Wo,[s("span",Zo,u((ie=V.brand)==null?void 0:ie.storeBrandName),1)]),s("div",{class:"ml-auto pl-1 flex-shrink-0"},[s("span",{class:"text-[#FF8812] text-sm font-normal",onClick:F}," 更换品牌 ")])])]),a(f).list.length===0&&!a(f).loading?(h(),A(q,{key:0,name:"当前品牌下无门店"})):$("",!0),po(v(oe,{loading:a(f).loading,"onUpdate:loading":i[2]||(i[2]=S=>a(f).loading=S),finished:a(f).finished,"immediate-check":!1,"loading-text":l.$t("common.loading"),onLoad:X,class:"shopList h-[calc(100vh-230px)] mx-1 overflow-y-auto"},{default:c(()=>[v(M,{modelValue:C.value,"onUpdate:modelValue":i[1]||(i[1]=S=>C.value=S),ref:(S,se)=>{se.checkboxGroup=S,o.value=S}},{default:c(()=>[(h(!0),N(fe,null,Ue(a(f).list,S=>(h(),A(U,{key:S.storeId,name:S.storeId,id:S,"label-position":"left",class:"flex flex-1 justify-between py-4 border-b border-b-b4 last:border-none"},{icon:c(se=>[se.checked?(h(),N("img",at)):$("",!0)]),default:c(()=>[s("div",et,[s("div",ot,[s("div",{class:j([{"text-newOrigin font-semibold":C.value.includes(S.storeId)},"line-clamp-1"])},u(S.storeName),3),s("div",tt,[s("span",st,u(E(S)),1)])])])]),_:2},1032,["name","id"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["loading","finished","loading-text"]),[[fo,a(f).list.length>0]]),s("div",lt,[a(f).list.length>0?(h(),N(fe,{key:0},[s("div",{onClick:r},[v(J,{checked:a(z),"checked-color":"#FF8812","icon-size":"16px"},{default:c(()=>[s("span",nt,u(l.$t("common.check all")),1)]),_:1},8,["checked"])]),v(te,{class:"submit-btn flex-1 bg-yellow text-b1 text-base font-semibold border-none h-[46px]",round:"",onClick:m},{default:c(()=>[dt,C.value.length?(h(),N("span",rt,"("+u(C.value.length)+")",1)):$("",!0)]),_:1})],64)):a(f).loading?$("",!0):(h(),A(te,{key:1,class:"submit-btn flex-1 bg-yellow text-b1 text-base font-semibold border-none h-[46px]",round:"",onClick:y},{default:c(()=>[it]),_:1}))])])]}),_:1},8,["show"])}}}),He=V=>(yo("data-v-b7f0a3f4"),V=V(),wo(),V),ct={class:"bg-white rounded-xl overflow-hidden mx-3 px-3 py-4 title"},gt={class:"text-b1 font-semibold"},vt={class:"border-b4 border-b border-solid pb-4 van-uploader__wrapper gap-1.5"},pt=["onClick"],ft={class:"van-image van-uploader__preview-image handle",style:{width:"60px",height:"60px"}},mt=["onClick"],ht=He(()=>s("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)),bt=[ht],_t={class:"w-[60px] h-[60px] bg-b5 rounded-xl text-center flex flex-col justify-center items-center text-[#d9d9d9]"},xt=["src"],yt={class:"text-xs font-light text-center text-b1 opacity-30"},wt={class:"border-b4 border-b border-solid"},It={class:"text-default font-semibold"},$t={key:0,class:"border-b4 border-b border-solid"},Ct={class:"text-default font-semibold"},St={key:1,class:"border-b4 border-b border-solid"},kt={class:"text-default font-semibold"},Bt={class:"pt-4 font-semibold text-b1"},Vt={class:"van-uploader__wrapper gap-1.5"},Ft=["onClick"],Dt={class:"van-image van-uploader__preview-image handle",style:{width:"60px",height:"60px"}},Nt=["onClick"],Et=He(()=>s("i",{class:"van-badge__wrapper van-icon van-icon-cross van-uploader__preview-delete-icon"},null,-1)),Pt=[Et],At={class:"w-[60px] h-[60px] bg-b5 rounded-xl text-center flex flex-col justify-center items-center text-[#d9d9d9]"},Rt=["src"],Tt={class:"text-xs font-light text-center text-b1 opacity-30"},Lt={class:"bg-white rounded-xl overflow-hidden m-3 px-3 title"},Ot={class:"text-default font-semibold"},zt={key:0,class:"text-b3"},qt={key:0,class:"rounded-[10px] bg-[#F5F5F5] min-h-[56px] w-full mb-4 p-3"},Ut={class:"flex items-center justify-start w-full h-full"},Gt={class:"shrink-0 w-8 h-8 rounded-[4px] bg-[#D9D9D9]"},Mt={class:"ml-2 w-full flex justify-between items-center"},jt={class:"text-base font-semibold text-b1 line-clamp-1"},Kt={key:0,class:"bg-white rounded-xl m-3 overflow-hidden"},Ht={class:"text-default font-semibold"},Qt={class:"bg-white rounded-xl overflow-hidden m-3 px-3 title"},Xt={class:"border-b4 border-b border-solid"},Yt={class:"text-default font-semibold"},Jt={class:"text-default font-semibold"},Wt=K("%"),Zt={key:1,class:"fixed bottom-0 flex items-center px-3 pt-4 safe-bottom justify-evenly gap-x-3 btn-wrapper sm:w-[375px] w-full left-[50%]",style:{transform:"translateX(-50%)"}},es={class:"text-b3 text-center text-sm mt-6"},os={class:"flex items-center justify-between mt-6"},ts=ge({name:"EditOfflineGoods"});function ss(V){const{t:p}=ho(),{accountStore:O,serviceCategoriesStore:H}=Ke(),{getCurrentStoreId:R}=ko(),{loadingToggle:f}=Bo(),T=bo(),C=_o(),o=k({goodsId:null,shopId:null,goodsName:"",goodsIcons:"",goodsPrice:null,goodsDiscountRatio:null,goodsDesc:null,goodsPics:"",goodsStatus:1,goodsType:null,goodsCategoryId1:null,goodsCategoryName1:null,goodsCategoryId2:null,goodsCategoryName2:null,goodsCategoryId3:null,goodsCategoryName3:null,goodsCategoryId:null,storeBrandId:void 0,includeAllStoreFlag:!1}),z=Z(()=>!o.value.goodsName||r.value.length<=0||!o.value.goodsCategoryId1||!o.value.goodsCategoryId2||!o.value.goodsCategoryId3||!o.value.goodsPrice||!o.value.goodsDiscountRatio||!o.value.includeAllStoreFlag&&!E.value.length),r=k([]),m=k([]),y=k(0),F=k(0),Q=k([]),_=k(1),X=k(null),x=me({storeBrandId:null,storeBrandName:null,storeBrandIcon:null}),E=k([]),Y=Z(()=>E.value.map(e=>e.storeId)),[de,l]=ne(!1),[i,B]=ne(!1),[G,q]=ne(!1),[U,M]=ne(!1),[oe,J]=ne(!1),te=Z(()=>({1:p("common.boutique"),2:p("mall.Best"),3:p("shop.Star Selection")})),re=[[1,80],[4,30],[10,80],[20,80]],P=Z(()=>{let e=[1,80];return y.value&&(e=re[F.value]),e}),ie=e=>e.replace(/^(\d*\.?\d{0,4}).*$/,"$1"),S=e=>{function t(n){let g=n.replace(/[^\d.]/g,"");return g=g.replace(/(\..*)\./g,"$1"),g=y.value?g.replace(/^(\d*\.?\d{0,0}).*$/,"$1"):g.replace(/^(\d*\.?\d{0,2}).*$/,"$1"),g}return e>P.value[1]?P.value[1].toString():t(e.toString())};he(()=>y.value,()=>{o.value.goodsDiscountRatio>0&&(o.value.goodsDiscountRatio=S(o.value.goodsDiscountRatio))});const se=()=>{if(!y.value&&F.value&&o.value.goodsDiscountRatio>0){const e=re[F.value];o.value.goodsDiscountRatio>=e[0]&&o.value.goodsDiscountRatio<=e[1]&&(y.value=F.value)}},ue=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)}),be=k(5),Qe=async e=>{if(r.value.length>=be.value)return;const t=Pe(e.file);if(!t.valid)return D(t.tips);const n=Ae(e.file);if(!n.valid)return D(n.tips);W.loading({message:p("common.uploading"),forbidClick:!0,duration:0});const g=await Re(e,"goodsImg"),L=await Oe(g);if(W.clear(),!L.success)return D("图片上传失败");r.value.push({id:ue(),url:Te.imgUrl+L.data})},Xe=e=>{r.value.splice(e,1)},Ye=e=>{Ee({images:r.value.map(t=>t.url),startPosition:e})},_e=k(5),Je=async e=>{if(m.value.length>=_e.value)return;const t=Pe(e.file);if(!t.valid)return D(t.tips);const n=Ae(e.file);if(!n.valid)return D(n.tips);W.loading({message:p("common.uploading"),forbidClick:!0,duration:0});const g=await Re(e,"goodsDesc"),L=await Oe(g);if(W.clear(),!L.success)return D("图片上传失败");m.value.push({id:ue(),url:Te.imgUrl+L.data})},We=e=>{m.value.splice(e,1)},Ze=e=>{Ee({images:m.value.map(t=>t.url),startPosition:e})},ve=(e,t,n)=>{Q.value=Eo(H.fullCategories,{idKey:"goodsCategoryId",parentKey:"goodsCategoryParentId",rootId:t}),X.value=e,_.value=n,M(!0)},eo=(e,t)=>{if(o.value[`goodsCategoryId${_.value}`]=e,o.value[`goodsCategoryName${_.value}`]=t,_.value<3)for(let n=_.value;n<3;n++)o.value[`goodsCategoryId${n+1}`]=null,o.value[`goodsCategoryName${n+1}`]=null},oo=()=>{x.storeBrandId&&E.value.length?B(!0):l(!0)},to=e=>{x.storeBrandId!==e.storeBrandId&&(E.value=[],o.value.includeAllStoreFlag=!1),x.storeBrandId=e.storeBrandId,x.storeBrandName=e.storeBrandName,x.storeBrandIcon=e.storeBrandIcon},xe=()=>{E.value=[],o.value.includeAllStoreFlag=!0,l(!1),B(!1)},so=()=>{B(!0)},ao=e=>{E.value=e||[],o.value.includeAllStoreFlag=!1,B(!1)},lo=()=>{B(!1),l(!0)},D=e=>{W({message:e,icon:ce("toast-warn.svg"),duration:2e3,overlay:!0,overlayClass:"toastOverlay",className:"toastCard",type:"html"})},no=()=>{o.value.goodsPrice<0&&(D(p("offline.price_tips")),o.value.goodsPrice=Math.abs(o.value.goodsPrice))},ye=()=>{var e;return o.value.goodsName?r.value.length?((e=o.value)==null?void 0:e.goodsPrice)<=0?(D(p("shop.pleaseInput")+p("goods.price")),!1):!0:(D(p("offline.empty_image")),!1):(D(p("offline.offline_name_placeholder")),!1)},we=async()=>{var n;const e=r.value.map(g=>g.url),t=m.value.map(g=>g.url);o.value.goodsType=y.value?F.value:pe.SD,o.value.goodsIcons=e.join(","),o.value.goodsPics=t.join(","),o.value.shopId=(n=await R())==null?void 0:n.id,o.value.storeBrandId=x.storeBrandId||void 0,o.value.storeIds=Y.value.length?Y.value:void 0},ro=async()=>{if(!ye())return;q(!0),o.value.goodsStatus=qe.DRAFT,await we();const{success:e,data:t}=await Le(o.value);q(!1),e&&(o.value.goodsId=t,Ie())},io=async()=>{if(!ye())return;if(!o.value.goodsCategoryId1)return D(p("shop.pleaseSelect")+p("offline.one_category"));if(!o.value.goodsCategoryId2)return D(p("shop.pleaseSelect")+p("offline.two_category"));if(!o.value.goodsCategoryId3)return D(p("shop.pleaseSelect")+p("offline.three_category"));if(!o.value.goodsDiscountRatio||o.value.goodsDiscountRatio<P.value[0]||+o.value.goodsDiscountRatio>P.value[1]){const n=p("offline.empty_discount")+`<div class="text-center ">(${P.value[0]}-${P.value[1]}%)</div>`;return D(n)}q(!0),o.value.goodsStatus=qe.Published,await we();const{success:e,data:t}=await Le(o.value);q(!1),e&&(o.value.goodsId=t,J(!0))},uo=()=>{var e,t,n;if($e(),J(!1),(e=o.value)!=null&&e.goodsId){let g={};(t=o.value)!=null&&t.goodsId&&(g.goodsId=(n=o.value)==null?void 0:n.goodsId),C.replace({path:"/offlineGoodsDetail",query:g})}},Ie=()=>{$e(),J(!1),C.back()},$e=()=>{var t;const e=((t=o.value)==null?void 0:t.goodsId)||T.query.goodsId||"add";sessionStorage.setItem("shop_offline_refresh_id",e.toString())},co=async()=>{var n,g,L,ae;const e=(n=T.query)==null?void 0:n.goodsId;if(!e)return;const t=await Do({id:e.toString()});t.success&&(o.value=t.data,o.value.goodsId=e.toString(),((g=o.value)==null?void 0:g.goodsType)!==pe.SD&&F.value!==pe.SD&&(y.value=1),o.value.goodsIcons&&(r.value=(o.value.goodsIcons||"").split(",").map(le=>({id:ue(),url:le}))),o.value.goodsPics&&(m.value=o.value.goodsPics.split(",").map(le=>({id:ue(),url:le}))),o.value.goodsDiscountRatio<=0&&(o.value.goodsDiscountRatio=null),+o.value.storeBrandId&&(x.storeBrandId=o.value.storeBrandId,x.storeBrandName=(L=o.value)==null?void 0:L.storeBrandName,x.storeBrandIcon=(ae=o.value)==null?void 0:ae.storeBrandIcon))},go=async()=>{var n,g;const e=(n=T.query)==null?void 0:n.goodsId;if(!e)return;const t=await No({size:999,goodsId:e});t.success&&(E.value=((g=t.data)==null?void 0:g.records)||[])},vo=async()=>{var n;const{success:e,data:t}=await Fo((n=await R())==null?void 0:n.merchant);e&&(F.value=t==null?void 0:t.type)};return Me(async()=>{f(!0),H.init(),await vo(),co(),go(),f(!1)}),(e,t)=>{const n=I("van-field"),g=I("VanImage"),L=I("van-uploader"),ae=I("VanIcon"),le=I("van-switch"),Ce=I("VanButton");return h(),A(Io,{title:e.$t("offline.published_goods"),class:"font-Puhui font-normal relative pb-20 bg-gray1",themeVars:{navBarBackgroundColor:"#F2F0EF"}},{default:c(()=>{var Se,ke,Be,Ve,Fe;return[s("div",ct,[s("div",gt,u(e.$t("offline.offline_name")),1),v(n,{modelValue:o.value.goodsName,"onUpdate:modelValue":t[0]||(t[0]=d=>o.value.goodsName=d),autosize:"",type:"text",placeholder:e.$t("offline.offline_name_placeholder"),maxlength:"50",class:"no-bt"},null,8,["modelValue","placeholder"]),s("div",vt,[v(a(Ne),De({class:"flex flex-wrap gap-1.5",modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=d=>r.value=d),"item-key":"id",distance:"12",delay:"200",touchStartThreshold:"15"},{animation:200,group:"description",disabled:!1,ghostClass:"ghost"},{handle:".handle"}),{item:c(({element:d,index:b})=>[s("div",{class:"van-uploader__preview",onClick:ee(w=>Ye(b),["stop"])},[s("div",ft,[v(g,{src:d.url,class:"van-image__img",radius:"6px",fit:"cover"},null,8,["src"])]),s("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:ee(w=>Xe(b),["stop"])},bt,8,mt)],8,pt)]),_:1},16,["modelValue","handle"]),r.value.length<be.value?(h(),A(L,{key:0,accept:a(ze),afterRead:Qe},{default:c(()=>[s("div",_t,[s("img",{src:a(ce)("image-default.svg"),class:"w-6 mx-auto",alt:""},null,8,xt),s("div",yt,u(e.$t("offline.main_image")),1)])]),_:1},8,["accept"])):$("",!0)]),s("div",wt,[v(n,{"input-align":"right",autocomplete:"off",class:"no-bt",onClick:t[2]||(t[2]=d=>{var b;return ve((b=o.value)==null?void 0:b.goodsCategoryId1,0,1)})},{label:c(()=>[s("div",It,u(e.$t("offline.one_category")),1)]),input:c(()=>{var d,b,w;return[s("div",{class:j(["dropdown text-b3",{"!text-b2":(d=o.value)==null?void 0:d.goodsCategoryId1,"down-active":_.value===1&&a(U)}])},u((b=o.value)!=null&&b.goodsCategoryId1?(w=o.value)==null?void 0:w.goodsCategoryName1:e.$t("shop.pleaseSelect")),3)]}),_:1})]),(Se=o.value)!=null&&Se.goodsCategoryId1?(h(),N("div",$t,[v(n,{"input-align":"right",autocomplete:"off",class:"no-bt",onClick:t[3]||(t[3]=d=>{var b,w;return ve((b=o.value)==null?void 0:b.goodsCategoryId2,(w=o.value)==null?void 0:w.goodsCategoryId1,2)})},{label:c(()=>[s("div",Ct,u(e.$t("offline.two_category")),1)]),input:c(()=>{var d,b,w;return[s("div",{class:j(["dropdown text-b3",{"!text-b2":(d=o.value)==null?void 0:d.goodsCategoryId2,"down-active":_.value===2&&a(U)}])},u((b=o.value)!=null&&b.goodsCategoryId2?(w=o.value)==null?void 0:w.goodsCategoryName2:e.$t("shop.pleaseSelect")),3)]}),_:1})])):$("",!0),(ke=o.value)!=null&&ke.goodsCategoryId2?(h(),N("div",St,[v(n,{"input-align":"right",autocomplete:"off",class:"no-bt",onClick:t[4]||(t[4]=d=>{var b,w;return ve((b=o.value)==null?void 0:b.goodsCategoryId3,(w=o.value)==null?void 0:w.goodsCategoryId2,3)})},{label:c(()=>[s("div",kt,u(e.$t("offline.three_category")),1)]),input:c(()=>{var d,b,w;return[s("div",{class:j(["dropdown text-b3",{"!text-b2":(d=o.value)==null?void 0:d.goodsCategoryId3,"down-active":_.value===3&&a(U)}])},u((b=o.value)!=null&&b.goodsCategoryId3?(w=o.value)==null?void 0:w.goodsCategoryName3:e.$t("shop.pleaseSelect")),3)]}),_:1})])):$("",!0),s("div",Bt,u(`${e.$t("goods.goodsDesc")}`),1),v(n,{modelValue:o.value.goodsDesc,"onUpdate:modelValue":t[5]||(t[5]=d=>o.value.goodsDesc=d),rows:"1",autosize:"",type:"textarea",placeholder:e.$t("goods.pleaseInputDesc"),class:"no-bt",style:{"padding-top":"8px !important","padding-bottom":"8px !important"}},null,8,["modelValue","placeholder"]),s("div",Vt,[v(a(Ne),De({class:"flex flex-wrap gap-1.5",modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=d=>m.value=d),"item-key":"id",distance:"12",delay:"200",touchStartThreshold:"15"},{animation:200,group:"description",disabled:!1,ghostClass:"ghost"},{handle:".handle"}),{item:c(({element:d,index:b})=>[s("div",{class:"van-uploader__preview",onClick:ee(w=>Ze(b),["stop"])},[s("div",Dt,[v(g,{src:d.url,class:"van-image__img",radius:"6px",fit:"cover"},null,8,["src"])]),s("div",{role:"button",class:"van-uploader__preview-delete van-uploader__preview-delete--shadow",tabindex:"0","aria-label":"删除",onClick:ee(w=>We(b),["stop"])},Pt,8,Nt)],8,Ft)]),_:1},16,["modelValue","handle"]),m.value.length<_e.value?(h(),A(L,{key:0,accept:a(ze),afterRead:Je},{default:c(()=>[s("div",At,[s("img",{src:a(ce)("image-default.svg"),class:"w-6 mx-auto",alt:""},null,8,Rt),s("div",Tt,u(e.$t("goods.descImage")),1)])]),_:1},8,["accept"])):$("",!0)])]),s("div",Lt,[s("div",{onClick:t[7]||(t[7]=d=>oo())},[v(n,{"input-align":"right",autocomplete:"off",class:"no-bt",style:xo(a(x).storeBrandId?"padding-bottom: 12px !important":"")},{label:c(()=>[s("div",Ot,u(e.$t("offline.brandInfo")),1)]),input:c(()=>[a(x).storeBrandId?$("",!0):(h(),N("div",zt,[K(u(e.$t("shop.pleaseSelect"))+" ",1),v(ae,{name:"arrow",class:"text-xs font-bold"})]))]),_:1},8,["style"]),a(x).storeBrandId?(h(),N("div",qt,[s("div",Ut,[s("div",Gt,[v(g,{src:a(x).storeBrandIcon||"",radius:"4px",width:"32px",height:"32px",fit:"cover"},null,8,["src"])]),s("div",Mt,[s("div",jt,u(a(x).storeBrandName||""),1),s("div",{class:j(["shrink-0 text-b3",{"!text-b2":(Be=E.value)==null?void 0:Be.length}])},[K(u(o.value.includeAllStoreFlag?"已选全分店含增补":(Ve=E.value)!=null&&Ve.length?e.$t("offline.store_selected",{num:(Fe=E.value)==null?void 0:Fe.length}):a(x).storeBrandId?"未选择分店":e.$t("shop.pleaseSelect"))+" ",1),v(ae,{name:"arrow",class:"text-xs font-bold"})],2)])])])):$("",!0)])]),F.value?(h(),N("div",Kt,[v(n,{"input-align":"right",autocomplete:"off",class:"no-bt",style:{"padding-top":"16px !important","padding-bottom":"16px !important"},label:`*${e.$t("goods.setting boutique good"),{type:a(te)[F.value]}}`},{label:c(()=>[s("div",Ht,u(`${e.$t("goods.setting boutique good",{type:a(te)[F.value]})}`),1)]),input:c(()=>[v(le,{modelValue:y.value,"onUpdate:modelValue":t[8]||(t[8]=d=>y.value=d),"active-color":"#FF8812","inactive-color":"#B7B4B0","active-value":1,"inactive-value":0,size:"20"},null,8,["modelValue"])]),_:1},8,["label"])])):$("",!0),s("div",Qt,[s("div",Xt,[v(n,{"input-align":"right",type:"number",autocomplete:"off",modelValue:o.value.goodsPrice,"onUpdate:modelValue":t[9]||(t[9]=d=>o.value.goodsPrice=d),onBlur:no,formatter:ie,placeholder:e.$t("shop.pleaseInput"),class:"no-bt"},{label:c(()=>[s("div",Yt,u(e.$t("offline.mcPrice")),1)]),_:1},8,["modelValue","placeholder"])]),v(n,{class:"no-bt","input-align":"right",type:y.value?"digit":"number",autocomplete:"off",modelValue:o.value.goodsDiscountRatio,"onUpdate:modelValue":t[10]||(t[10]=d=>o.value.goodsDiscountRatio=d),formatter:S,placeholder:`${e.$t("shop.pleaseInput")}${a(P)[0]}-${a(P)[1]}`,onBlur:se},{label:c(()=>[s("div",Jt,u(`${e.$t("offline.discountRatio")} `),1)]),"right-icon":c(()=>[Wt]),_:1},8,["type","modelValue","placeholder"])]),a(O).isOnlyView?$("",!0):(h(),N("div",Zt,[!a(T).query.goodsId||o.value.goodsStatus!==1?(h(),A(Ce,{key:0,round:"",type:"primary",class:"flex-1 min-w-[130px] h-[46px] rounded-full border border-solid border-b4 bg-white text-b2 text-base font-semibold",onClick:t[11]||(t[11]=d=>ro()),loading:a(G)},{default:c(()=>[K(u(e.$t("goods.saveDraft")),1)]),_:1},8,["loading"])):$("",!0),v(Ce,{round:"",class:j(["flex-1 min-w-[130px] h-[46px] text-base font-semibold",a(z)?"bg-b4 text-b2":"bg-btnOrBg text-b1"]),disabled:a(z),onClick:t[12]||(t[12]=d=>io()),loading:a(G)},{default:c(()=>[K(u(e.$t("goods.upimmediately")),1)]),_:1},8,["disabled","class","loading"])])),a(U)?(h(),A(Mo,{key:2,list:Q.value,level:_.value,id:X.value,onSelect:eo,onClose:t[13]||(t[13]=d=>a(M)(!1))},null,8,["list","level","id"])):$("",!0),a(de)?(h(),A(Co,{key:3,brand:a(x),includeAllStoreFlag:o.value.includeAllStoreFlag,"select-store":"",onSelectStore:so,onSelectAllStore:xe,onSelectBrand:to,onClose:t[14]||(t[14]=d=>a(l)(!1))},null,8,["brand","includeAllStoreFlag"])):$("",!0),a(i)?(h(),A(ut,{key:4,ids:a(Y),brand:a(x),onSelectStore:ao,onChangeBrand:lo,onSelectAllStore:xe,onClose:t[15]||(t[15]=d=>a(B)(!1))},null,8,["ids","brand"])):$("",!0),v(Vo,{noClose:"",name:e.$t("offline.published_success"),show:a(oe),onClose:t[17]||(t[17]=d=>a(J)(!1))},{default:c(()=>[s("div",es,u(e.$t("offline.published_success_desc")),1),s("div",os,[s("div",{class:"flex-1 h-[46px] leading-[44px] rounded-full text-center border border-solid-b4 mr-3",onClick:uo},u(e.$t("flashSale.check-the-details")),1),s("div",{class:"flex-1 h-[46px] leading-[46px] rounded-full text-center bg-yellow",onClick:t[16]||(t[16]=d=>Ie())},u(e.$t("common.back list")),1)])]),_:1},8,["name","show"])]}),_:1},8,["title"])}}const as=ge({...ts,setup:ss}),fs=mo(as,[["__scopeId","data-v-b7f0a3f4"]]);export{fs as default};
